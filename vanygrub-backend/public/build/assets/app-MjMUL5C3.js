function Rh(n,e){return function(){return n.apply(e,arguments)}}const{toString:Bm}=Object.prototype,{getPrototypeOf:_a}=Object,{iterator:Ei,toStringTag:bh}=Symbol,Ti=(n=>e=>{const t=Bm.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),et=n=>(n=n.toLowerCase(),e=>Ti(e)===n),wi=n=>e=>typeof e===n,{isArray:tr}=Array,Gn=wi("undefined");function Qr(n){return n!==null&&!Gn(n)&&n.constructor!==null&&!Gn(n.constructor)&&Me(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Sh=et("ArrayBuffer");function qm(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Sh(n.buffer),e}const jm=wi("string"),Me=wi("function"),Ph=wi("number"),Xr=n=>n!==null&&typeof n=="object",$m=n=>n===!0||n===!1,Ms=n=>{if(Ti(n)!=="object")return!1;const e=_a(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(bh in n)&&!(Ei in n)},zm=n=>{if(!Xr(n)||Qr(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Hm=et("Date"),Wm=et("File"),Gm=et("Blob"),Km=et("FileList"),Qm=n=>Xr(n)&&Me(n.pipe),Xm=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Me(n.append)&&((e=Ti(n))==="formdata"||e==="object"&&Me(n.toString)&&n.toString()==="[object FormData]"))},Jm=et("URLSearchParams"),[Ym,Zm,eg,tg]=["ReadableStream","Request","Response","Headers"].map(et),ng=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jr(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,s;if(typeof n!="object"&&(n=[n]),tr(n))for(r=0,s=n.length;r<s;r++)e.call(null,n[r],r,n);else{if(Qr(n))return;const i=t?Object.getOwnPropertyNames(n):Object.keys(n),a=i.length;let c;for(r=0;r<a;r++)c=i[r],e.call(null,n[c],c,n)}}function Ch(n,e){if(Qr(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,s;for(;r-- >0;)if(s=t[r],e===s.toLowerCase())return s;return null}const ln=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kh=n=>!Gn(n)&&n!==ln;function Bo(){const{caseless:n,skipUndefined:e}=kh(this)&&this||{},t={},r=(s,i)=>{const a=n&&Ch(t,i)||i;Ms(t[a])&&Ms(s)?t[a]=Bo(t[a],s):Ms(s)?t[a]=Bo({},s):tr(s)?t[a]=s.slice():(!e||!Gn(s))&&(t[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Jr(arguments[s],r);return t}const rg=(n,e,t,{allOwnKeys:r}={})=>(Jr(e,(s,i)=>{t&&Me(s)?n[i]=Rh(s,t):n[i]=s},{allOwnKeys:r}),n),sg=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),ig=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},og=(n,e,t,r)=>{let s,i,a;const c={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),i=s.length;i-- >0;)a=s[i],(!r||r(a,n,e))&&!c[a]&&(e[a]=n[a],c[a]=!0);n=t!==!1&&_a(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},ag=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},cg=n=>{if(!n)return null;if(tr(n))return n;let e=n.length;if(!Ph(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},ug=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&_a(Uint8Array)),lg=(n,e)=>{const r=(n&&n[Ei]).call(n);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(n,i[0],i[1])}},hg=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},dg=et("HTMLFormElement"),fg=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,s){return r.toUpperCase()+s}),Tu=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),pg=et("RegExp"),Nh=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Jr(t,(s,i)=>{let a;(a=e(s,i,n))!==!1&&(r[i]=a||s)}),Object.defineProperties(n,r)},mg=n=>{Nh(n,(e,t)=>{if(Me(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Me(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},gg=(n,e)=>{const t={},r=s=>{s.forEach(i=>{t[i]=!0})};return tr(n)?r(n):r(String(n).split(e)),t},_g=()=>{},yg=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Eg(n){return!!(n&&Me(n.append)&&n[bh]==="FormData"&&n[Ei])}const Tg=n=>{const e=new Array(10),t=(r,s)=>{if(Xr(r)){if(e.indexOf(r)>=0)return;if(Qr(r))return r;if(!("toJSON"in r)){e[s]=r;const i=tr(r)?[]:{};return Jr(r,(a,c)=>{const l=t(a,s+1);!Gn(l)&&(i[c]=l)}),e[s]=void 0,i}}return r};return t(n,0)},wg=et("AsyncFunction"),Ig=n=>n&&(Xr(n)||Me(n))&&Me(n.then)&&Me(n.catch),Oh=((n,e)=>n?setImmediate:e?((t,r)=>(ln.addEventListener("message",({source:s,data:i})=>{s===ln&&i===t&&r.length&&r.shift()()},!1),s=>{r.push(s),ln.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Me(ln.postMessage)),vg=typeof queueMicrotask<"u"?queueMicrotask.bind(ln):typeof process<"u"&&process.nextTick||Oh,Ag=n=>n!=null&&Me(n[Ei]),S={isArray:tr,isArrayBuffer:Sh,isBuffer:Qr,isFormData:Xm,isArrayBufferView:qm,isString:jm,isNumber:Ph,isBoolean:$m,isObject:Xr,isPlainObject:Ms,isEmptyObject:zm,isReadableStream:Ym,isRequest:Zm,isResponse:eg,isHeaders:tg,isUndefined:Gn,isDate:Hm,isFile:Wm,isBlob:Gm,isRegExp:pg,isFunction:Me,isStream:Qm,isURLSearchParams:Jm,isTypedArray:ug,isFileList:Km,forEach:Jr,merge:Bo,extend:rg,trim:ng,stripBOM:sg,inherits:ig,toFlatObject:og,kindOf:Ti,kindOfTest:et,endsWith:ag,toArray:cg,forEachEntry:lg,matchAll:hg,isHTMLForm:dg,hasOwnProperty:Tu,hasOwnProp:Tu,reduceDescriptors:Nh,freezeMethods:mg,toObjectSet:gg,toCamelCase:fg,noop:_g,toFiniteNumber:yg,findKey:Ch,global:ln,isContextDefined:kh,isSpecCompliantForm:Eg,toJSONObject:Tg,isAsyncFn:wg,isThenable:Ig,setImmediate:Oh,asap:vg,isIterable:Ag};function H(n,e,t,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}S.inherits(H,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.status}}});const Dh=H.prototype,Vh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Vh[n]={value:n}});Object.defineProperties(H,Vh);Object.defineProperty(Dh,"isAxiosError",{value:!0});H.from=(n,e,t,r,s,i)=>{const a=Object.create(Dh);S.toFlatObject(n,a,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const c=n&&n.message?n.message:"Error",l=e==null&&n?n.code:e;return H.call(a,c,l,t,r,s),n&&a.cause==null&&Object.defineProperty(a,"cause",{value:n,configurable:!0}),a.name=n&&n.name||"Error",i&&Object.assign(a,i),a};const Rg=null;function qo(n){return S.isPlainObject(n)||S.isArray(n)}function Lh(n){return S.endsWith(n,"[]")?n.slice(0,-2):n}function wu(n,e,t){return n?n.concat(e).map(function(s,i){return s=Lh(s),!t&&i?"["+s+"]":s}).join(t?".":""):e}function bg(n){return S.isArray(n)&&!n.some(qo)}const Sg=S.toFlatObject(S,{},null,function(e){return/^is[A-Z]/.test(e)});function Ii(n,e,t){if(!S.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=S.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,b){return!S.isUndefined(b[k])});const r=t.metaTokens,s=t.visitor||f,i=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(e);if(!S.isFunction(s))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(S.isDate(v))return v.toISOString();if(S.isBoolean(v))return v.toString();if(!l&&S.isBlob(v))throw new H("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(v)||S.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,k,b){let M=v;if(v&&!b&&typeof v=="object"){if(S.endsWith(k,"{}"))k=r?k:k.slice(0,-2),v=JSON.stringify(v);else if(S.isArray(v)&&bg(v)||(S.isFileList(v)||S.endsWith(k,"[]"))&&(M=S.toArray(v)))return k=Lh(k),M.forEach(function(L,j){!(S.isUndefined(L)||L===null)&&e.append(a===!0?wu([k],j,i):a===null?k:k+"[]",h(L))}),!1}return qo(v)?!0:(e.append(wu(b,k,i),h(v)),!1)}const m=[],E=Object.assign(Sg,{defaultVisitor:f,convertValue:h,isVisitable:qo});function C(v,k){if(!S.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+k.join("."));m.push(v),S.forEach(v,function(M,U){(!(S.isUndefined(M)||M===null)&&s.call(e,M,S.isString(U)?U.trim():U,k,E))===!0&&C(M,k?k.concat(U):[U])}),m.pop()}}if(!S.isObject(n))throw new TypeError("data must be an object");return C(n),e}function Iu(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ya(n,e){this._pairs=[],n&&Ii(n,this,e)}const Mh=ya.prototype;Mh.append=function(e,t){this._pairs.push([e,t])};Mh.toString=function(e){const t=e?function(r){return e.call(this,r,Iu)}:Iu;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function Pg(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function xh(n,e,t){if(!e)return n;const r=t&&t.encode||Pg;S.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let i;if(s?i=s(e,t):i=S.isURLSearchParams(e)?e.toString():new ya(e,t).toString(r),i){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class vu{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){S.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Uh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cg=typeof URLSearchParams<"u"?URLSearchParams:ya,kg=typeof FormData<"u"?FormData:null,Ng=typeof Blob<"u"?Blob:null,Og={isBrowser:!0,classes:{URLSearchParams:Cg,FormData:kg,Blob:Ng},protocols:["http","https","file","blob","url","data"]},Ea=typeof window<"u"&&typeof document<"u",jo=typeof navigator=="object"&&navigator||void 0,Dg=Ea&&(!jo||["ReactNative","NativeScript","NS"].indexOf(jo.product)<0),Vg=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Lg=Ea&&window.location.href||"http://localhost",Mg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ea,hasStandardBrowserEnv:Dg,hasStandardBrowserWebWorkerEnv:Vg,navigator:jo,origin:Lg},Symbol.toStringTag,{value:"Module"})),Se={...Mg,...Og};function xg(n,e){return Ii(n,new Se.classes.URLSearchParams,{visitor:function(t,r,s,i){return Se.isNode&&S.isBuffer(t)?(this.append(r,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Ug(n){return S.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Fg(n){const e={},t=Object.keys(n);let r;const s=t.length;let i;for(r=0;r<s;r++)i=t[r],e[i]=n[i];return e}function Fh(n){function e(t,r,s,i){let a=t[i++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),l=i>=t.length;return a=!a&&S.isArray(s)?s.length:a,l?(S.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!c):((!s[a]||!S.isObject(s[a]))&&(s[a]=[]),e(t,r,s[a],i)&&S.isArray(s[a])&&(s[a]=Fg(s[a])),!c)}if(S.isFormData(n)&&S.isFunction(n.entries)){const t={};return S.forEachEntry(n,(r,s)=>{e(Ug(r),s,t,0)}),t}return null}function Bg(n,e,t){if(S.isString(n))try{return(e||JSON.parse)(n),S.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Yr={transitional:Uh,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,i=S.isObject(e);if(i&&S.isHTMLForm(e)&&(e=new FormData(e)),S.isFormData(e))return s?JSON.stringify(Fh(e)):e;if(S.isArrayBuffer(e)||S.isBuffer(e)||S.isStream(e)||S.isFile(e)||S.isBlob(e)||S.isReadableStream(e))return e;if(S.isArrayBufferView(e))return e.buffer;if(S.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return xg(e,this.formSerializer).toString();if((c=S.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ii(c?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),Bg(e)):e}],transformResponse:[function(e){const t=this.transitional||Yr.transitional,r=t&&t.forcedJSONParsing,s=this.responseType==="json";if(S.isResponse(e)||S.isReadableStream(e))return e;if(e&&S.isString(e)&&(r&&!this.responseType||s)){const a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(a)throw c.name==="SyntaxError"?H.from(c,H.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Se.classes.FormData,Blob:Se.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],n=>{Yr.headers[n]={}});const qg=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jg=n=>{const e={};let t,r,s;return n&&n.split(`
`).forEach(function(a){s=a.indexOf(":"),t=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!t||e[t]&&qg[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Au=Symbol("internals");function br(n){return n&&String(n).trim().toLowerCase()}function xs(n){return n===!1||n==null?n:S.isArray(n)?n.map(xs):String(n)}function $g(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const zg=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Eo(n,e,t,r,s){if(S.isFunction(r))return r.call(this,e,t);if(s&&(e=t),!!S.isString(e)){if(S.isString(r))return e.indexOf(r)!==-1;if(S.isRegExp(r))return r.test(e)}}function Hg(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function Wg(n,e){const t=S.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}let xe=class{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function i(c,l,h){const f=br(l);if(!f)throw new Error("header name must be a non-empty string");const m=S.findKey(s,f);(!m||s[m]===void 0||h===!0||h===void 0&&s[m]!==!1)&&(s[m||l]=xs(c))}const a=(c,l)=>S.forEach(c,(h,f)=>i(h,f,l));if(S.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(S.isString(e)&&(e=e.trim())&&!zg(e))a(jg(e),t);else if(S.isObject(e)&&S.isIterable(e)){let c={},l,h;for(const f of e){if(!S.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[h=f[0]]=(l=c[h])?S.isArray(l)?[...l,f[1]]:[l,f[1]]:f[1]}a(c,t)}else e!=null&&i(t,e,r);return this}get(e,t){if(e=br(e),e){const r=S.findKey(this,e);if(r){const s=this[r];if(!t)return s;if(t===!0)return $g(s);if(S.isFunction(t))return t.call(this,s,r);if(S.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=br(e),e){const r=S.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Eo(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let s=!1;function i(a){if(a=br(a),a){const c=S.findKey(r,a);c&&(!t||Eo(r,r[c],c,t))&&(delete r[c],s=!0)}}return S.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const i=t[r];(!e||Eo(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const t=this,r={};return S.forEach(this,(s,i)=>{const a=S.findKey(r,i);if(a){t[a]=xs(s),delete t[i];return}const c=e?Hg(i):String(i).trim();c!==i&&delete t[i],t[c]=xs(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return S.forEach(this,(r,s)=>{r!=null&&r!==!1&&(t[s]=e&&S.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Au]=this[Au]={accessors:{}}).accessors,s=this.prototype;function i(a){const c=br(a);r[c]||(Wg(s,a),r[c]=!0)}return S.isArray(e)?e.forEach(i):i(e),this}};xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);S.reduceDescriptors(xe.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});S.freezeMethods(xe);function To(n,e){const t=this||Yr,r=e||t,s=xe.from(r.headers);let i=r.data;return S.forEach(n,function(c){i=c.call(t,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Bh(n){return!!(n&&n.__CANCEL__)}function nr(n,e,t){H.call(this,n??"canceled",H.ERR_CANCELED,e,t),this.name="CanceledError"}S.inherits(nr,H,{__CANCEL__:!0});function qh(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new H("Request failed with status code "+t.status,[H.ERR_BAD_REQUEST,H.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Gg(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Kg(n,e){n=n||10;const t=new Array(n),r=new Array(n);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(l){const h=Date.now(),f=r[i];a||(a=h),t[s]=l,r[s]=h;let m=i,E=0;for(;m!==s;)E+=t[m++],m=m%n;if(s=(s+1)%n,s===i&&(i=(i+1)%n),h-a<e)return;const C=f&&h-f;return C?Math.round(E*1e3/C):void 0}}function Qg(n,e){let t=0,r=1e3/e,s,i;const a=(h,f=Date.now())=>{t=f,s=null,i&&(clearTimeout(i),i=null),n(...h)};return[(...h)=>{const f=Date.now(),m=f-t;m>=r?a(h,f):(s=h,i||(i=setTimeout(()=>{i=null,a(s)},r-m)))},()=>s&&a(s)]}const Qs=(n,e,t=3)=>{let r=0;const s=Kg(50,250);return Qg(i=>{const a=i.loaded,c=i.lengthComputable?i.total:void 0,l=a-r,h=s(l),f=a<=c;r=a;const m={loaded:a,total:c,progress:c?a/c:void 0,bytes:l,rate:h||void 0,estimated:h&&c&&f?(c-a)/h:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(m)},t)},Ru=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},bu=n=>(...e)=>S.asap(()=>n(...e)),Xg=Se.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Se.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Se.origin),Se.navigator&&/(msie|trident)/i.test(Se.navigator.userAgent)):()=>!0,Jg=Se.hasStandardBrowserEnv?{write(n,e,t,r,s,i,a){if(typeof document>"u")return;const c=[`${n}=${encodeURIComponent(e)}`];S.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),S.isString(r)&&c.push(`path=${r}`),S.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),S.isString(a)&&c.push(`SameSite=${a}`),document.cookie=c.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Yg(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Zg(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function jh(n,e,t){let r=!Yg(e);return n&&(r||t==!1)?Zg(n,e):e}const Su=n=>n instanceof xe?{...n}:n;function gn(n,e){e=e||{};const t={};function r(h,f,m,E){return S.isPlainObject(h)&&S.isPlainObject(f)?S.merge.call({caseless:E},h,f):S.isPlainObject(f)?S.merge({},f):S.isArray(f)?f.slice():f}function s(h,f,m,E){if(S.isUndefined(f)){if(!S.isUndefined(h))return r(void 0,h,m,E)}else return r(h,f,m,E)}function i(h,f){if(!S.isUndefined(f))return r(void 0,f)}function a(h,f){if(S.isUndefined(f)){if(!S.isUndefined(h))return r(void 0,h)}else return r(void 0,f)}function c(h,f,m){if(m in e)return r(h,f);if(m in n)return r(void 0,h)}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(h,f,m)=>s(Su(h),Su(f),m,!0)};return S.forEach(Object.keys({...n,...e}),function(f){const m=l[f]||s,E=m(n[f],e[f],f);S.isUndefined(E)&&m!==c||(t[f]=E)}),t}const $h=n=>{const e=gn({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:c}=e;if(e.headers=a=xe.from(a),e.url=xh(jh(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),S.isFormData(t)){if(Se.hasStandardBrowserEnv||Se.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(S.isFunction(t.getHeaders)){const l=t.getHeaders(),h=["content-type","content-length"];Object.entries(l).forEach(([f,m])=>{h.includes(f.toLowerCase())&&a.set(f,m)})}}if(Se.hasStandardBrowserEnv&&(r&&S.isFunction(r)&&(r=r(e)),r||r!==!1&&Xg(e.url))){const l=s&&i&&Jg.read(i);l&&a.set(s,l)}return e},e_=typeof XMLHttpRequest<"u",t_=e_&&function(n){return new Promise(function(t,r){const s=$h(n);let i=s.data;const a=xe.from(s.headers).normalize();let{responseType:c,onUploadProgress:l,onDownloadProgress:h}=s,f,m,E,C,v;function k(){C&&C(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function M(){if(!b)return;const L=xe.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),J={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:L,config:n,request:b};qh(function(T){t(T),k()},function(T){r(T),k()},J),b=null}"onloadend"in b?b.onloadend=M:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(M)},b.onabort=function(){b&&(r(new H("Request aborted",H.ECONNABORTED,n,b)),b=null)},b.onerror=function(j){const J=j&&j.message?j.message:"Network Error",Y=new H(J,H.ERR_NETWORK,n,b);Y.event=j||null,r(Y),b=null},b.ontimeout=function(){let j=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const J=s.transitional||Uh;s.timeoutErrorMessage&&(j=s.timeoutErrorMessage),r(new H(j,J.clarifyTimeoutError?H.ETIMEDOUT:H.ECONNABORTED,n,b)),b=null},i===void 0&&a.setContentType(null),"setRequestHeader"in b&&S.forEach(a.toJSON(),function(j,J){b.setRequestHeader(J,j)}),S.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),c&&c!=="json"&&(b.responseType=s.responseType),h&&([E,v]=Qs(h,!0),b.addEventListener("progress",E)),l&&b.upload&&([m,C]=Qs(l),b.upload.addEventListener("progress",m),b.upload.addEventListener("loadend",C)),(s.cancelToken||s.signal)&&(f=L=>{b&&(r(!L||L.type?new nr(null,n,b):L),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const U=Gg(s.url);if(U&&Se.protocols.indexOf(U)===-1){r(new H("Unsupported protocol "+U+":",H.ERR_BAD_REQUEST,n));return}b.send(i||null)})},n_=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,s;const i=function(h){if(!s){s=!0,c();const f=h instanceof Error?h:this.reason;r.abort(f instanceof H?f:new nr(f instanceof Error?f.message:f))}};let a=e&&setTimeout(()=>{a=null,i(new H(`timeout ${e} of ms exceeded`,H.ETIMEDOUT))},e);const c=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),n=null)};n.forEach(h=>h.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>S.asap(c),l}},r_=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,s;for(;r<t;)s=r+e,yield n.slice(r,s),r=s},s_=async function*(n,e){for await(const t of i_(n))yield*r_(t,e)},i_=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},Pu=(n,e,t,r)=>{const s=s_(n,e);let i=0,a,c=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:h,value:f}=await s.next();if(h){c(),l.close();return}let m=f.byteLength;if(t){let E=i+=m;t(E)}l.enqueue(new Uint8Array(f))}catch(h){throw c(h),h}},cancel(l){return c(l),s.return()}},{highWaterMark:2})},Cu=64*1024,{isFunction:As}=S,o_=(({Request:n,Response:e})=>({Request:n,Response:e}))(S.global),{ReadableStream:ku,TextEncoder:Nu}=S.global,Ou=(n,...e)=>{try{return!!n(...e)}catch{return!1}},a_=n=>{n=S.merge.call({skipUndefined:!0},o_,n);const{fetch:e,Request:t,Response:r}=n,s=e?As(e):typeof fetch=="function",i=As(t),a=As(r);if(!s)return!1;const c=s&&As(ku),l=s&&(typeof Nu=="function"?(v=>k=>v.encode(k))(new Nu):async v=>new Uint8Array(await new t(v).arrayBuffer())),h=i&&c&&Ou(()=>{let v=!1;const k=new t(Se.origin,{body:new ku,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!k}),f=a&&c&&Ou(()=>S.isReadableStream(new r("").body)),m={stream:f&&(v=>v.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!m[v]&&(m[v]=(k,b)=>{let M=k&&k[v];if(M)return M.call(k);throw new H(`Response type '${v}' is not supported`,H.ERR_NOT_SUPPORT,b)})});const E=async v=>{if(v==null)return 0;if(S.isBlob(v))return v.size;if(S.isSpecCompliantForm(v))return(await new t(Se.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(S.isArrayBufferView(v)||S.isArrayBuffer(v))return v.byteLength;if(S.isURLSearchParams(v)&&(v=v+""),S.isString(v))return(await l(v)).byteLength},C=async(v,k)=>{const b=S.toFiniteNumber(v.getContentLength());return b??E(k)};return async v=>{let{url:k,method:b,data:M,signal:U,cancelToken:L,timeout:j,onDownloadProgress:J,onUploadProgress:Y,responseType:T,headers:g,withCredentials:y="same-origin",fetchOptions:I}=$h(v),w=e||fetch;T=T?(T+"").toLowerCase():"text";let A=n_([U,L&&L.toAbortSignal()],j),_=null;const ce=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let tt;try{if(Y&&h&&b!=="get"&&b!=="head"&&(tt=await C(g,M))!==0){let Qe=new t(k,{method:"POST",body:M,duplex:"half"}),pt;if(S.isFormData(M)&&(pt=Qe.headers.get("content-type"))&&g.setContentType(pt),Qe.body){const[kn,mt]=Ru(tt,Qs(bu(Y)));M=Pu(Qe.body,Cu,kn,mt)}}S.isString(y)||(y=y?"include":"omit");const $e=i&&"credentials"in t.prototype,hs={...I,signal:A,method:b.toUpperCase(),headers:g.normalize().toJSON(),body:M,duplex:"half",credentials:$e?y:void 0};_=i&&new t(k,hs);let Fe=await(i?w(_,I):w(k,hs));const tn=f&&(T==="stream"||T==="response");if(f&&(J||tn&&ce)){const Qe={};["status","statusText","headers"].forEach(Nn=>{Qe[Nn]=Fe[Nn]});const pt=S.toFiniteNumber(Fe.headers.get("content-length")),[kn,mt]=J&&Ru(pt,Qs(bu(J),!0))||[];Fe=new r(Pu(Fe.body,Cu,kn,()=>{mt&&mt(),ce&&ce()}),Qe)}T=T||"text";let Ki=await m[S.findKey(m,T)||"text"](Fe,v);return!tn&&ce&&ce(),await new Promise((Qe,pt)=>{qh(Qe,pt,{data:Ki,headers:xe.from(Fe.headers),status:Fe.status,statusText:Fe.statusText,config:v,request:_})})}catch($e){throw ce&&ce(),$e&&$e.name==="TypeError"&&/Load failed|fetch/i.test($e.message)?Object.assign(new H("Network Error",H.ERR_NETWORK,v,_),{cause:$e.cause||$e}):H.from($e,$e&&$e.code,v,_)}}},c_=new Map,zh=n=>{let e=n&&n.env||{};const{fetch:t,Request:r,Response:s}=e,i=[r,s,t];let a=i.length,c=a,l,h,f=c_;for(;c--;)l=i[c],h=f.get(l),h===void 0&&f.set(l,h=c?new Map:a_(e)),f=h;return h};zh();const Ta={http:Rg,xhr:t_,fetch:{get:zh}};S.forEach(Ta,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Du=n=>`- ${n}`,u_=n=>S.isFunction(n)||n===null||n===!1;function l_(n,e){n=S.isArray(n)?n:[n];const{length:t}=n;let r,s;const i={};for(let a=0;a<t;a++){r=n[a];let c;if(s=r,!u_(r)&&(s=Ta[(c=String(r)).toLowerCase()],s===void 0))throw new H(`Unknown adapter '${c}'`);if(s&&(S.isFunction(s)||(s=s.get(e))))break;i[c||"#"+a]=s}if(!s){const a=Object.entries(i).map(([l,h])=>`adapter ${l} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=t?a.length>1?`since :
`+a.map(Du).join(`
`):" "+Du(a[0]):"as no adapter specified";throw new H("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Hh={getAdapter:l_,adapters:Ta};function wo(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new nr(null,n)}function Vu(n){return wo(n),n.headers=xe.from(n.headers),n.data=To.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Hh.getAdapter(n.adapter||Yr.adapter,n)(n).then(function(r){return wo(n),r.data=To.call(n,n.transformResponse,r),r.headers=xe.from(r.headers),r},function(r){return Bh(r)||(wo(n),r&&r.response&&(r.response.data=To.call(n,n.transformResponse,r.response),r.response.headers=xe.from(r.response.headers))),Promise.reject(r)})}const Wh="1.13.2",vi={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{vi[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Lu={};vi.transitional=function(e,t,r){function s(i,a){return"[Axios v"+Wh+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,c)=>{if(e===!1)throw new H(s(a," has been removed"+(t?" in "+t:"")),H.ERR_DEPRECATED);return t&&!Lu[a]&&(Lu[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,a,c):!0}};vi.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function h_(n,e,t){if(typeof n!="object")throw new H("options must be an object",H.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const c=n[i],l=c===void 0||a(c,i,n);if(l!==!0)throw new H("option "+i+" must be "+l,H.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new H("Unknown option "+i,H.ERR_BAD_OPTION)}}const Us={assertOptions:h_,validators:vi},st=Us.validators;let pn=class{constructor(e){this.defaults=e||{},this.interceptors={request:new vu,response:new vu}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=gn(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:i}=t;r!==void 0&&Us.assertOptions(r,{silentJSONParsing:st.transitional(st.boolean),forcedJSONParsing:st.transitional(st.boolean),clarifyTimeoutError:st.transitional(st.boolean)},!1),s!=null&&(S.isFunction(s)?t.paramsSerializer={serialize:s}:Us.assertOptions(s,{encode:st.function,serialize:st.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Us.assertOptions(t,{baseUrl:st.spelling("baseURL"),withXsrfToken:st.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&S.merge(i.common,i[t.method]);i&&S.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),t.headers=xe.concat(a,i);const c=[];let l=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(l=l&&k.synchronous,c.unshift(k.fulfilled,k.rejected))});const h=[];this.interceptors.response.forEach(function(k){h.push(k.fulfilled,k.rejected)});let f,m=0,E;if(!l){const v=[Vu.bind(this),void 0];for(v.unshift(...c),v.push(...h),E=v.length,f=Promise.resolve(t);m<E;)f=f.then(v[m++],v[m++]);return f}E=c.length;let C=t;for(;m<E;){const v=c[m++],k=c[m++];try{C=v(C)}catch(b){k.call(this,b);break}}try{f=Vu.call(this,C)}catch(v){return Promise.reject(v)}for(m=0,E=h.length;m<E;)f=f.then(h[m++],h[m++]);return f}getUri(e){e=gn(this.defaults,e);const t=jh(e.baseURL,e.url,e.allowAbsoluteUrls);return xh(t,e.params,e.paramsSerializer)}};S.forEach(["delete","get","head","options"],function(e){pn.prototype[e]=function(t,r){return this.request(gn(r||{},{method:e,url:t,data:(r||{}).data}))}});S.forEach(["post","put","patch"],function(e){function t(r){return function(i,a,c){return this.request(gn(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}pn.prototype[e]=t(),pn.prototype[e+"Form"]=t(!0)});let d_=class Gh{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(c=>{r.subscribe(c),i=c}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,c){r.reason||(r.reason=new nr(i,a,c),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Gh(function(s){e=s}),cancel:e}}};function f_(n){return function(t){return n.apply(null,t)}}function p_(n){return S.isObject(n)&&n.isAxiosError===!0}const $o={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries($o).forEach(([n,e])=>{$o[e]=n});function Kh(n){const e=new pn(n),t=Rh(pn.prototype.request,e);return S.extend(t,pn.prototype,e,{allOwnKeys:!0}),S.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Kh(gn(n,s))},t}const he=Kh(Yr);he.Axios=pn;he.CanceledError=nr;he.CancelToken=d_;he.isCancel=Bh;he.VERSION=Wh;he.toFormData=Ii;he.AxiosError=H;he.Cancel=he.CanceledError;he.all=function(e){return Promise.all(e)};he.spread=f_;he.isAxiosError=p_;he.mergeConfig=gn;he.AxiosHeaders=xe;he.formToJSON=n=>Fh(S.isHTMLForm(n)?new FormData(n):n);he.getAdapter=Hh.getAdapter;he.HttpStatusCode=$o;he.default=he;const{Axios:FS,AxiosError:BS,CanceledError:qS,isCancel:jS,CancelToken:$S,VERSION:zS,all:HS,Cancel:WS,isAxiosError:GS,spread:KS,toFormData:QS,AxiosHeaders:XS,HttpStatusCode:JS,formToJSON:YS,getAdapter:ZS,mergeConfig:eP}=he;window.axios=he;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const m_=()=>{};var Mu={};const Qh=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},g_=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],a=n[t++],c=n[t++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Xh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,c=a?n[s+1]:0,l=s+2<n.length,h=l?n[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let E=(c&15)<<2|h>>6,C=h&63;l||(C=64,a||(E=64)),r.push(t[f],t[m],t[E],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Qh(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):g_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const m=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||c==null||h==null||m==null)throw new __;const E=i<<2|c>>4;if(r.push(E),h!==64){const C=c<<4&240|h>>2;if(r.push(C),m!==64){const v=h<<6&192|m;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class __ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y_=function(n){const e=Qh(n);return Xh.encodeByteArray(e,!0)},Xs=function(n){return y_(n).replace(/\./g,"")},Jh=function(n){try{return Xh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function E_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const T_=()=>E_().__FIREBASE_DEFAULTS__,w_=()=>{if(typeof process>"u"||typeof Mu>"u")return;const n=Mu.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},I_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Jh(n[1]);return e&&JSON.parse(e)},Ai=()=>{try{return m_()||T_()||w_()||I_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yh=n=>Ai()?.emulatorHosts?.[n],Zh=n=>{const e=Yh(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ed=()=>Ai()?.config,td=n=>Ai()?.[`_${n}`];class v_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Jt(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wa(n){return(await fetch(n,{credentials:"include"})).ok}function nd(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Xs(JSON.stringify(t)),Xs(JSON.stringify(a)),""].join(".")}const Dr={};function A_(){const n={prod:[],emulator:[]};for(const e of Object.keys(Dr))Dr[e]?n.emulator.push(e):n.prod.push(e);return n}function R_(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let xu=!1;function Ia(n,e){if(typeof window>"u"||typeof document>"u"||!Jt(window.location.host)||Dr[n]===e||Dr[n]||xu)return;Dr[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",i=A_().prod.length>0;function a(){const E=document.getElementById(r);E&&E.remove()}function c(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function l(E,C){E.setAttribute("width","24"),E.setAttribute("id",C),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function h(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{xu=!0,a()},E}function f(E,C){E.setAttribute("id",C),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function m(){const E=R_(r),C=t("text"),v=document.getElementById(C)||document.createElement("span"),k=t("learnmore"),b=document.getElementById(k)||document.createElement("a"),M=t("preprendIcon"),U=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const L=E.element;c(L),f(b,k);const j=h();l(U,M),L.append(U,v,b,j),document.body.appendChild(L)}i?(v.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Pe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function S_(){const n=Ai()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rd(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function C_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k_(){const n=Pe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function N_(){return!S_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sd(){try{return typeof indexedDB=="object"}catch{return!1}}function id(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function O_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const D_="FirebaseError";class Ke extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=D_,Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,An.prototype.create)}}class An{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?V_(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Ke(s,c,r)}}function V_(n,e){return n.replace(L_,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const L_=/\{\$([^}]+)}/g;function M_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zt(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],a=e[s];if(Uu(i)&&Uu(a)){if(!zt(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Uu(n){return n!==null&&typeof n=="object"}function Zr(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pr(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Cr(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function x_(n,e){const t=new U_(n,e);return t.subscribe.bind(t)}class U_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");F_(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Io),s.error===void 0&&(s.error=Io),s.complete===void 0&&(s.complete=Io);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F_(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Io(){}const B_=1e3,q_=2,j_=14400*1e3,$_=.5;function Fu(n,e=B_,t=q_){const r=e*Math.pow(t,n),s=Math.round($_*r*(Math.random()-.5)*2);return Math.min(j_,r+s)}function ie(n){return n&&n._delegate?n._delegate:n}class We{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cn="[DEFAULT]";class z_{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new v_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W_(e))try{this.getOrInitializeService({instanceIdentifier:cn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=cn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cn){return this.instances.has(e)}getOptions(e=cn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H_(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cn){return this.component?this.component.multipleInstances?e:cn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H_(n){return n===cn?void 0:n}function W_(n){return n.instantiationMode==="EAGER"}class G_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new z_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var G;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(G||(G={}));const K_={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},Q_=G.INFO,X_={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},J_=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=X_[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ri{constructor(e){this.name=e,this._logLevel=Q_,this._logHandler=J_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}}const Y_=(n,e)=>e.some(t=>n instanceof t);let Bu,qu;function Z_(){return Bu||(Bu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ey(){return qu||(qu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const od=new WeakMap,zo=new WeakMap,ad=new WeakMap,vo=new WeakMap,va=new WeakMap;function ty(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{t(Ft(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&od.set(t,n)}).catch(()=>{}),va.set(e,n),e}function ny(n){if(zo.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});zo.set(n,e)}let Ho={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zo.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ad.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ft(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ry(n){Ho=n(Ho)}function sy(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ao(this),e,...t);return ad.set(r,e.sort?e.sort():[e]),Ft(r)}:ey().includes(n)?function(...e){return n.apply(Ao(this),e),Ft(od.get(this))}:function(...e){return Ft(n.apply(Ao(this),e))}}function iy(n){return typeof n=="function"?sy(n):(n instanceof IDBTransaction&&ny(n),Y_(n,Z_())?new Proxy(n,Ho):n)}function Ft(n){if(n instanceof IDBRequest)return ty(n);if(vo.has(n))return vo.get(n);const e=iy(n);return e!==n&&(vo.set(n,e),va.set(e,n)),e}const Ao=n=>va.get(n);function cd(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,e),c=Ft(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Ft(a.result),l.oldVersion,l.newVersion,Ft(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const oy=["get","getKey","getAll","getAllKeys","count"],ay=["put","add","delete","clear"],Ro=new Map;function ju(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ro.get(e))return Ro.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=ay.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oy.includes(t)))return;const i=async function(a,...c){const l=this.transaction(a,s?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&l.done]))[0]};return Ro.set(e,i),i}ry(n=>({...n,get:(e,t,r)=>ju(e,t)||n.get(e,t,r),has:(e,t)=>!!ju(e,t)||n.has(e,t)}));class cy{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uy(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function uy(n){return n.getComponent()?.type==="VERSION"}const Wo="@firebase/app",$u="0.14.6";const vt=new Ri("@firebase/app"),ly="@firebase/app-compat",hy="@firebase/analytics-compat",dy="@firebase/analytics",fy="@firebase/app-check-compat",py="@firebase/app-check",my="@firebase/auth",gy="@firebase/auth-compat",_y="@firebase/database",yy="@firebase/data-connect",Ey="@firebase/database-compat",Ty="@firebase/functions",wy="@firebase/functions-compat",Iy="@firebase/installations",vy="@firebase/installations-compat",Ay="@firebase/messaging",Ry="@firebase/messaging-compat",by="@firebase/performance",Sy="@firebase/performance-compat",Py="@firebase/remote-config",Cy="@firebase/remote-config-compat",ky="@firebase/storage",Ny="@firebase/storage-compat",Oy="@firebase/firestore",Dy="@firebase/ai",Vy="@firebase/firestore-compat",Ly="firebase",My="12.6.0";const Go="[DEFAULT]",xy={[Wo]:"fire-core",[ly]:"fire-core-compat",[dy]:"fire-analytics",[hy]:"fire-analytics-compat",[py]:"fire-app-check",[fy]:"fire-app-check-compat",[my]:"fire-auth",[gy]:"fire-auth-compat",[_y]:"fire-rtdb",[yy]:"fire-data-connect",[Ey]:"fire-rtdb-compat",[Ty]:"fire-fn",[wy]:"fire-fn-compat",[Iy]:"fire-iid",[vy]:"fire-iid-compat",[Ay]:"fire-fcm",[Ry]:"fire-fcm-compat",[by]:"fire-perf",[Sy]:"fire-perf-compat",[Py]:"fire-rc",[Cy]:"fire-rc-compat",[ky]:"fire-gcs",[Ny]:"fire-gcs-compat",[Oy]:"fire-fst",[Vy]:"fire-fst-compat",[Dy]:"fire-vertex","fire-js":"fire-js",[Ly]:"fire-js-all"};const Js=new Map,Uy=new Map,Ko=new Map;function zu(n,e){try{n.container.addComponent(e)}catch(t){vt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ze(n){const e=n.name;if(Ko.has(e))return vt.debug(`There were multiple attempts to register component ${e}.`),!1;Ko.set(e,n);for(const t of Js.values())zu(t,n);for(const t of Uy.values())zu(t,n);return!0}function Yt(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Le(n){return n==null?!1:n.settings!==void 0}const Fy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bt=new An("app","Firebase",Fy);class By{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new We("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}const Rn=My;function ud(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Go,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Bt.create("bad-app-name",{appName:String(s)});if(t||(t=ed()),!t)throw Bt.create("no-options");const i=Js.get(s);if(i){if(zt(t,i.options)&&zt(r,i.config))return i;throw Bt.create("duplicate-app",{appName:s})}const a=new G_(s);for(const l of Ko.values())a.addComponent(l);const c=new By(t,r,a);return Js.set(s,c),c}function bi(n=Go){const e=Js.get(n);if(!e&&n===Go&&ed())return ud();if(!e)throw Bt.create("no-app",{appName:n});return e}function Ue(n,e,t){let r=xy[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vt.warn(a.join(" "));return}Ze(new We(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const qy="firebase-heartbeat-database",jy=1,Br="firebase-heartbeat-store";let bo=null;function ld(){return bo||(bo=cd(qy,jy,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Br)}catch(t){console.warn(t)}}}}).catch(n=>{throw Bt.create("idb-open",{originalErrorMessage:n.message})})),bo}async function $y(n){try{const t=(await ld()).transaction(Br),r=await t.objectStore(Br).get(hd(n));return await t.done,r}catch(e){if(e instanceof Ke)vt.warn(e.message);else{const t=Bt.create("idb-get",{originalErrorMessage:e?.message});vt.warn(t.message)}}}async function Hu(n,e){try{const r=(await ld()).transaction(Br,"readwrite");await r.objectStore(Br).put(e,hd(n)),await r.done}catch(t){if(t instanceof Ke)vt.warn(t.message);else{const r=Bt.create("idb-set",{originalErrorMessage:t?.message});vt.warn(r.message)}}}function hd(n){return`${n.name}!${n.options.appId}`}const zy=1024,Hy=30;class Wy{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ky(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Wu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Hy){const s=Qy(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wu(),{heartbeatsToSend:t,unsentEntries:r}=Gy(this._heartbeatsCache.heartbeats),s=Xs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return vt.warn(e),""}}}function Wu(){return new Date().toISOString().substring(0,10)}function Gy(n,e=zy){const t=[];let r=n.slice();for(const s of n){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Gu(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Gu(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Ky{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sd()?id().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $y(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Gu(n){return Xs(JSON.stringify({version:2,heartbeats:n})).length}function Qy(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Xy(n){Ze(new We("platform-logger",e=>new cy(e),"PRIVATE")),Ze(new We("heartbeat",e=>new Wy(e),"PRIVATE")),Ue(Wo,$u,n),Ue(Wo,$u,"esm2020"),Ue("fire-js","")}Xy("");var Jy="firebase",Yy="12.6.0";Ue(Jy,Yy,"app");const dd="@firebase/installations",Aa="0.6.19";const fd=1e4,pd=`w:${Aa}`,md="FIS_v2",Zy="https://firebaseinstallations.googleapis.com/v1",eE=3600*1e3,tE="installations",nE="Installations";const rE={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_n=new An(tE,nE,rE);function gd(n){return n instanceof Ke&&n.code.includes("request-failed")}function _d({projectId:n}){return`${Zy}/projects/${n}/installations`}function yd(n){return{token:n.token,requestStatus:2,expiresIn:iE(n.expiresIn),creationTime:Date.now()}}async function Ed(n,e){const r=(await e.json()).error;return _n.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Td({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function sE(n,{refreshToken:e}){const t=Td(n);return t.append("Authorization",oE(e)),t}async function wd(n){const e=await n();return e.status>=500&&e.status<600?n():e}function iE(n){return Number(n.replace("s","000"))}function oE(n){return`${md} ${n}`}async function aE({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=_d(n),s=Td(n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={fid:t,authVersion:md,appId:n.appId,sdkVersion:pd},c={method:"POST",headers:s,body:JSON.stringify(a)},l=await wd(()=>fetch(r,c));if(l.ok){const h=await l.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:yd(h.authToken)}}else throw await Ed("Create Installation",l)}function Id(n){return new Promise(e=>{setTimeout(e,n)})}function cE(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const uE=/^[cdef][\w-]{21}$/,Qo="";function lE(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=hE(n);return uE.test(t)?t:Qo}catch{return Qo}}function hE(n){return cE(n).substr(0,22)}function Si(n){return`${n.appName}!${n.appId}`}const vd=new Map;function Ad(n,e){const t=Si(n);Rd(t,e),dE(t,e)}function Rd(n,e){const t=vd.get(n);if(t)for(const r of t)r(e)}function dE(n,e){const t=fE();t&&t.postMessage({key:n,fid:e}),pE()}let hn=null;function fE(){return!hn&&"BroadcastChannel"in self&&(hn=new BroadcastChannel("[Firebase] FID Change"),hn.onmessage=n=>{Rd(n.data.key,n.data.fid)}),hn}function pE(){vd.size===0&&hn&&(hn.close(),hn=null)}const mE="firebase-installations-database",gE=1,yn="firebase-installations-store";let So=null;function Ra(){return So||(So=cd(mE,gE,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(yn)}}})),So}async function Ys(n,e){const t=Si(n),s=(await Ra()).transaction(yn,"readwrite"),i=s.objectStore(yn),a=await i.get(t);return await i.put(e,t),await s.done,(!a||a.fid!==e.fid)&&Ad(n,e.fid),e}async function bd(n){const e=Si(n),r=(await Ra()).transaction(yn,"readwrite");await r.objectStore(yn).delete(e),await r.done}async function Pi(n,e){const t=Si(n),s=(await Ra()).transaction(yn,"readwrite"),i=s.objectStore(yn),a=await i.get(t),c=e(a);return c===void 0?await i.delete(t):await i.put(c,t),await s.done,c&&(!a||a.fid!==c.fid)&&Ad(n,c.fid),c}async function ba(n){let e;const t=await Pi(n.appConfig,r=>{const s=_E(r),i=yE(n,s);return e=i.registrationPromise,i.installationEntry});return t.fid===Qo?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function _E(n){const e=n||{fid:lE(),registrationStatus:0};return Sd(e)}function yE(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(_n.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=EE(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:TE(n)}:{installationEntry:e}}async function EE(n,e){try{const t=await aE(n,e);return Ys(n.appConfig,t)}catch(t){throw gd(t)&&t.customData.serverCode===409?await bd(n.appConfig):await Ys(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function TE(n){let e=await Ku(n.appConfig);for(;e.registrationStatus===1;)await Id(100),e=await Ku(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await ba(n);return r||t}return e}function Ku(n){return Pi(n,e=>{if(!e)throw _n.create("installation-not-found");return Sd(e)})}function Sd(n){return wE(n)?{fid:n.fid,registrationStatus:0}:n}function wE(n){return n.registrationStatus===1&&n.registrationTime+fd<Date.now()}async function IE({appConfig:n,heartbeatServiceProvider:e},t){const r=vE(n,t),s=sE(n,t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={installation:{sdkVersion:pd,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},l=await wd(()=>fetch(r,c));if(l.ok){const h=await l.json();return yd(h)}else throw await Ed("Generate Auth Token",l)}function vE(n,{fid:e}){return`${_d(n)}/${e}/authTokens:generate`}async function Sa(n,e=!1){let t;const r=await Pi(n.appConfig,i=>{if(!Pd(i))throw _n.create("not-registered");const a=i.authToken;if(!e&&bE(a))return i;if(a.requestStatus===1)return t=AE(n,e),i;{if(!navigator.onLine)throw _n.create("app-offline");const c=PE(i);return t=RE(n,c),c}});return t?await t:r.authToken}async function AE(n,e){let t=await Qu(n.appConfig);for(;t.authToken.requestStatus===1;)await Id(100),t=await Qu(n.appConfig);const r=t.authToken;return r.requestStatus===0?Sa(n,e):r}function Qu(n){return Pi(n,e=>{if(!Pd(e))throw _n.create("not-registered");const t=e.authToken;return CE(t)?{...e,authToken:{requestStatus:0}}:e})}async function RE(n,e){try{const t=await IE(n,e),r={...e,authToken:t};return await Ys(n.appConfig,r),t}catch(t){if(gd(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await bd(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ys(n.appConfig,r)}throw t}}function Pd(n){return n!==void 0&&n.registrationStatus===2}function bE(n){return n.requestStatus===2&&!SE(n)}function SE(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+eE}function PE(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function CE(n){return n.requestStatus===1&&n.requestTime+fd<Date.now()}async function kE(n){const e=n,{installationEntry:t,registrationPromise:r}=await ba(e);return r?r.catch(console.error):Sa(e).catch(console.error),t.fid}async function NE(n,e=!1){const t=n;return await OE(t),(await Sa(t,e)).token}async function OE(n){const{registrationPromise:e}=await ba(n);e&&await e}function DE(n){if(!n||!n.options)throw Po("App Configuration");if(!n.name)throw Po("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Po(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Po(n){return _n.create("missing-app-config-values",{valueName:n})}const Cd="installations",VE="installations-internal",LE=n=>{const e=n.getProvider("app").getImmediate(),t=DE(e),r=Yt(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ME=n=>{const e=n.getProvider("app").getImmediate(),t=Yt(e,Cd).getImmediate();return{getId:()=>kE(t),getToken:s=>NE(t,s)}};function xE(){Ze(new We(Cd,LE,"PUBLIC")),Ze(new We(VE,ME,"PRIVATE"))}xE();Ue(dd,Aa);Ue(dd,Aa,"esm2020");const Zs="analytics",UE="firebase_id",FE="origin",BE=60*1e3,qE="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pa="https://www.googletagmanager.com/gtag/js";const Oe=new Ri("@firebase/analytics");const jE={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},je=new An("analytics","Analytics",jE);function $E(n){if(!n.startsWith(Pa)){const e=je.create("invalid-gtag-resource",{gtagURL:n});return Oe.warn(e.message),""}return n}function kd(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function zE(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function HE(n,e){const t=zE("firebase-js-sdk-policy",{createScriptURL:$E}),r=document.createElement("script"),s=`${Pa}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function WE(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function GE(n,e,t,r,s,i){const a=r[s];try{if(a)await e[a];else{const l=(await kd(t)).find(h=>h.measurementId===s);l&&await e[l.appId]}}catch(c){Oe.error(c)}n("config",s,i)}async function KE(n,e,t,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await kd(t);for(const l of a){const h=c.find(m=>m.measurementId===l),f=h&&e[h.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",r,s||{})}catch(i){Oe.error(i)}}function QE(n,e,t,r){async function s(i,...a){try{if(i==="event"){const[c,l]=a;await KE(n,e,t,c,l)}else if(i==="config"){const[c,l]=a;await GE(n,e,t,r,c,l)}else if(i==="consent"){const[c,l]=a;n("consent",c,l)}else if(i==="get"){const[c,l,h]=a;n("get",c,l,h)}else if(i==="set"){const[c]=a;n("set",c)}else n(i,...a)}catch(c){Oe.error(c)}}return s}function XE(n,e,t,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=QE(i,n,e,t),{gtagCore:i,wrappedGtag:window[s]}}function JE(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Pa)&&t.src.includes(n))return t;return null}const YE=30,ZE=1e3;class eT{constructor(e={},t=ZE){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Nd=new eT;function tT(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function nT(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:tT(t)},s=qE.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const c=await i.json();c.error?.message&&(a=c.error.message)}catch{}throw je.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function rT(n,e=Nd,t){const{appId:r,apiKey:s,measurementId:i}=n.options;if(!r)throw je.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw je.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new oT;return setTimeout(async()=>{c.abort()},BE),Od({appId:r,apiKey:s,measurementId:i},a,c,e)}async function Od(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=Nd){const{appId:i,measurementId:a}=n;try{await sT(r,e)}catch(c){if(a)return Oe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:a};throw c}try{const c=await nT(n);return s.deleteThrottleMetadata(i),c}catch(c){const l=c;if(!iT(l)){if(s.deleteThrottleMetadata(i),a)return Oe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:a};throw c}const h=Number(l?.customData?.httpStatus)===503?Fu(t,s.intervalMillis,YE):Fu(t,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return s.setThrottleMetadata(i,f),Oe.debug(`Calling attemptFetch again in ${h} millis`),Od(n,f,r,s)}}function sT(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(i),r(je.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function iT(n){if(!(n instanceof Ke)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class oT{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function aT(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const i=await e,a={...r,send_to:i};n("event",t,a)}}async function cT(n,e,t,r){if(r&&r.global){const s={};for(const i of Object.keys(t))s[`user_properties.${i}`]=t[i];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:t})}}async function uT(){if(sd())try{await id()}catch(n){return Oe.warn(je.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Oe.warn(je.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lT(n,e,t,r,s,i,a){const c=rT(n);c.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&Oe.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>Oe.error(E)),e.push(c);const l=uT().then(E=>{if(E)return r.getId()}),[h,f]=await Promise.all([c,l]);JE(i)||HE(i,h.measurementId),s("js",new Date);const m=a?.config??{};return m[FE]="firebase",m.update=!0,f!=null&&(m[UE]=f),s("config",h.measurementId,m),h.measurementId}class hT{constructor(e){this.app=e}_delete(){return delete Bn[this.app.options.appId],Promise.resolve()}}let Bn={},Xu=[];const Ju={};let Co="dataLayer",dT="gtag",Yu,Ca,Zu=!1;function fT(){const n=[];if(rd()&&n.push("This is a browser extension environment."),O_()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=je.create("invalid-analytics-context",{errorInfo:e});Oe.warn(t.message)}}function pT(n,e,t){fT();const r=n.options.appId;if(!r)throw je.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Oe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw je.create("no-api-key");if(Bn[r]!=null)throw je.create("already-exists",{id:r});if(!Zu){WE(Co);const{wrappedGtag:i,gtagCore:a}=XE(Bn,Xu,Ju,Co,dT);Ca=i,Yu=a,Zu=!0}return Bn[r]=lT(n,Xu,Ju,e,Yu,Co,t),new hT(n)}function mT(n=bi()){n=ie(n);const e=Yt(n,Zs);return e.isInitialized()?e.getImmediate():gT(n)}function gT(n,e={}){const t=Yt(n,Zs);if(t.isInitialized()){const s=t.getImmediate();if(zt(e,t.getOptions()))return s;throw je.create("already-initialized")}return t.initialize({options:e})}function _T(n,e,t){n=ie(n),cT(Ca,Bn[n.app.options.appId],e,t).catch(r=>Oe.error(r))}function yT(n,e,t,r){n=ie(n),aT(Ca,Bn[n.app.options.appId],e,t,r).catch(s=>Oe.error(s))}const el="@firebase/analytics",tl="0.10.19";function ET(){Ze(new We(Zs,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return pT(r,s,t)},"PUBLIC")),Ze(new We("analytics-internal",n,"PRIVATE")),Ue(el,tl),Ue(el,tl,"esm2020");function n(e){try{const t=e.getProvider(Zs).getImmediate();return{logEvent:(r,s,i)=>yT(t,r,s,i),setUserProperties:(r,s)=>_T(t,r,s)}}catch(t){throw je.create("interop-component-reg-failed",{reason:t})}}}ET();function Dd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TT=Dd,Vd=new An("auth","Firebase",Dd());const ei=new Ri("@firebase/auth");function wT(n,...e){ei.logLevel<=G.WARN&&ei.warn(`Auth (${Rn}): ${n}`,...e)}function Fs(n,...e){ei.logLevel<=G.ERROR&&ei.error(`Auth (${Rn}): ${n}`,...e)}function Ge(n,...e){throw Na(n,...e)}function Ye(n,...e){return Na(n,...e)}function ka(n,e,t){const r={...TT(),[e]:t};return new An("auth","Firebase",r).create(e,{appName:n.name})}function Tt(n){return ka(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IT(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ge(n,"argument-error"),ka(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Na(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Vd.create(n,...e)}function B(n,e,...t){if(!n)throw Na(e,...t)}function yt(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fs(e),new Error(e)}function At(n,e){n||yt(e)}function Xo(){return typeof self<"u"&&self.location?.href||""}function vT(){return nl()==="http:"||nl()==="https:"}function nl(){return typeof self<"u"&&self.location?.protocol||null}function AT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vT()||rd()||"connection"in navigator)?navigator.onLine:!0}function RT(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class es{constructor(e,t){this.shortDelay=e,this.longDelay=t,At(t>e,"Short delay should be less than long delay!"),this.isMobile=b_()||C_()}get(){return AT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Oa(n,e){At(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Ld{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ST=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PT=new es(3e4,6e4);function Zt(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function St(n,e,t,r,s={}){return Md(n,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Zr({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:l,...i};return P_()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Jt(n.emulatorConfig.host)&&(h.credentials="include"),Ld.fetch()(await xd(n,n.config.apiHost,t,c),h)})}async function Md(n,e,t){n._canInitEmulator=!1;const r={...bT,...e};try{const s=new kT(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Rs(n,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rs(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Rs(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Rs(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ka(n,f,h);Ge(n,f)}}catch(s){if(s instanceof Ke)throw s;Ge(n,"network-request-failed",{message:String(s)})}}async function ts(n,e,t,r,s={}){const i=await St(n,e,t,r,s);return"mfaPendingCredential"in i&&Ge(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function xd(n,e,t,r){const s=`${e}${t}?${r}`,i=n,a=i.config.emulator?Oa(n.config,s):`${n.config.apiScheme}://${s}`;return ST.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function CT(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ye(this.auth,"network-request-failed")),PT.get())})}}function Rs(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ye(n,e,r);return s.customData._tokenResponse=t,s}function rl(n){return n!==void 0&&n.enterprise!==void 0}class NT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return CT(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OT(n,e){return St(n,"GET","/v2/recaptchaConfig",Zt(n,e))}async function DT(n,e){return St(n,"POST","/v1/accounts:delete",e)}async function ti(n,e){return St(n,"POST","/v1/accounts:lookup",e)}function Vr(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VT(n,e=!1){const t=ie(n),r=await t.getIdToken(e),s=Da(r);B(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:r,authTime:Vr(ko(s.auth_time)),issuedAtTime:Vr(ko(s.iat)),expirationTime:Vr(ko(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function ko(n){return Number(n)*1e3}function Da(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fs("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jh(t);return s?JSON.parse(s):(Fs("Failed to decode base64 JWT payload"),null)}catch(s){return Fs("Caught error parsing JWT payload as JSON",s?.toString()),null}}function sl(n){const e=Da(n);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Kn(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ke&&LT(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function LT({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class MT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jo{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ni(n){const e=n.auth,t=await n.getIdToken(),r=await Kn(n,ti(e,{idToken:t}));B(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?Ud(s.providerUserInfo):[],a=UT(n.providerData,i),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jo(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function xT(n){const e=ie(n);await ni(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UT(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ud(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function FT(n,e){const t=await Md(n,{},async()=>{const r=Zr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,a=await xd(n,s,"/v1/token",`key=${i}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return n.emulatorConfig&&Jt(n.emulatorConfig.host)&&(l.credentials="include"),Ld.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BT(n,e){return St(n,"POST","/v2/accounts:revokeToken",Zt(n,e))}class qn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){B(e.length!==0,"internal-error");const t=sl(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await FT(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,a=new qn;return r&&(B(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(B(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(B(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qn,this.toJSON())}_performRefresh(){return yt("not implemented")}}function Vt(n,e){B(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xe{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new MT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jo(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Kn(this,this.stsTokenManager.getToken(this.auth,e));return B(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VT(this,e)}reload(){return xT(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xe({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ni(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Le(this.auth.app))return Promise.reject(Tt(this.auth));const e=await this.getIdToken();return await Kn(this,DT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,a=t.photoURL??void 0,c=t.tenantId??void 0,l=t._redirectEventId??void 0,h=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:m,emailVerified:E,isAnonymous:C,providerData:v,stsTokenManager:k}=t;B(m&&k,e,"internal-error");const b=qn.fromJSON(this.name,k);B(typeof m=="string",e,"internal-error"),Vt(r,e.name),Vt(s,e.name),B(typeof E=="boolean",e,"internal-error"),B(typeof C=="boolean",e,"internal-error"),Vt(i,e.name),Vt(a,e.name),Vt(c,e.name),Vt(l,e.name),Vt(h,e.name),Vt(f,e.name);const M=new Xe({uid:m,auth:e,email:s,emailVerified:E,displayName:r,isAnonymous:C,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:b,createdAt:h,lastLoginAt:f});return v&&Array.isArray(v)&&(M.providerData=v.map(U=>({...U}))),l&&(M._redirectEventId=l),M}static async _fromIdTokenResponse(e,t,r=!1){const s=new qn;s.updateFromServerResponse(t);const i=new Xe({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ni(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];B(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ud(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!i?.length,c=new qn;c.updateFromIdToken(r);const l=new Xe({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Jo(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,h),l}}const il=new Map;function Et(n){At(n instanceof Function,"Expected a class definition");let e=il.get(n);return e?(At(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,il.set(n,e),e)}class Fd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fd.type="NONE";const ol=Fd;function Bs(n,e,t){return`firebase:${n}:${e}:${t}`}class jn{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Bs(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bs("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ti(this.auth,{idToken:e}).catch(()=>{});return t?Xe._fromGetAccountInfoResponse(this.auth,t,e):null}return Xe._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new jn(Et(ol),e,r);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Et(ol);const a=Bs(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const f=await h._get(a);if(f){let m;if(typeof f=="string"){const E=await ti(e,{idToken:f}).catch(()=>{});if(!E)break;m=await Xe._fromGetAccountInfoResponse(e,E,f)}else m=Xe._fromJSON(e,f);h!==i&&(c=m),i=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new jn(i,e,r):(i=l[0],c&&await i._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new jn(i,e,r))}}function al(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($d(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hd(e))return"Blackberry";if(Wd(e))return"Webos";if(qd(e))return"Safari";if((e.includes("chrome/")||jd(e))&&!e.includes("edge/"))return"Chrome";if(zd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Bd(n=Pe()){return/firefox\//i.test(n)}function qd(n=Pe()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jd(n=Pe()){return/crios\//i.test(n)}function $d(n=Pe()){return/iemobile/i.test(n)}function zd(n=Pe()){return/android/i.test(n)}function Hd(n=Pe()){return/blackberry/i.test(n)}function Wd(n=Pe()){return/webos/i.test(n)}function Va(n=Pe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function qT(n=Pe()){return Va(n)&&!!window.navigator?.standalone}function jT(){return k_()&&document.documentMode===10}function Gd(n=Pe()){return Va(n)||zd(n)||Wd(n)||Hd(n)||/windows phone/i.test(n)||$d(n)}function Kd(n,e=[]){let t;switch(n){case"Browser":t=al(Pe());break;case"Worker":t=`${al(Pe())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Rn}/${r}`}class $T{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((a,c)=>{try{const l=e(i);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function zT(n,e={}){return St(n,"GET","/v2/passwordPolicy",Zt(n,e))}const HT=6;class WT{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??HT,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class GT{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cl(this),this.idTokenSubscription=new cl(this),this.beforeStateQueue=new $T(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Et(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jn.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ti(this,{idToken:e}),r=await Xe._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Le(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ni(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Le(this.app))return Promise.reject(Tt(this));const t=e?ie(e):null;return t&&B(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Le(this.app)?Promise.reject(Tt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Le(this.app)?Promise.reject(Tt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Et(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zT(this),t=new WT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new An("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await BT(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Et(e)||this._popupRedirectResolver;B(t,this,"argument-error"),this.redirectPersistenceManager=await jn.create(this,[Et(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,s);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Le(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function en(n){return ie(n)}class cl{constructor(e){this.auth=e,this.observer=null,this.addObserver=x_(t=>this.observer=t)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ci={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KT(n){Ci=n}function Qd(n){return Ci.loadJS(n)}function QT(){return Ci.recaptchaEnterpriseScript}function XT(){return Ci.gapiScript}function JT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class YT{constructor(){this.enterprise=new ZT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ZT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ew="recaptcha-enterprise",Xd="NO_RECAPTCHA";class tw{constructor(e){this.type=ew,this.auth=en(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{OT(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new NT(l);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,a(h.siteKey)}}).catch(l=>{c(l)})})}function s(i,a,c){const l=window.grecaptcha;rl(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(h=>{a(h)}).catch(()=>{a(Xd)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YT().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!t&&rl(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=QT();l.length!==0&&(l+=c),Qd(l).then(()=>{s(c,i,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function ul(n,e,t,r=!1,s=!1){const i=new tw(n);let a;if(s)a=Xd;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Yo(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ul(n,e,t,t==="getOobCode");return r(n,i)}else return r(n,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ul(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(i)})}function nw(n,e){const t=Yt(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(zt(i,e??{}))return s;Ge(s,"already-initialized")}return t.initialize({options:e})}function rw(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Et);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function sw(n,e,t){const r=en(n);B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Jd(e),{host:a,port:c}=iw(e),l=c===null?"":`:${c}`,h={url:`${i}//${a}${l}/`},f=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){B(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),B(zt(h,r.config.emulator)&&zt(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Jt(a)?(wa(`${i}//${a}${l}`),Ia("Auth",!0)):ow()}function Jd(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iw(n){const e=Jd(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ll(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:ll(a)}}}function ll(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ow(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class La{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yt("not implemented")}_getIdTokenResponse(e){return yt("not implemented")}_linkToIdToken(e,t){return yt("not implemented")}_getReauthenticationResolver(e){return yt("not implemented")}}async function aw(n,e){return St(n,"POST","/v1/accounts:signUp",e)}async function cw(n,e){return ts(n,"POST","/v1/accounts:signInWithPassword",Zt(n,e))}async function uw(n,e){return ts(n,"POST","/v1/accounts:signInWithEmailLink",Zt(n,e))}async function lw(n,e){return ts(n,"POST","/v1/accounts:signInWithEmailLink",Zt(n,e))}class qr extends La{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new qr(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new qr(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yo(e,t,"signInWithPassword",cw);case"emailLink":return uw(e,{email:this._email,oobCode:this._password});default:Ge(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yo(e,r,"signUpPassword",aw);case"emailLink":return lw(e,{idToken:t,email:this._email,oobCode:this._password});default:Ge(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function $n(n,e){return ts(n,"POST","/v1/accounts:signInWithIdp",Zt(n,e))}const hw="http://localhost";class En extends La{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new En(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ge("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const a=new En(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return $n(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,$n(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$n(e,t)}buildRequest(){const e={requestUri:hw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zr(t)}return e}}function dw(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fw(n){const e=Pr(Cr(n)).link,t=e?Pr(Cr(e)).deep_link_id:null,r=Pr(Cr(n)).deep_link_id;return(r?Pr(Cr(r)).link:null)||r||t||e||n}class Ma{constructor(e){const t=Pr(Cr(e)),r=t.apiKey??null,s=t.oobCode??null,i=dw(t.mode??null);B(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=fw(e);try{return new Ma(t)}catch{return null}}}class rr{constructor(){this.providerId=rr.PROVIDER_ID}static credential(e,t){return qr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Ma.parseLink(t);return B(r,"argument-error"),qr._fromEmailAndCode(e,r.code,r.tenantId)}}rr.PROVIDER_ID="password";rr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class xa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ns extends xa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Lt extends ns{constructor(){super("facebook.com")}static credential(e){return En._fromParams({providerId:Lt.PROVIDER_ID,signInMethod:Lt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lt.credentialFromTaggedObject(e)}static credentialFromError(e){return Lt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lt.credential(e.oauthAccessToken)}catch{return null}}}Lt.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lt.PROVIDER_ID="facebook.com";class gt extends ns{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return En._fromParams({providerId:gt.PROVIDER_ID,signInMethod:gt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gt.credentialFromTaggedObject(e)}static credentialFromError(e){return gt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return gt.credential(t,r)}catch{return null}}}gt.GOOGLE_SIGN_IN_METHOD="google.com";gt.PROVIDER_ID="google.com";class Mt extends ns{constructor(){super("github.com")}static credential(e){return En._fromParams({providerId:Mt.PROVIDER_ID,signInMethod:Mt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mt.credentialFromTaggedObject(e)}static credentialFromError(e){return Mt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mt.credential(e.oauthAccessToken)}catch{return null}}}Mt.GITHUB_SIGN_IN_METHOD="github.com";Mt.PROVIDER_ID="github.com";class xt extends ns{constructor(){super("twitter.com")}static credential(e,t){return En._fromParams({providerId:xt.PROVIDER_ID,signInMethod:xt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xt.credentialFromTaggedObject(e)}static credentialFromError(e){return xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return xt.credential(t,r)}catch{return null}}}xt.TWITTER_SIGN_IN_METHOD="twitter.com";xt.PROVIDER_ID="twitter.com";async function pw(n,e){return ts(n,"POST","/v1/accounts:signUp",Zt(n,e))}class Tn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await Xe._fromIdTokenResponse(e,r,s),a=hl(r);return new Tn({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=hl(r);return new Tn({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function hl(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class ri extends Ke{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ri.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new ri(e,t,r,s)}}function Yd(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ri._fromErrorAndOperation(n,i,e,r):i})}async function mw(n,e,t=!1){const r=await Kn(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Tn._forOperation(n,"link",r)}async function gw(n,e,t=!1){const{auth:r}=n;if(Le(r.app))return Promise.reject(Tt(r));const s="reauthenticate";try{const i=await Kn(n,Yd(r,s,e,n),t);B(i.idToken,r,"internal-error");const a=Da(i.idToken);B(a,r,"internal-error");const{sub:c}=a;return B(n.uid===c,r,"user-mismatch"),Tn._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Ge(r,"user-mismatch"),i}}async function Zd(n,e,t=!1){if(Le(n.app))return Promise.reject(Tt(n));const r="signIn",s=await Yd(n,r,e),i=await Tn._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function _w(n,e){return Zd(en(n),e)}async function ef(n){const e=en(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yw(n,e,t){if(Le(n.app))return Promise.reject(Tt(n));const r=en(n),a=await Yo(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pw).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ef(n),l}),c=await Tn._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Ew(n,e,t){return Le(n.app)?Promise.reject(Tt(n)):_w(ie(n),rr.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ef(n),r})}async function Tw(n,e){return St(n,"POST","/v1/accounts:update",e)}async function ww(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ie(n),i={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Kn(r,Tw(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:l})=>l==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Iw(n,e,t,r){return ie(n).onIdTokenChanged(e,t,r)}function vw(n,e,t){return ie(n).beforeAuthStateChanged(e,t)}function Aw(n,e,t,r){return ie(n).onAuthStateChanged(e,t,r)}function Rw(n){return ie(n).signOut()}const si="__sak";class tf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(si,"1"),this.storage.removeItem(si),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const bw=1e3,Sw=10;class nf extends tf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);jT()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Sw):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},bw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nf.type="LOCAL";const Pw=nf;class rf extends tf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rf.type="SESSION";const sf=rf;function Cw(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ki{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ki(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async h=>h(t.origin,i)),l=await Cw(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ki.receivers=[];function Ua(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class kw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,l)=>{const h=Ua("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const E=m;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(E.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function at(){return window}function Nw(n){at().location.href=n}function of(){return typeof at().WorkerGlobalScope<"u"&&typeof at().importScripts=="function"}async function Ow(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dw(){return navigator?.serviceWorker?.controller||null}function Vw(){return of()?self:null}const af="firebaseLocalStorageDb",Lw=1,ii="firebaseLocalStorage",cf="fbase_key";class rs{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ni(n,e){return n.transaction([ii],e?"readwrite":"readonly").objectStore(ii)}function Mw(){const n=indexedDB.deleteDatabase(af);return new rs(n).toPromise()}function Zo(){const n=indexedDB.open(af,Lw);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ii,{keyPath:cf})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ii)?e(r):(r.close(),await Mw(),e(await Zo()))})})}async function dl(n,e,t){const r=Ni(n,!0).put({[cf]:e,value:t});return new rs(r).toPromise()}async function xw(n,e){const t=Ni(n,!1).get(e),r=await new rs(t).toPromise();return r===void 0?null:r.value}function fl(n,e){const t=Ni(n,!0).delete(e);return new rs(t).toPromise()}const Uw=800,Fw=3;class uf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zo(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Fw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return of()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ki._getInstance(Vw()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Ow(),!this.activeServiceWorker)return;this.sender=new kw(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zo();return await dl(e,si,"1"),await fl(e,si),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>dl(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>xw(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fl(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ni(s,!1).getAll();return new rs(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uf.type="LOCAL";const Bw=uf;new es(3e4,6e4);function lf(n,e){return e?Et(e):(B(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Fa extends La{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $n(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $n(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $n(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qw(n){return Zd(n.auth,new Fa(n),n.bypassAuthState)}function jw(n){const{auth:e,user:t}=n;return B(t,e,"internal-error"),gw(t,new Fa(n),n.bypassAuthState)}async function $w(n){const{auth:e,user:t}=n;return B(t,e,"internal-error"),mw(t,new Fa(n),n.bypassAuthState)}class hf{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qw;case"linkViaPopup":case"linkViaRedirect":return $w;case"reauthViaPopup":case"reauthViaRedirect":return jw;default:Ge(this.auth,"internal-error")}}resolve(e){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zw=new es(2e3,1e4);async function Hw(n,e,t){if(Le(n.app))return Promise.reject(Ye(n,"operation-not-supported-in-this-environment"));const r=en(n);IT(n,e,xa);const s=lf(r,t);return new dn(r,"signInViaPopup",e,s).executeNotNull()}class dn extends hf{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,dn.currentPopupAction&&dn.currentPopupAction.cancel(),dn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){At(this.filter.length===1,"Popup operations only handle one event");const e=Ua();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ye(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dn.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ye(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zw.get())};e()}}dn.currentPopupAction=null;const Ww="pendingRedirect",qs=new Map;class Gw extends hf{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=qs.get(this.auth._key());if(!e){try{const r=await Kw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}qs.set(this.auth._key(),e)}return this.bypassAuthState||qs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kw(n,e){const t=Jw(e),r=Xw(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function Qw(n,e){qs.set(n._key(),e)}function Xw(n){return Et(n._redirectPersistence)}function Jw(n){return Bs(Ww,n.config.apiKey,n.name)}async function Yw(n,e,t=!1){if(Le(n.app))return Promise.reject(Tt(n));const r=en(n),s=lf(r,e),a=await new Gw(r,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const Zw=600*1e3;class eI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!df(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ye(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zw&&this.cachedEventUids.clear(),this.cachedEventUids.has(pl(e))}saveEventToCache(e){this.cachedEventUids.add(pl(e)),this.lastProcessedEventTime=Date.now()}}function pl(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function df({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function tI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return df(n);default:return!1}}async function nI(n,e={}){return St(n,"GET","/v1/projects",e)}const rI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sI=/^https?/;async function iI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await nI(n);for(const t of e)try{if(oI(t))return}catch{}Ge(n,"unauthorized-domain")}function oI(n){const e=Xo(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!sI.test(t))return!1;if(rI.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const aI=new es(3e4,6e4);function ml(){const n=at().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cI(n){return new Promise((e,t)=>{function r(){ml(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ml(),t(Ye(n,"network-request-failed"))},timeout:aI.get()})}if(at().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(at().gapi?.load)r();else{const s=JT("iframefcb");return at()[s]=()=>{gapi.load?r():t(Ye(n,"network-request-failed"))},Qd(`${XT()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw js=null,e})}let js=null;function uI(n){return js=js||cI(n),js}const lI=new es(5e3,15e3),hI="__/auth/iframe",dI="emulator/auth/iframe",fI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mI(n){const e=n.config;B(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Oa(e,dI):`https://${n.config.authDomain}/${hI}`,r={apiKey:e.apiKey,appName:n.name,v:Rn},s=pI.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Zr(r).slice(1)}`}async function gI(n){const e=await uI(n),t=at().gapi;return B(t,n,"internal-error"),e.open({where:document.body,url:mI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fI,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Ye(n,"network-request-failed"),c=at().setTimeout(()=>{i(a)},lI.get());function l(){at().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(a)})}))}const _I={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yI=500,EI=600,TI="_blank",wI="http://localhost";class gl{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function II(n,e,t,r=yI,s=EI){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={..._I,width:r.toString(),height:s.toString(),top:i,left:a},h=Pe().toLowerCase();t&&(c=jd(h)?TI:t),Bd(h)&&(e=e||wI,l.scrollbars="yes");const f=Object.entries(l).reduce((E,[C,v])=>`${E}${C}=${v},`,"");if(qT(h)&&c!=="_self")return vI(e||"",c),new gl(null);const m=window.open(e||"",c,f);B(m,n,"popup-blocked");try{m.focus()}catch{}return new gl(m)}function vI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const AI="__/auth/handler",RI="emulator/auth/handler",bI=encodeURIComponent("fac");async function _l(n,e,t,r,s,i){B(n.config.authDomain,n,"auth-domain-config-required"),B(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Rn,eventId:s};if(e instanceof xa){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",M_(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof ns){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await n._getAppCheckToken(),h=l?`#${bI}=${encodeURIComponent(l)}`:"";return`${SI(n)}?${Zr(c).slice(1)}${h}`}function SI({config:n}){return n.emulator?Oa(n,RI):`https://${n.authDomain}/${AI}`}const No="webStorageSupport";class PI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sf,this._completeRedirectFn=Yw,this._overrideRedirectResult=Qw}async _openPopup(e,t,r,s){At(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await _l(e,t,r,Xo(),s);return II(e,i,Ua())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await _l(e,t,r,Xo(),s);return Nw(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(At(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await gI(e),r=new eI(e);return t.register("authEvent",s=>(B(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(No,{type:No},s=>{const i=s?.[0]?.[No];i!==void 0&&t(!!i),Ge(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gd()||qd()||Va()}}const CI=PI;var yl="@firebase/auth",El="1.11.1";class kI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function NI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OI(n){Ze(new We("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;B(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kd(n)},h=new GT(r,s,i,l);return rw(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ze(new We("auth-internal",e=>{const t=en(e.getProvider("auth").getImmediate());return(r=>new kI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(yl,El,NI(n)),Ue(yl,El,"esm2020")}const DI=300,VI=td("authIdTokenMaxAge")||DI;let Tl=null;const LI=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VI)return;const s=t?.token;Tl!==s&&(Tl=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MI(n=bi()){const e=Yt(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nw(n,{popupRedirectResolver:CI,persistence:[Bw,Pw,sf]}),r=td("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=LI(i.toString());vw(t,a,()=>a(t.currentUser)),Iw(t,c=>a(c))}}const s=Yh("auth");return s&&sw(t,`http://${s}`),t}function xI(){return document.getElementsByTagName("head")?.[0]??document}KT({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=Ye("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",xI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OI("Browser");var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qt,ff;(function(){var n;function e(T,g){function y(){}y.prototype=g.prototype,T.F=g.prototype,T.prototype=new y,T.prototype.constructor=T,T.D=function(I,w,A){for(var _=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)_[ce-2]=arguments[ce];return g.prototype[w].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,g,y){y||(y=0);const I=Array(16);if(typeof g=="string")for(var w=0;w<16;++w)I[w]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(w=0;w<16;++w)I[w]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=T.g[0],y=T.g[1],w=T.g[2];let A=T.g[3],_;_=g+(A^y&(w^A))+I[0]+3614090360&4294967295,g=y+(_<<7&4294967295|_>>>25),_=A+(w^g&(y^w))+I[1]+3905402710&4294967295,A=g+(_<<12&4294967295|_>>>20),_=w+(y^A&(g^y))+I[2]+606105819&4294967295,w=A+(_<<17&4294967295|_>>>15),_=y+(g^w&(A^g))+I[3]+3250441966&4294967295,y=w+(_<<22&4294967295|_>>>10),_=g+(A^y&(w^A))+I[4]+4118548399&4294967295,g=y+(_<<7&4294967295|_>>>25),_=A+(w^g&(y^w))+I[5]+1200080426&4294967295,A=g+(_<<12&4294967295|_>>>20),_=w+(y^A&(g^y))+I[6]+2821735955&4294967295,w=A+(_<<17&4294967295|_>>>15),_=y+(g^w&(A^g))+I[7]+4249261313&4294967295,y=w+(_<<22&4294967295|_>>>10),_=g+(A^y&(w^A))+I[8]+1770035416&4294967295,g=y+(_<<7&4294967295|_>>>25),_=A+(w^g&(y^w))+I[9]+2336552879&4294967295,A=g+(_<<12&4294967295|_>>>20),_=w+(y^A&(g^y))+I[10]+4294925233&4294967295,w=A+(_<<17&4294967295|_>>>15),_=y+(g^w&(A^g))+I[11]+2304563134&4294967295,y=w+(_<<22&4294967295|_>>>10),_=g+(A^y&(w^A))+I[12]+1804603682&4294967295,g=y+(_<<7&4294967295|_>>>25),_=A+(w^g&(y^w))+I[13]+4254626195&4294967295,A=g+(_<<12&4294967295|_>>>20),_=w+(y^A&(g^y))+I[14]+2792965006&4294967295,w=A+(_<<17&4294967295|_>>>15),_=y+(g^w&(A^g))+I[15]+1236535329&4294967295,y=w+(_<<22&4294967295|_>>>10),_=g+(w^A&(y^w))+I[1]+4129170786&4294967295,g=y+(_<<5&4294967295|_>>>27),_=A+(y^w&(g^y))+I[6]+3225465664&4294967295,A=g+(_<<9&4294967295|_>>>23),_=w+(g^y&(A^g))+I[11]+643717713&4294967295,w=A+(_<<14&4294967295|_>>>18),_=y+(A^g&(w^A))+I[0]+3921069994&4294967295,y=w+(_<<20&4294967295|_>>>12),_=g+(w^A&(y^w))+I[5]+3593408605&4294967295,g=y+(_<<5&4294967295|_>>>27),_=A+(y^w&(g^y))+I[10]+38016083&4294967295,A=g+(_<<9&4294967295|_>>>23),_=w+(g^y&(A^g))+I[15]+3634488961&4294967295,w=A+(_<<14&4294967295|_>>>18),_=y+(A^g&(w^A))+I[4]+3889429448&4294967295,y=w+(_<<20&4294967295|_>>>12),_=g+(w^A&(y^w))+I[9]+568446438&4294967295,g=y+(_<<5&4294967295|_>>>27),_=A+(y^w&(g^y))+I[14]+3275163606&4294967295,A=g+(_<<9&4294967295|_>>>23),_=w+(g^y&(A^g))+I[3]+4107603335&4294967295,w=A+(_<<14&4294967295|_>>>18),_=y+(A^g&(w^A))+I[8]+1163531501&4294967295,y=w+(_<<20&4294967295|_>>>12),_=g+(w^A&(y^w))+I[13]+2850285829&4294967295,g=y+(_<<5&4294967295|_>>>27),_=A+(y^w&(g^y))+I[2]+4243563512&4294967295,A=g+(_<<9&4294967295|_>>>23),_=w+(g^y&(A^g))+I[7]+1735328473&4294967295,w=A+(_<<14&4294967295|_>>>18),_=y+(A^g&(w^A))+I[12]+2368359562&4294967295,y=w+(_<<20&4294967295|_>>>12),_=g+(y^w^A)+I[5]+4294588738&4294967295,g=y+(_<<4&4294967295|_>>>28),_=A+(g^y^w)+I[8]+2272392833&4294967295,A=g+(_<<11&4294967295|_>>>21),_=w+(A^g^y)+I[11]+1839030562&4294967295,w=A+(_<<16&4294967295|_>>>16),_=y+(w^A^g)+I[14]+4259657740&4294967295,y=w+(_<<23&4294967295|_>>>9),_=g+(y^w^A)+I[1]+2763975236&4294967295,g=y+(_<<4&4294967295|_>>>28),_=A+(g^y^w)+I[4]+1272893353&4294967295,A=g+(_<<11&4294967295|_>>>21),_=w+(A^g^y)+I[7]+4139469664&4294967295,w=A+(_<<16&4294967295|_>>>16),_=y+(w^A^g)+I[10]+3200236656&4294967295,y=w+(_<<23&4294967295|_>>>9),_=g+(y^w^A)+I[13]+681279174&4294967295,g=y+(_<<4&4294967295|_>>>28),_=A+(g^y^w)+I[0]+3936430074&4294967295,A=g+(_<<11&4294967295|_>>>21),_=w+(A^g^y)+I[3]+3572445317&4294967295,w=A+(_<<16&4294967295|_>>>16),_=y+(w^A^g)+I[6]+76029189&4294967295,y=w+(_<<23&4294967295|_>>>9),_=g+(y^w^A)+I[9]+3654602809&4294967295,g=y+(_<<4&4294967295|_>>>28),_=A+(g^y^w)+I[12]+3873151461&4294967295,A=g+(_<<11&4294967295|_>>>21),_=w+(A^g^y)+I[15]+530742520&4294967295,w=A+(_<<16&4294967295|_>>>16),_=y+(w^A^g)+I[2]+3299628645&4294967295,y=w+(_<<23&4294967295|_>>>9),_=g+(w^(y|~A))+I[0]+4096336452&4294967295,g=y+(_<<6&4294967295|_>>>26),_=A+(y^(g|~w))+I[7]+1126891415&4294967295,A=g+(_<<10&4294967295|_>>>22),_=w+(g^(A|~y))+I[14]+2878612391&4294967295,w=A+(_<<15&4294967295|_>>>17),_=y+(A^(w|~g))+I[5]+4237533241&4294967295,y=w+(_<<21&4294967295|_>>>11),_=g+(w^(y|~A))+I[12]+1700485571&4294967295,g=y+(_<<6&4294967295|_>>>26),_=A+(y^(g|~w))+I[3]+2399980690&4294967295,A=g+(_<<10&4294967295|_>>>22),_=w+(g^(A|~y))+I[10]+4293915773&4294967295,w=A+(_<<15&4294967295|_>>>17),_=y+(A^(w|~g))+I[1]+2240044497&4294967295,y=w+(_<<21&4294967295|_>>>11),_=g+(w^(y|~A))+I[8]+1873313359&4294967295,g=y+(_<<6&4294967295|_>>>26),_=A+(y^(g|~w))+I[15]+4264355552&4294967295,A=g+(_<<10&4294967295|_>>>22),_=w+(g^(A|~y))+I[6]+2734768916&4294967295,w=A+(_<<15&4294967295|_>>>17),_=y+(A^(w|~g))+I[13]+1309151649&4294967295,y=w+(_<<21&4294967295|_>>>11),_=g+(w^(y|~A))+I[4]+4149444226&4294967295,g=y+(_<<6&4294967295|_>>>26),_=A+(y^(g|~w))+I[11]+3174756917&4294967295,A=g+(_<<10&4294967295|_>>>22),_=w+(g^(A|~y))+I[2]+718787259&4294967295,w=A+(_<<15&4294967295|_>>>17),_=y+(A^(w|~g))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+g&4294967295,T.g[1]=T.g[1]+(w+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+w&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.v=function(T,g){g===void 0&&(g=T.length);const y=g-this.blockSize,I=this.C;let w=this.h,A=0;for(;A<g;){if(w==0)for(;A<=y;)s(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<g;)if(I[w++]=T.charCodeAt(A++),w==this.blockSize){s(this,I),w=0;break}}else for(;A<g;)if(I[w++]=T[A++],w==this.blockSize){s(this,I),w=0;break}}this.h=w,this.o+=g},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var g=1;g<T.length-8;++g)T[g]=0;g=this.o*8;for(var y=T.length-8;y<T.length;++y)T[y]=g&255,g/=256;for(this.v(T),T=Array(16),g=0,y=0;y<4;++y)for(let I=0;I<32;I+=8)T[g++]=this.g[y]>>>I&255;return T};function i(T,g){var y=c;return Object.prototype.hasOwnProperty.call(y,T)?y[T]:y[T]=g(T)}function a(T,g){this.h=g;const y=[];let I=!0;for(let w=T.length-1;w>=0;w--){const A=T[w]|0;I&&A==g||(y[w]=A,I=!1)}this.g=y}var c={};function l(T){return-128<=T&&T<128?i(T,function(g){return new a([g|0],g<0?-1:0)}):new a([T|0],T<0?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return b(h(-T));const g=[];let y=1;for(let I=0;T>=y;I++)g[I]=T/y|0,y*=4294967296;return new a(g,0)}function f(T,g){if(T.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(T.charAt(0)=="-")return b(f(T.substring(1),g));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=h(Math.pow(g,8));let I=m;for(let A=0;A<T.length;A+=8){var w=Math.min(8,T.length-A);const _=parseInt(T.substring(A,A+w),g);w<8?(w=h(Math.pow(g,w)),I=I.j(w).add(h(_))):(I=I.j(y),I=I.add(h(_)))}return I}var m=l(0),E=l(1),C=l(16777216);n=a.prototype,n.m=function(){if(k(this))return-b(this).m();let T=0,g=1;for(let y=0;y<this.g.length;y++){const I=this.i(y);T+=(I>=0?I:4294967296+I)*g,g*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(v(this))return"0";if(k(this))return"-"+b(this).toString(T);const g=h(Math.pow(T,6));var y=this;let I="";for(;;){const w=j(y,g).g;y=M(y,w.j(g));let A=((y.g.length>0?y.g[0]:y.h)>>>0).toString(T);if(y=w,v(y))return A+I;for(;A.length<6;)A="0"+A;I=A+I}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function v(T){if(T.h!=0)return!1;for(let g=0;g<T.g.length;g++)if(T.g[g]!=0)return!1;return!0}function k(T){return T.h==-1}n.l=function(T){return T=M(this,T),k(T)?-1:v(T)?0:1};function b(T){const g=T.g.length,y=[];for(let I=0;I<g;I++)y[I]=~T.g[I];return new a(y,~T.h).add(E)}n.abs=function(){return k(this)?b(this):this},n.add=function(T){const g=Math.max(this.g.length,T.g.length),y=[];let I=0;for(let w=0;w<=g;w++){let A=I+(this.i(w)&65535)+(T.i(w)&65535),_=(A>>>16)+(this.i(w)>>>16)+(T.i(w)>>>16);I=_>>>16,A&=65535,_&=65535,y[w]=_<<16|A}return new a(y,y[y.length-1]&-2147483648?-1:0)};function M(T,g){return T.add(b(g))}n.j=function(T){if(v(this)||v(T))return m;if(k(this))return k(T)?b(this).j(b(T)):b(b(this).j(T));if(k(T))return b(this.j(b(T)));if(this.l(C)<0&&T.l(C)<0)return h(this.m()*T.m());const g=this.g.length+T.g.length,y=[];for(var I=0;I<2*g;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(let w=0;w<T.g.length;w++){const A=this.i(I)>>>16,_=this.i(I)&65535,ce=T.i(w)>>>16,tt=T.i(w)&65535;y[2*I+2*w]+=_*tt,U(y,2*I+2*w),y[2*I+2*w+1]+=A*tt,U(y,2*I+2*w+1),y[2*I+2*w+1]+=_*ce,U(y,2*I+2*w+1),y[2*I+2*w+2]+=A*ce,U(y,2*I+2*w+2)}for(T=0;T<g;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=g;T<2*g;T++)y[T]=0;return new a(y,0)};function U(T,g){for(;(T[g]&65535)!=T[g];)T[g+1]+=T[g]>>>16,T[g]&=65535,g++}function L(T,g){this.g=T,this.h=g}function j(T,g){if(v(g))throw Error("division by zero");if(v(T))return new L(m,m);if(k(T))return g=j(b(T),g),new L(b(g.g),b(g.h));if(k(g))return g=j(T,b(g)),new L(b(g.g),g.h);if(T.g.length>30){if(k(T)||k(g))throw Error("slowDivide_ only works with positive integers.");for(var y=E,I=g;I.l(T)<=0;)y=J(y),I=J(I);var w=Y(y,1),A=Y(I,1);for(I=Y(I,2),y=Y(y,2);!v(I);){var _=A.add(I);_.l(T)<=0&&(w=w.add(y),A=_),I=Y(I,1),y=Y(y,1)}return g=M(T,w.j(g)),new L(w,g)}for(w=m;T.l(g)>=0;){for(y=Math.max(1,Math.floor(T.m()/g.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),A=h(y),_=A.j(g);k(_)||_.l(T)>0;)y-=I,A=h(y),_=A.j(g);v(A)&&(A=E),w=w.add(A),T=M(T,_)}return new L(w,T)}n.B=function(T){return j(this,T).h},n.and=function(T){const g=Math.max(this.g.length,T.g.length),y=[];for(let I=0;I<g;I++)y[I]=this.i(I)&T.i(I);return new a(y,this.h&T.h)},n.or=function(T){const g=Math.max(this.g.length,T.g.length),y=[];for(let I=0;I<g;I++)y[I]=this.i(I)|T.i(I);return new a(y,this.h|T.h)},n.xor=function(T){const g=Math.max(this.g.length,T.g.length),y=[];for(let I=0;I<g;I++)y[I]=this.i(I)^T.i(I);return new a(y,this.h^T.h)};function J(T){const g=T.g.length+1,y=[];for(let I=0;I<g;I++)y[I]=T.i(I)<<1|T.i(I-1)>>>31;return new a(y,T.h)}function Y(T,g){const y=g>>5;g%=32;const I=T.g.length-y,w=[];for(let A=0;A<I;A++)w[A]=g>0?T.i(A+y)>>>g|T.i(A+y+1)<<32-g:T.i(A+y);return new a(w,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ff=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,qt=a}).apply(typeof wl<"u"?wl:typeof self<"u"?self:typeof window<"u"?window:{});var bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pf,kr,mf,$s,ea,gf,_f,yf;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof bs=="object"&&bs];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function s(o,u){if(u)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var R=o[p];if(!(R in d))break e;d=d[R]}o=o[o.length-1],p=d[o],u=u(p),u!=p&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(u){var d=[],p;for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&d.push([p,u[p]]);return d}});var i=i||{},a=this||self;function c(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function l(o,u,d){return o.call.apply(o.bind,arguments)}function h(o,u,d){return h=l,h.apply(null,arguments)}function f(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function m(o,u){function d(){}d.prototype=u.prototype,o.Z=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(p,R,P){for(var D=Array(arguments.length-2),W=2;W<arguments.length;W++)D[W-2]=arguments[W];return u.prototype[R].apply(p,D)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function C(o){const u=o.length;if(u>0){const d=Array(u);for(let p=0;p<u;p++)d[p]=o[p];return d}return[]}function v(o,u){for(let p=1;p<arguments.length;p++){const R=arguments[p];var d=typeof R;if(d=d!="object"?d:R?Array.isArray(R)?"array":d:"null",d=="array"||d=="object"&&typeof R.length=="number"){d=o.length||0;const P=R.length||0;o.length=d+P;for(let D=0;D<P;D++)o[d+D]=R[D]}else o.push(R)}}class k{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function b(o){a.setTimeout(()=>{throw o},0)}function M(){var o=T;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class U{constructor(){this.h=this.g=null}add(u,d){const p=L.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var L=new k(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let J,Y=!1,T=new U,g=()=>{const o=Promise.resolve(void 0);J=()=>{o.then(y)}};function y(){for(var o;o=M();){try{o.h.call(o.g)}catch(d){b(d)}var u=L;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}Y=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,u),a.removeEventListener("test",d,u)}catch{}return o})();function _(o){return/^[\s\xa0]*$/.test(o)}function ce(o,u){w.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}m(ce,w),ce.prototype.init=function(o,u){const d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),$e=0;function hs(o,u,d,p,R){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=R,this.key=++$e,this.da=this.fa=!1}function Fe(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function tn(o,u,d){for(const p in o)u.call(d,o[p],p,o)}function Ki(o,u){for(const d in o)u.call(void 0,o[d],d,o)}function Qe(o){const u={};for(const d in o)u[d]=o[d];return u}const pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kn(o,u){let d,p;for(let R=1;R<arguments.length;R++){p=arguments[R];for(d in p)o[d]=p[d];for(let P=0;P<pt.length;P++)d=pt[P],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function mt(o){this.src=o,this.g={},this.h=0}mt.prototype.add=function(o,u,d,p,R){const P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);const D=Qi(o,u,p,R);return D>-1?(u=o[D],d||(u.fa=!1)):(u=new hs(u,this.src,P,!!p,R),u.fa=d,o.push(u)),u};function Nn(o,u){const d=u.type;if(d in o.g){var p=o.g[d],R=Array.prototype.indexOf.call(p,u,void 0),P;(P=R>=0)&&Array.prototype.splice.call(p,R,1),P&&(Fe(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Qi(o,u,d,p){for(let R=0;R<o.length;++R){const P=o[R];if(!P.da&&P.listener==u&&P.capture==!!d&&P.ha==p)return R}return-1}var Xi="closure_lm_"+(Math.random()*1e6|0),Ji={};function Ic(o,u,d,p,R){if(Array.isArray(u)){for(let P=0;P<u.length;P++)Ic(o,u[P],d,p,R);return null}return d=Rc(d),o&&o[tt]?o.J(u,d,c(p)?!!p.capture:!1,R):hm(o,u,d,!1,p,R)}function hm(o,u,d,p,R,P){if(!u)throw Error("Invalid event type");const D=c(R)?!!R.capture:!!R;let W=Zi(o);if(W||(o[Xi]=W=new mt(o)),d=W.add(u,d,p,D,P),d.proxy)return d;if(p=dm(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)A||(R=D),R===void 0&&(R=!1),o.addEventListener(u.toString(),p,R);else if(o.attachEvent)o.attachEvent(Ac(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function dm(){function o(d){return u.call(o.src,o.listener,d)}const u=fm;return o}function vc(o,u,d,p,R){if(Array.isArray(u))for(var P=0;P<u.length;P++)vc(o,u[P],d,p,R);else p=c(p)?!!p.capture:!!p,d=Rc(d),o&&o[tt]?(o=o.i,P=String(u).toString(),P in o.g&&(u=o.g[P],d=Qi(u,d,p,R),d>-1&&(Fe(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete o.g[P],o.h--)))):o&&(o=Zi(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Qi(u,d,p,R)),(d=o>-1?u[o]:null)&&Yi(d))}function Yi(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[tt])Nn(u.i,o);else{var d=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(d,p,o.capture):u.detachEvent?u.detachEvent(Ac(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=Zi(u))?(Nn(d,o),d.h==0&&(d.src=null,u[Xi]=null)):Fe(o)}}}function Ac(o){return o in Ji?Ji[o]:Ji[o]="on"+o}function fm(o,u){if(o.da)o=!0;else{u=new ce(u,this);const d=o.listener,p=o.ha||o.src;o.fa&&Yi(o),o=d.call(p,u)}return o}function Zi(o){return o=o[Xi],o instanceof mt?o:null}var eo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rc(o){return typeof o=="function"?o:(o[eo]||(o[eo]=function(u){return o.handleEvent(u)}),o[eo])}function ve(){I.call(this),this.i=new mt(this),this.M=this,this.G=null}m(ve,I),ve.prototype[tt]=!0,ve.prototype.removeEventListener=function(o,u,d,p){vc(this,o,u,d,p)};function Ce(o,u){var d,p=o.G;if(p)for(d=[];p;p=p.G)d.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new w(u,o);else if(u instanceof w)u.target=u.target||o;else{var R=u;u=new w(p,o),kn(u,R)}R=!0;let P,D;if(d)for(D=d.length-1;D>=0;D--)P=u.g=d[D],R=ds(P,p,!0,u)&&R;if(P=u.g=o,R=ds(P,p,!0,u)&&R,R=ds(P,p,!1,u)&&R,d)for(D=0;D<d.length;D++)P=u.g=d[D],R=ds(P,p,!1,u)&&R}ve.prototype.N=function(){if(ve.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const d=o.g[u];for(let p=0;p<d.length;p++)Fe(d[p]);delete o.g[u],o.h--}}this.G=null},ve.prototype.J=function(o,u,d,p){return this.i.add(String(o),u,!1,d,p)},ve.prototype.K=function(o,u,d,p){return this.i.add(String(o),u,!0,d,p)};function ds(o,u,d,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let R=!0;for(let P=0;P<u.length;++P){const D=u[P];if(D&&!D.da&&D.capture==d){const W=D.listener,pe=D.ha||D.src;D.fa&&Nn(o.i,D),R=W.call(pe,p)!==!1&&R}}return R&&!p.defaultPrevented}function pm(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function bc(o){o.g=pm(()=>{o.g=null,o.i&&(o.i=!1,bc(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class mm extends I{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:bc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lr(o){I.call(this),this.h=o,this.g={}}m(lr,I);var Sc=[];function Pc(o){tn(o.g,function(u,d){this.g.hasOwnProperty(d)&&Yi(u)},o),o.g={}}lr.prototype.N=function(){lr.Z.N.call(this),Pc(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var to=a.JSON.stringify,gm=a.JSON.parse,_m=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Cc(){}function kc(){}var hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function no(){w.call(this,"d")}m(no,w);function ro(){w.call(this,"c")}m(ro,w);var nn={},Nc=null;function fs(){return Nc=Nc||new ve}nn.Ia="serverreachability";function Oc(o){w.call(this,nn.Ia,o)}m(Oc,w);function dr(o){const u=fs();Ce(u,new Oc(u))}nn.STAT_EVENT="statevent";function Dc(o,u){w.call(this,nn.STAT_EVENT,o),this.stat=u}m(Dc,w);function ke(o){const u=fs();Ce(u,new Dc(u,o))}nn.Ja="timingevent";function Vc(o,u){w.call(this,nn.Ja,o),this.size=u}m(Vc,w);function fr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function pr(){this.g=!0}pr.prototype.ua=function(){this.g=!1};function ym(o,u,d,p,R,P){o.info(function(){if(o.g)if(P){var D="",W=P.split("&");for(let ee=0;ee<W.length;ee++){var pe=W[ee].split("=");if(pe.length>1){const _e=pe[0];pe=pe[1];const rt=_e.split("_");D=rt.length>=2&&rt[1]=="type"?D+(_e+"="+pe+"&"):D+(_e+"=redacted&")}}}else D=null;else D=P;return"XMLHTTP REQ ("+p+") [attempt "+R+"]: "+u+`
`+d+`
`+D})}function Em(o,u,d,p,R,P,D){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+R+"]: "+u+`
`+d+`
`+P+" "+D})}function On(o,u,d,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+wm(o,d)+(p?" "+p:"")})}function Tm(o,u){o.info(function(){return"TIMEOUT: "+u})}pr.prototype.info=function(){};function wm(o,u){if(!o.g)return u;if(!u)return null;try{const P=JSON.parse(u);if(P){for(o=0;o<P.length;o++)if(Array.isArray(P[o])){var d=P[o];if(!(d.length<2)){var p=d[1];if(Array.isArray(p)&&!(p.length<1)){var R=p[0];if(R!="noop"&&R!="stop"&&R!="close")for(let D=1;D<p.length;D++)p[D]=""}}}}return to(P)}catch{return u}}var ps={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mc;function so(){}m(so,Cc),so.prototype.g=function(){return new XMLHttpRequest},Mc=new so;function mr(o){return encodeURIComponent(String(o))}function Im(o){var u=1;o=o.split(":");const d=[];for(;u>0&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function Pt(o,u,d,p){this.j=o,this.i=u,this.l=d,this.S=p||1,this.V=new lr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xc}function xc(){this.i=null,this.g="",this.h=!1}var Uc={},io={};function oo(o,u,d){o.M=1,o.A=gs(nt(u)),o.u=d,o.R=!0,Fc(o,null)}function Fc(o,u){o.F=Date.now(),ms(o),o.B=nt(o.A);var d=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),Yc(d.i,"t",p),o.C=0,d=o.j.L,o.h=new xc,o.g=gu(o.j,d?u:null,!o.u),o.P>0&&(o.O=new mm(h(o.Y,o,o.g),o.P)),u=o.V,d=o.g,p=o.ba;var R="readystatechange";Array.isArray(R)||(R&&(Sc[0]=R.toString()),R=Sc);for(let P=0;P<R.length;P++){const D=Ic(d,R[P],p||u.handleEvent,!1,u.h||u);if(!D)break;u.g[D.key]=D}u=o.J?Qe(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),dr(),ym(o.i,o.v,o.B,o.l,o.S,o.u)}Pt.prototype.ba=function(o){o=o.target;const u=this.O;u&&Nt(o)==3?u.j():this.Y(o)},Pt.prototype.Y=function(o){try{if(o==this.g)e:{const W=Nt(this.g),pe=this.g.ya(),ee=this.g.ca();if(!(W<3)&&(W!=3||this.g&&(this.h.h||this.g.la()||iu(this.g)))){this.K||W!=4||pe==7||(pe==8||ee<=0?dr(3):dr(2)),ao(this);var u=this.g.ca();this.X=u;var d=vm(this);if(this.o=u==200,Em(this.i,this.v,this.B,this.l,this.S,W,u),this.o){if(this.U&&!this.L){t:{if(this.g){var p,R=this.g;if((p=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(p)){var P=p;break t}}P=null}if(o=P)On(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,co(this,o);else{this.o=!1,this.m=3,ke(12),rn(this),gr(this);break e}}if(this.R){o=!0;let _e;for(;!this.K&&this.C<d.length;)if(_e=Am(this,d),_e==io){W==4&&(this.m=4,ke(14),o=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(_e==Uc){this.m=4,ke(15),On(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else On(this.i,this.l,_e,null),co(this,_e);if(Bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),W!=4||d.length!=0||this.h.h||(this.m=1,ke(16),o=!1),this.o=this.o&&o,!o)On(this.i,this.l,d,"[Invalid Chunked Response]"),rn(this),gr(this);else if(d.length>0&&!this.W){this.W=!0;var D=this.j;D.g==this&&D.aa&&!D.P&&(D.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),_o(D),D.P=!0,ke(11))}}else On(this.i,this.l,d,null),co(this,d);W==4&&rn(this),this.o&&!this.K&&(W==4?du(this.j,this):(this.o=!1,ms(this)))}else Um(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,ke(12)):(this.m=0,ke(13)),rn(this),gr(this)}}}catch{}finally{}};function vm(o){if(!Bc(o))return o.g.la();const u=iu(o.g);if(u==="")return"";let d="";const p=u.length,R=Nt(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return rn(o),gr(o),"";o.h.i=new a.TextDecoder}for(let P=0;P<p;P++)o.h.h=!0,d+=o.h.i.decode(u[P],{stream:!(R&&P==p-1)});return u.length=0,o.h.g+=d,o.C=0,o.h.g}function Bc(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Am(o,u){var d=o.C,p=u.indexOf(`
`,d);return p==-1?io:(d=Number(u.substring(d,p)),isNaN(d)?Uc:(p+=1,p+d>u.length?io:(u=u.slice(p,p+d),o.C=p+d,u)))}Pt.prototype.cancel=function(){this.K=!0,rn(this)};function ms(o){o.T=Date.now()+o.H,qc(o,o.H)}function qc(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=fr(h(o.aa,o),u)}function ao(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Pt.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Tm(this.i,this.B),this.M!=2&&(dr(),ke(17)),rn(this),this.m=2,gr(this)):qc(this,this.T-o)};function gr(o){o.j.I==0||o.K||du(o.j,o)}function rn(o){ao(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,Pc(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function co(o,u){try{var d=o.j;if(d.I!=0&&(d.g==o||uo(d.h,o))){if(!o.L&&uo(d.h,o)&&d.I==3){try{var p=d.Ba.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var R=p;if(R[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)ws(d),Es(d);else break e;go(d),ke(18)}}else d.xa=R[1],0<d.xa-d.K&&R[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=fr(h(d.Va,d),6e3));zc(d.h)<=1&&d.ta&&(d.ta=void 0)}else on(d,11)}else if((o.L||d.g==o)&&ws(d),!_(u))for(R=d.Ba.g.parse(u),u=0;u<R.length;u++){let ee=R[u];const _e=ee[0];if(!(_e<=d.K))if(d.K=_e,ee=ee[1],d.I==2)if(ee[0]=="c"){d.M=ee[1],d.ba=ee[2];const rt=ee[3];rt!=null&&(d.ka=rt,d.j.info("VER="+d.ka));const an=ee[4];an!=null&&(d.za=an,d.j.info("SVER="+d.za));const Ot=ee[5];Ot!=null&&typeof Ot=="number"&&Ot>0&&(p=1.5*Ot,d.O=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const Dt=o.g;if(Dt){const vs=Dt.g?Dt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vs){var P=p.h;P.g||vs.indexOf("spdy")==-1&&vs.indexOf("quic")==-1&&vs.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(lo(P,P.h),P.h=null))}if(p.G){const yo=Dt.g?Dt.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(p.wa=yo,te(p.J,p.G,yo))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),p=d;var D=o;if(p.na=mu(p,p.L?p.ba:null,p.W),D.L){Hc(p.h,D);var W=D,pe=p.O;pe&&(W.H=pe),W.D&&(ao(W),ms(W)),p.g=D}else lu(p);d.i.length>0&&Ts(d)}else ee[0]!="stop"&&ee[0]!="close"||on(d,7);else d.I==3&&(ee[0]=="stop"||ee[0]=="close"?ee[0]=="stop"?on(d,7):mo(d):ee[0]!="noop"&&d.l&&d.l.qa(ee),d.A=0)}}dr(4)}catch{}}var Rm=class{constructor(o,u){this.g=o,this.map=u}};function jc(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $c(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function zc(o){return o.h?1:o.g?o.g.size:0}function uo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function lo(o,u){o.g?o.g.add(u):o.h=u}function Hc(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}jc.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Wc(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const d of o.g.values())u=u.concat(d.G);return u}return C(o.i)}var Gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bm(o,u){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const p=o[d].indexOf("=");let R,P=null;p>=0?(R=o[d].substring(0,p),P=o[d].substring(p+1)):R=o[d],u(R,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Ct(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof Ct?(this.l=o.l,_r(this,o.j),this.o=o.o,this.g=o.g,yr(this,o.u),this.h=o.h,ho(this,Zc(o.i)),this.m=o.m):o&&(u=String(o).match(Gc))?(this.l=!1,_r(this,u[1]||"",!0),this.o=Er(u[2]||""),this.g=Er(u[3]||"",!0),yr(this,u[4]),this.h=Er(u[5]||"",!0),ho(this,u[6]||"",!0),this.m=Er(u[7]||"")):(this.l=!1,this.i=new wr(null,this.l))}Ct.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(Tr(u,Kc,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Tr(u,Kc,!0),"@"),o.push(mr(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Tr(d,d.charAt(0)=="/"?Cm:Pm,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Tr(d,Nm)),o.join("")},Ct.prototype.resolve=function(o){const u=nt(this);let d=!!o.j;d?_r(u,o.j):d=!!o.o,d?u.o=o.o:d=!!o.g,d?u.g=o.g:d=o.u!=null;var p=o.h;if(d)yr(u,o.u);else if(d=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var R=u.h.lastIndexOf("/");R!=-1&&(p=u.h.slice(0,R+1)+p)}if(R=p,R==".."||R==".")p="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){p=R.lastIndexOf("/",0)==0,R=R.split("/");const P=[];for(let D=0;D<R.length;){const W=R[D++];W=="."?p&&D==R.length&&P.push(""):W==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),p&&D==R.length&&P.push("")):(P.push(W),p=!0)}p=P.join("/")}else p=R}return d?u.h=p:d=o.i.toString()!=="",d?ho(u,Zc(o.i)):d=!!o.m,d&&(u.m=o.m),u};function nt(o){return new Ct(o)}function _r(o,u,d){o.j=d?Er(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function yr(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function ho(o,u,d){u instanceof wr?(o.i=u,Om(o.i,o.l)):(d||(u=Tr(u,km)),o.i=new wr(u,o.l))}function te(o,u,d){o.i.set(u,d)}function gs(o){return te(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Er(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Tr(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Sm),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Sm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Kc=/[#\/\?@]/g,Pm=/[#\?:]/g,Cm=/[#\?]/g,km=/[#\?@]/g,Nm=/#/g;function wr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function sn(o){o.g||(o.g=new Map,o.h=0,o.i&&bm(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=wr.prototype,n.add=function(o,u){sn(this),this.i=null,o=Dn(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Qc(o,u){sn(o),u=Dn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Xc(o,u){return sn(o),u=Dn(o,u),o.g.has(u)}n.forEach=function(o,u){sn(this),this.g.forEach(function(d,p){d.forEach(function(R){o.call(u,R,p,this)},this)},this)};function Jc(o,u){sn(o);let d=[];if(typeof u=="string")Xc(o,u)&&(d=d.concat(o.g.get(Dn(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)d=d.concat(o[u]);return d}n.set=function(o,u){return sn(this),this.i=null,o=Dn(this,o),Xc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=Jc(this,o),o.length>0?String(o[0]):u):u};function Yc(o,u,d){Qc(o,u),d.length>0&&(o.i=null,o.g.set(Dn(o,u),C(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let p=0;p<u.length;p++){var d=u[p];const R=mr(d);d=Jc(this,d);for(let P=0;P<d.length;P++){let D=R;d[P]!==""&&(D+="="+mr(d[P])),o.push(D)}}return this.i=o.join("&")};function Zc(o){const u=new wr;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function Dn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Om(o,u){u&&!o.j&&(sn(o),o.i=null,o.g.forEach(function(d,p){const R=p.toLowerCase();p!=R&&(Qc(this,p),Yc(this,R,d))},o)),o.j=u}function Dm(o,u){const d=new pr;if(a.Image){const p=new Image;p.onload=f(kt,d,"TestLoadImage: loaded",!0,u,p),p.onerror=f(kt,d,"TestLoadImage: error",!1,u,p),p.onabort=f(kt,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=f(kt,d,"TestLoadImage: timeout",!1,u,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function Vm(o,u){const d=new pr,p=new AbortController,R=setTimeout(()=>{p.abort(),kt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(P=>{clearTimeout(R),P.ok?kt(d,"TestPingServer: ok",!0,u):kt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),kt(d,"TestPingServer: error",!1,u)})}function kt(o,u,d,p,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),p(d)}catch{}}function Lm(){this.g=new _m}function fo(o){this.i=o.Sb||null,this.h=o.ab||!1}m(fo,Cc),fo.prototype.g=function(){return new _s(this.i,this.h)};function _s(o,u){ve.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(_s,ve),n=_s.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,vr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eu(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function eu(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Ir(this):vr(this),this.readyState==3&&eu(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,Ir(this))},n.Na=function(o){this.g&&(this.response=o,Ir(this))},n.ga=function(){this.g&&Ir(this)};function Ir(o){o.readyState=4,o.l=null,o.j=null,o.B=null,vr(o)}n.setRequestHeader=function(o,u){this.A.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function vr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function tu(o){let u="";return tn(o,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function po(o,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=tu(d),typeof o=="string"?d!=null&&mr(d):te(o,u,d))}function ue(o){ve.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(ue,ve);var Mm=/^https?$/i,xm=["POST","PUT"];n=ue.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mc.g(),this.g.onreadystatechange=E(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(P){nu(this,P);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var R in p)d.set(R,p[R]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const P of p.keys())d.set(P,p.get(P));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(P=>P.toLowerCase()=="content-type"),R=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(xm,u,void 0)>=0)||p||R||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,D]of d)this.g.setRequestHeader(P,D);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(P){nu(this,P)}};function nu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,ru(o),ys(o)}function ru(o){o.A||(o.A=!0,Ce(o,"complete"),Ce(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Ce(this,"complete"),Ce(this,"abort"),ys(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ys(this,!0)),ue.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?su(this):this.Xa())},n.Xa=function(){su(this)};function su(o){if(o.h&&typeof i<"u"){if(o.v&&Nt(o)==4)setTimeout(o.Ca.bind(o),0);else if(Ce(o,"readystatechange"),Nt(o)==4){o.h=!1;try{const P=o.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=P===0){let D=String(o.D).match(Gc)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),p=!Mm.test(D?D.toLowerCase():"")}d=p}if(d)Ce(o,"complete"),Ce(o,"success");else{o.o=6;try{var R=Nt(o)>2?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.ca()+"]",ru(o)}}finally{ys(o)}}}}function ys(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,u||Ce(o,"ready");try{d.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Nt(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Nt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),gm(u)}};function iu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Um(o){const u={};o=(o.g&&Nt(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(_(o[p]))continue;var d=Im(o[p]);const R=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const P=u[R]||[];u[R]=P,P.push(d)}Ki(u,function(p){return p.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ar(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function ou(o){this.za=0,this.i=[],this.j=new pr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ar("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ar("baseRetryDelayMs",5e3,o),this.Za=Ar("retryDelaySeedMs",1e4,o),this.Ta=Ar("forwardChannelMaxRetries",2,o),this.va=Ar("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new jc(o&&o.concurrentRequestLimit),this.Ba=new Lm,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ou.prototype,n.ka=8,n.I=1,n.connect=function(o,u,d,p){ke(0),this.W=o,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.J=mu(this,null,this.W),Ts(this)};function mo(o){if(au(o),o.I==3){var u=o.V++,d=nt(o.J);if(te(d,"SID",o.M),te(d,"RID",u),te(d,"TYPE","terminate"),Rr(o,d),u=new Pt(o,o.j,u),u.M=2,u.A=gs(nt(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=u.A,d=!0),d||(u.g=gu(u.j,null),u.g.ea(u.A)),u.F=Date.now(),ms(u)}pu(o)}function Es(o){o.g&&(_o(o),o.g.cancel(),o.g=null)}function au(o){Es(o),o.v&&(a.clearTimeout(o.v),o.v=null),ws(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Ts(o){if(!$c(o.h)&&!o.m){o.m=!0;var u=o.Ea;J||g(),Y||(J(),Y=!0),T.add(u,o),o.D=0}}function Fm(o,u){return zc(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=fr(h(o.Ea,o,u),fu(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const R=new Pt(this,this.j,o);let P=this.o;if(this.U&&(P?(P=Qe(P),kn(P,this.U)):P=this.U),this.u!==null||this.R||(R.J=P,P=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=uu(this,R,u),d=nt(this.J),te(d,"RID",o),te(d,"CVER",22),this.G&&te(d,"X-HTTP-Session-Id",this.G),Rr(this,d),P&&(this.R?u="headers="+mr(tu(P))+"&"+u:this.u&&po(d,this.u,P)),lo(this.h,R),this.Ra&&te(d,"TYPE","init"),this.S?(te(d,"$req",u),te(d,"SID","null"),R.U=!0,oo(R,d,null)):oo(R,d,u),this.I=2}}else this.I==3&&(o?cu(this,o):this.i.length==0||$c(this.h)||cu(this))};function cu(o,u){var d;u?d=u.l:d=o.V++;const p=nt(o.J);te(p,"SID",o.M),te(p,"RID",d),te(p,"AID",o.K),Rr(o,p),o.u&&o.o&&po(p,o.u,o.o),d=new Pt(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),u&&(o.i=u.G.concat(o.i)),u=uu(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),lo(o.h,d),oo(d,p,u)}function Rr(o,u){o.H&&tn(o.H,function(d,p){te(u,p,d)}),o.l&&tn({},function(d,p){te(u,p,d)})}function uu(o,u,d){d=Math.min(o.i.length,d);const p=o.l?h(o.l.Ka,o.l,o):null;e:{var R=o.i;let W=-1;for(;;){const pe=["count="+d];W==-1?d>0?(W=R[0].g,pe.push("ofs="+W)):W=0:pe.push("ofs="+W);let ee=!0;for(let _e=0;_e<d;_e++){var P=R[_e].g;const rt=R[_e].map;if(P-=W,P<0)W=Math.max(0,R[_e].g-100),ee=!1;else try{P="req"+P+"_"||"";try{var D=rt instanceof Map?rt:Object.entries(rt);for(const[an,Ot]of D){let Dt=Ot;c(Ot)&&(Dt=to(Ot)),pe.push(P+an+"="+encodeURIComponent(Dt))}}catch(an){throw pe.push(P+"type="+encodeURIComponent("_badmap")),an}}catch{p&&p(rt)}}if(ee){D=pe.join("&");break e}}D=void 0}return o=o.i.splice(0,d),u.G=o,D}function lu(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;J||g(),Y||(J(),Y=!0),T.add(u,o),o.A=0}}function go(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=fr(h(o.Da,o),fu(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,hu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=fr(h(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ke(10),Es(this),hu(this))};function _o(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function hu(o){o.g=new Pt(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=nt(o.na);te(u,"RID","rpc"),te(u,"SID",o.M),te(u,"AID",o.K),te(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&te(u,"TO",o.ia),te(u,"TYPE","xmlhttp"),Rr(o,u),o.u&&o.o&&po(u,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=gs(nt(u)),d.u=null,d.R=!0,Fc(d,o)}n.Va=function(){this.C!=null&&(this.C=null,Es(this),go(this),ke(19))};function ws(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function du(o,u){var d=null;if(o.g==u){ws(o),_o(o),o.g=null;var p=2}else if(uo(o.h,u))d=u.G,Hc(o.h,u),p=1;else return;if(o.I!=0){if(u.o)if(p==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var R=o.D;p=fs(),Ce(p,new Vc(p,d)),Ts(o)}else lu(o);else if(R=u.m,R==3||R==0&&u.X>0||!(p==1&&Fm(o,u)||p==2&&go(o)))switch(d&&d.length>0&&(u=o.h,u.i=u.i.concat(d)),R){case 1:on(o,5);break;case 4:on(o,10);break;case 3:on(o,6);break;default:on(o,2)}}}function fu(o,u){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*u}function on(o,u){if(o.j.info("Error code "+u),u==2){var d=h(o.bb,o),p=o.Ua;const R=!p;p=new Ct(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_r(p,"https"),gs(p),R?Dm(p.toString(),d):Vm(p.toString(),d)}else ke(2);o.I=0,o.l&&o.l.pa(u),pu(o),au(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function pu(o){if(o.I=0,o.ja=[],o.l){const u=Wc(o.h);(u.length!=0||o.i.length!=0)&&(v(o.ja,u),v(o.ja,o.i),o.h.i.length=0,C(o.i),o.i.length=0),o.l.oa()}}function mu(o,u,d){var p=d instanceof Ct?nt(d):new Ct(d);if(p.g!="")u&&(p.g=u+"."+p.g),yr(p,p.u);else{var R=a.location;p=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;const P=new Ct(null);p&&_r(P,p),u&&(P.g=u),R&&yr(P,R),d&&(P.h=d),p=P}return d=o.G,u=o.wa,d&&u&&te(p,d,u),te(p,"VER",o.ka),Rr(o,p),p}function gu(o,u,d){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new ue(new fo({ab:d})):new ue(o.ma),u.Fa(o.L),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}n=_u.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Is(){}Is.prototype.g=function(o,u){return new Be(o,u)};function Be(o,u){ve.call(this),this.g=new ou(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!_(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!_(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Vn(this)}m(Be,ve),Be.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){mo(this.g)},Be.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=to(o),o=d);u.i.push(new Rm(u.Ya++,o)),u.I==3&&Ts(u)},Be.prototype.N=function(){this.g.l=null,delete this.j,mo(this.g),delete this.g,Be.Z.N.call(this)};function yu(o){no.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}m(yu,no);function Eu(){ro.call(this),this.status=1}m(Eu,ro);function Vn(o){this.g=o}m(Vn,_u),Vn.prototype.ra=function(){Ce(this.g,"a")},Vn.prototype.qa=function(o){Ce(this.g,new yu(o))},Vn.prototype.pa=function(o){Ce(this.g,new Eu)},Vn.prototype.oa=function(){Ce(this.g,"b")},Is.prototype.createWebChannel=Is.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,yf=function(){return new Is},_f=function(){return fs()},gf=nn,ea={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ps.NO_ERROR=0,ps.TIMEOUT=8,ps.HTTP_ERROR=6,$s=ps,Lc.COMPLETE="complete",mf=Lc,kc.EventType=hr,hr.OPEN="a",hr.CLOSE="b",hr.ERROR="c",hr.MESSAGE="d",ve.prototype.listen=ve.prototype.J,kr=kc,ue.prototype.listenOnce=ue.prototype.K,ue.prototype.getLastError=ue.prototype.Ha,ue.prototype.getLastErrorCode=ue.prototype.ya,ue.prototype.getStatus=ue.prototype.ca,ue.prototype.getResponseJson=ue.prototype.La,ue.prototype.getResponseText=ue.prototype.la,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Fa,pf=ue}).apply(typeof bs<"u"?bs:typeof self<"u"?self:typeof window<"u"?window:{});const Il="@firebase/firestore",vl="4.9.2";class Re{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Re.UNAUTHENTICATED=new Re(null),Re.GOOGLE_CREDENTIALS=new Re("google-credentials-uid"),Re.FIRST_PARTY=new Re("first-party-uid"),Re.MOCK_USER=new Re("mock-user");let sr="12.3.0";const wn=new Ri("@firebase/firestore");function Mn(){return wn.logLevel}function V(n,...e){if(wn.logLevel<=G.DEBUG){const t=e.map(Ba);wn.debug(`Firestore (${sr}): ${n}`,...t)}}function Rt(n,...e){if(wn.logLevel<=G.ERROR){const t=e.map(Ba);wn.error(`Firestore (${sr}): ${n}`,...t)}}function Qn(n,...e){if(wn.logLevel<=G.WARN){const t=e.map(Ba);wn.warn(`Firestore (${sr}): ${n}`,...t)}}function Ba(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Ef(n,r,t)}function Ef(n,e,t){let r=`FIRESTORE (${sr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Rt(r),new Error(r)}function Z(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Ef(e,s,r)}function z(n,e){return n}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends Ke{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jt{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Tf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Re.UNAUTHENTICATED)))}shutdown(){}}class FI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BI{constructor(e){this.t=e,this.currentUser=Re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new jt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jt,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jt)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string",31837,{l:r}),new Tf(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string",2055,{h:e}),new Re(e)}}class qI{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Re.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jI{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Re.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Al{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $I{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Le(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Z(this.o===void 0,3512);const r=i=>{i.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,V("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Al(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Z(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Al(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function zI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class qa{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=zI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function K(n,e){return n<e?-1:n>e?1:0}function ta(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return Oo(s)===Oo(i)?K(s,i):Oo(s)?1:-1}return K(n.length,e.length)}const HI=55296,WI=57343;function Oo(n){const e=n.charCodeAt(0);return e>=HI&&e<=WI}function Xn(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}const Rl="__name__";class it{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return it.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof it?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=it.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return K(e.length,t.length)}static compareSegments(e,t){const r=it.isNumericId(e),s=it.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?it.extractNumericId(e).compare(it.extractNumericId(t)):ta(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qt.fromString(e.substring(4,e.length-2))}}class ne extends it{construct(e,t,r){return new ne(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new x(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ne(t)}static emptyPath(){return new ne([])}}const GI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Te extends it{construct(e,t,r){return new Te(e,t,r)}static isValidIdentifier(e){return GI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Te.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rl}static keyField(){return new Te([Rl])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new x(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new x(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new x(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new x(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Te(t)}static emptyPath(){return new Te([])}}class F{constructor(e){this.path=e}static fromPath(e){return new F(ne.fromString(e))}static fromName(e){return new F(ne.fromString(e).popFirst(5))}static empty(){return new F(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new ne(e.slice()))}}function wf(n,e,t){if(!t)throw new x(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KI(n,e,t,r){if(e===!0&&r===!0)throw new x(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bl(n){if(!F.isDocumentKey(n))throw new x(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Sl(n){if(F.isDocumentKey(n))throw new x(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function If(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ja(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q(12329,{type:typeof n})}function oi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ja(n);throw new x(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fe(n,e){const t={typeString:n};return e&&(t.value=e),t}function ss(n,e){if(!If(n))throw new x(O.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new x(O.INVALID_ARGUMENT,t);return!0}const Pl=-62135596800,Cl=1e6;class re{static now(){return re.fromMillis(Date.now())}static fromDate(e){return re.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Cl);return new re(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Pl)throw new x(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cl}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ss(e,re._jsonSchema))return new re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Pl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}re._jsonSchemaVersion="firestore/timestamp/1.0",re._jsonSchema={type:fe("string",re._jsonSchemaVersion),seconds:fe("number"),nanoseconds:fe("number")};class ${static fromTimestamp(e){return new $(e)}static min(){return new $(new re(0,0))}static max(){return new $(new re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const jr=-1;function QI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=$.fromTimestamp(r===1e9?new re(t+1,0):new re(t,r));return new Ht(s,F.empty(),e)}function XI(n){return new Ht(n.readTime,n.key,jr)}class Ht{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ht($.min(),F.empty(),jr)}static max(){return new Ht($.max(),F.empty(),jr)}}function JI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=F.comparator(n.documentKey,e.documentKey),t!==0?t:K(n.largestBatchId,e.largestBatchId))}const YI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ir(n){if(n.code!==O.FAILED_PRECONDITION||n.message!==YI)throw n;V("LocalStore","Unexpectedly lost primary lease")}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new N(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof N?t:N.resolve(t)}catch(t){return N.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):N.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):N.reject(t)}static resolve(e){return new N(((t,r)=>{t(e)}))}static reject(e){return new N(((t,r)=>{r(e)}))}static waitFor(e){return new N(((t,r)=>{let s=0,i=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++i,a&&i===s&&t()}),(l=>r(l)))})),a=!0,i===s&&t()}))}static or(e){let t=N.resolve(!1);for(const r of e)t=t.next((s=>s?N.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new N(((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let l=0;l<i;l++){const h=l;t(e[h]).next((f=>{a[h]=f,++c,c===i&&r(a)}),(f=>s(f)))}}))}static doWhile(e,t){return new N(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}function ev(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function or(n){return n.name==="IndexedDbTransactionError"}class Oi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oi.ce=-1;const $a=-1;function Di(n){return n==null}function ai(n){return n===0&&1/n==-1/0}function tv(n){return typeof n=="number"&&Number.isInteger(n)&&!ai(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const vf="";function nv(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kl(e)),e=rv(n.get(t),e);return kl(e)}function rv(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case vf:t+="";break;default:t+=i}}return t}function kl(n){return n+vf+""}function Nl(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Af(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class oe{constructor(e,t){this.comparator=e,this.root=t||Ee.EMPTY}insert(e,t){return new oe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ee.BLACK,null,null))}remove(e){return new oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ee.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ss(this.root,e,this.comparator,!0)}}class Ss{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ee{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Ee.RED,this.left=s??Ee.EMPTY,this.right=i??Ee.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Ee(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ee.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ee.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}}Ee.EMPTY=null,Ee.RED=!0,Ee.BLACK=!1;Ee.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Ee(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ge{constructor(e){this.comparator=e,this.data=new oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ol(this.data.getIterator())}getIteratorFrom(e){return new Ol(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ge)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ge(this.comparator);return t.data=e,t}}class Ol{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Je{constructor(e){this.fields=e,e.sort(Te.comparator)}static empty(){return new Je([])}unionWith(e){let t=new ge(Te.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Je(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xn(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Rf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ie{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Rf("Invalid base64 string: "+i):i}})(e);return new Ie(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new Ie(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ie.EMPTY_BYTE_STRING=new Ie("");const sv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wt(n){if(Z(!!n,39018),typeof n=="string"){let e=0;const t=sv.exec(n);if(Z(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:le(n.seconds),nanos:le(n.nanos)}}function le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gt(n){return typeof n=="string"?Ie.fromBase64String(n):Ie.fromUint8Array(n)}const bf="server_timestamp",Sf="__type__",Pf="__previous_value__",Cf="__local_write_time__";function za(n){return(n?.mapValue?.fields||{})[Sf]?.stringValue===bf}function Vi(n){const e=n.mapValue.fields[Pf];return za(e)?Vi(e):e}function $r(n){const e=Wt(n.mapValue.fields[Cf].timestampValue);return new re(e.seconds,e.nanos)}class iv{constructor(e,t,r,s,i,a,c,l,h,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=f}}const ci="(default)";class zr{constructor(e,t){this.projectId=e,this.database=t||ci}static empty(){return new zr("","")}get isDefaultDatabase(){return this.database===ci}isEqual(e){return e instanceof zr&&e.projectId===this.projectId&&e.database===this.database}}const kf="__type__",ov="__max__",Ps={mapValue:{}},Nf="__vector__",ui="value";function Kt(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?za(n)?4:cv(n)?9007199254740991:av(n)?10:11:q(28295,{value:n})}function dt(n,e){if(n===e)return!0;const t=Kt(n);if(t!==Kt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $r(n).isEqual($r(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Wt(s.timestampValue),c=Wt(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return Gt(s.bytesValue).isEqual(Gt(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return le(s.geoPointValue.latitude)===le(i.geoPointValue.latitude)&&le(s.geoPointValue.longitude)===le(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return le(s.integerValue)===le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=le(s.doubleValue),c=le(i.doubleValue);return a===c?ai(a)===ai(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return Xn(n.arrayValue.values||[],e.arrayValue.values||[],dt);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Nl(a)!==Nl(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!dt(a[l],c[l])))return!1;return!0})(n,e);default:return q(52216,{left:n})}}function Hr(n,e){return(n.values||[]).find((t=>dt(t,e)))!==void 0}function Jn(n,e){if(n===e)return 0;const t=Kt(n),r=Kt(e);if(t!==r)return K(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return K(n.booleanValue,e.booleanValue);case 2:return(function(i,a){const c=le(i.integerValue||i.doubleValue),l=le(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return Dl(n.timestampValue,e.timestampValue);case 4:return Dl($r(n),$r(e));case 5:return ta(n.stringValue,e.stringValue);case 6:return(function(i,a){const c=Gt(i),l=Gt(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,a){const c=i.split("/"),l=a.split("/");for(let h=0;h<c.length&&h<l.length;h++){const f=K(c[h],l[h]);if(f!==0)return f}return K(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,a){const c=K(le(i.latitude),le(a.latitude));return c!==0?c:K(le(i.longitude),le(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Vl(n.arrayValue,e.arrayValue);case 10:return(function(i,a){const c=i.fields||{},l=a.fields||{},h=c[ui]?.arrayValue,f=l[ui]?.arrayValue,m=K(h?.values?.length||0,f?.values?.length||0);return m!==0?m:Vl(h,f)})(n.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Ps.mapValue&&a===Ps.mapValue)return 0;if(i===Ps.mapValue)return 1;if(a===Ps.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),h=a.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){const E=ta(l[m],f[m]);if(E!==0)return E;const C=Jn(c[l[m]],h[f[m]]);if(C!==0)return C}return K(l.length,f.length)})(n.mapValue,e.mapValue);default:throw q(23264,{he:t})}}function Dl(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return K(n,e);const t=Wt(n),r=Wt(e),s=K(t.seconds,r.seconds);return s!==0?s:K(t.nanos,r.nanos)}function Vl(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Jn(t[s],r[s]);if(i)return i}return K(t.length,r.length)}function Yn(n){return na(n)}function na(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Wt(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Gt(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return F.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=na(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${na(t.fields[a])}`;return s+"}"})(n.mapValue):q(61005,{value:n})}function zs(n){switch(Kt(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vi(n);return e?16+zs(e):16;case 5:return 2*n.stringValue.length;case 6:return Gt(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+zs(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return bn(r.fields,((i,a)=>{s+=i.length+zs(a)})),s})(n.mapValue);default:throw q(13486,{value:n})}}function ra(n){return!!n&&"integerValue"in n}function Ha(n){return!!n&&"arrayValue"in n}function Ll(n){return!!n&&"nullValue"in n}function Ml(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hs(n){return!!n&&"mapValue"in n}function av(n){return(n?.mapValue?.fields||{})[kf]?.stringValue===Nf}function Lr(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return bn(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Lr(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lr(n.arrayValue.values[t]);return e}return{...n}}function cv(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ov}class ze{constructor(e){this.value=e}static empty(){return new ze({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lr(t)}setAll(e){let t=Te.emptyPath(),r={},s=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=c.popLast()}a?r[c.lastSegment()]=Lr(a):s.push(c.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Hs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Hs(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){bn(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new ze(Lr(this.value))}}function Of(n){const e=[];return bn(n.fields,((t,r)=>{const s=new Te([t]);if(Hs(r)){const i=Of(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new Je(e)}class be{constructor(e,t,r,s,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new be(e,0,$.min(),$.min(),$.min(),ze.empty(),0)}static newFoundDocument(e,t,r,s){return new be(e,1,t,$.min(),r,s,0)}static newNoDocument(e,t){return new be(e,2,t,$.min(),$.min(),ze.empty(),0)}static newUnknownDocument(e,t){return new be(e,3,t,$.min(),$.min(),ze.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ze.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ze.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class li{constructor(e,t){this.position=e,this.inclusive=t}}function xl(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],a=n.position[s];if(i.field.isKeyField()?r=F.comparator(F.fromName(a.referenceValue),t.key):r=Jn(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ul(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dt(n.position[t],e.position[t]))return!1;return!0}class hi{constructor(e,t="asc"){this.field=e,this.dir=t}}function uv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Df{}class me extends Df{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hv(e,t,r):t==="array-contains"?new pv(e,r):t==="in"?new mv(e,r):t==="not-in"?new gv(e,r):t==="array-contains-any"?new _v(e,r):new me(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dv(e,r):new fv(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jn(t,this.value)):t!==null&&Kt(this.value)===Kt(t)&&this.matchesComparison(Jn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ft extends Df{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ft(e,t)}matches(e){return Vf(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vf(n){return n.op==="and"}function Lf(n){return lv(n)&&Vf(n)}function lv(n){for(const e of n.filters)if(e instanceof ft)return!1;return!0}function sa(n){if(n instanceof me)return n.field.canonicalString()+n.op.toString()+Yn(n.value);if(Lf(n))return n.filters.map((e=>sa(e))).join(",");{const e=n.filters.map((t=>sa(t))).join(",");return`${n.op}(${e})`}}function Mf(n,e){return n instanceof me?(function(r,s){return s instanceof me&&r.op===s.op&&r.field.isEqual(s.field)&&dt(r.value,s.value)})(n,e):n instanceof ft?(function(r,s){return s instanceof ft&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,c)=>i&&Mf(a,s.filters[c])),!0):!1})(n,e):void q(19439)}function xf(n){return n instanceof me?(function(t){return`${t.field.canonicalString()} ${t.op} ${Yn(t.value)}`})(n):n instanceof ft?(function(t){return t.op.toString()+" {"+t.getFilters().map(xf).join(" ,")+"}"})(n):"Filter"}class hv extends me{constructor(e,t,r){super(e,t,r),this.key=F.fromName(r.referenceValue)}matches(e){const t=F.comparator(e.key,this.key);return this.matchesComparison(t)}}class dv extends me{constructor(e,t){super(e,"in",t),this.keys=Uf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fv extends me{constructor(e,t){super(e,"not-in",t),this.keys=Uf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Uf(n,e){return(e.arrayValue?.values||[]).map((t=>F.fromName(t.referenceValue)))}class pv extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ha(t)&&Hr(t.arrayValue,this.value)}}class mv extends me{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hr(this.value.arrayValue,t)}}class gv extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hr(this.value.arrayValue,t)}}class _v extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ha(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Hr(this.value.arrayValue,r)))}}class yv{constructor(e,t=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function Fl(n,e=null,t=[],r=[],s=null,i=null,a=null){return new yv(n,e,t,r,s,i,a)}function Wa(n){const e=z(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>sa(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Di(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Yn(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Yn(r))).join(",")),e.Te=t}return e.Te}function Ga(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Mf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ul(n.startAt,e.startAt)&&Ul(n.endAt,e.endAt)}function ia(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Li{constructor(e,t=null,r=[],s=[],i=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ev(n,e,t,r,s,i,a,c){return new Li(n,e,t,r,s,i,a,c)}function Ff(n){return new Li(n)}function Bl(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tv(n){return n.collectionGroup!==null}function Mr(n){const e=z(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new ge(Te.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new hi(i,r))})),t.has(Te.keyField().canonicalString())||e.Ie.push(new hi(Te.keyField(),r))}return e.Ie}function ct(n){const e=z(n);return e.Ee||(e.Ee=wv(e,Mr(n))),e.Ee}function wv(n,e){if(n.limitType==="F")return Fl(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new hi(s.field,i)}));const t=n.endAt?new li(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new li(n.startAt.position,n.startAt.inclusive):null;return Fl(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function oa(n,e,t){return new Li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mi(n,e){return Ga(ct(n),ct(e))&&n.limitType===e.limitType}function Bf(n){return`${Wa(ct(n))}|lt:${n.limitType}`}function xn(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>xf(s))).join(", ")}]`),Di(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Yn(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Yn(s))).join(",")),`Target(${r})`})(ct(n))}; limitType=${n.limitType})`}function xi(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):F.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of Mr(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(a,c,l){const h=xl(a,c,l);return a.inclusive?h<=0:h<0})(r.startAt,Mr(r),s)||r.endAt&&!(function(a,c,l){const h=xl(a,c,l);return a.inclusive?h>=0:h>0})(r.endAt,Mr(r),s))})(n,e)}function Iv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qf(n){return(e,t)=>{let r=!1;for(const s of Mr(n)){const i=vv(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function vv(n,e,t){const r=n.field.isKeyField()?F.comparator(e.key,t.key):(function(i,a,c){const l=a.data.field(i),h=c.data.field(i);return l!==null&&h!==null?Jn(l,h):q(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:n.dir})}}class Sn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bn(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Af(this.inner)}size(){return this.innerSize}}const Av=new oe(F.comparator);function bt(){return Av}const jf=new oe(F.comparator);function Nr(...n){let e=jf;for(const t of n)e=e.insert(t.key,t);return e}function $f(n){let e=jf;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function fn(){return xr()}function zf(){return xr()}function xr(){return new Sn((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Rv=new oe(F.comparator),bv=new ge(F.comparator);function Q(...n){let e=bv;for(const t of n)e=e.add(t);return e}const Sv=new ge(K);function Pv(){return Sv}function Ka(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ai(e)?"-0":e}}function Hf(n){return{integerValue:""+n}}function Cv(n,e){return tv(e)?Hf(e):Ka(n,e)}class Ui{constructor(){this._=void 0}}function kv(n,e,t){return n instanceof Wr?(function(s,i){const a={fields:{[Sf]:{stringValue:bf},[Cf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&za(i)&&(i=Vi(i)),i&&(a.fields[Pf]=i),{mapValue:a}})(t,e):n instanceof Gr?Gf(n,e):n instanceof Kr?Kf(n,e):(function(s,i){const a=Wf(s,i),c=ql(a)+ql(s.Ae);return ra(a)&&ra(s.Ae)?Hf(c):Ka(s.serializer,c)})(n,e)}function Nv(n,e,t){return n instanceof Gr?Gf(n,e):n instanceof Kr?Kf(n,e):t}function Wf(n,e){return n instanceof di?(function(r){return ra(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Wr extends Ui{}class Gr extends Ui{constructor(e){super(),this.elements=e}}function Gf(n,e){const t=Qf(e);for(const r of n.elements)t.some((s=>dt(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Kr extends Ui{constructor(e){super(),this.elements=e}}function Kf(n,e){let t=Qf(e);for(const r of n.elements)t=t.filter((s=>!dt(s,r)));return{arrayValue:{values:t}}}class di extends Ui{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ql(n){return le(n.integerValue||n.doubleValue)}function Qf(n){return Ha(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ov{constructor(e,t){this.field=e,this.transform=t}}function Dv(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Gr&&s instanceof Gr||r instanceof Kr&&s instanceof Kr?Xn(r.elements,s.elements,dt):r instanceof di&&s instanceof di?dt(r.Ae,s.Ae):r instanceof Wr&&s instanceof Wr})(n.transform,e.transform)}class Vv{constructor(e,t){this.version=e,this.transformResults=t}}class wt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wt}static exists(e){return new wt(void 0,e)}static updateTime(e){return new wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ws(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Fi{}function Xf(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yf(n.key,wt.none()):new is(n.key,n.data,wt.none());{const t=n.data,r=ze.empty();let s=new ge(Te.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Pn(n.key,r,new Je(s.toArray()),wt.none())}}function Lv(n,e,t){n instanceof is?(function(s,i,a){const c=s.value.clone(),l=$l(s.fieldTransforms,i,a.transformResults);c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Pn?(function(s,i,a){if(!Ws(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=$l(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(Jf(s)),l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Ur(n,e,t,r){return n instanceof is?(function(i,a,c,l){if(!Ws(i.precondition,a))return c;const h=i.value.clone(),f=zl(i.fieldTransforms,l,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof Pn?(function(i,a,c,l){if(!Ws(i.precondition,a))return c;const h=zl(i.fieldTransforms,l,a),f=a.data;return f.setAll(Jf(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(n,e,t,r):(function(i,a,c){return Ws(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function Mv(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=Wf(r.transform,s||null);i!=null&&(t===null&&(t=ze.empty()),t.set(r.field,i))}return t||null}function jl(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Xn(r,s,((i,a)=>Dv(i,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class is extends Fi{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pn extends Fi{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Jf(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function $l(n,e,t){const r=new Map;Z(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,Nv(a,c,t[s]))}return r}function zl(n,e,t){const r=new Map;for(const s of n){const i=s.transform,a=t.data.field(s.field);r.set(s.field,kv(i,a,e))}return r}class Yf extends Fi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xv extends Fi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uv{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Lv(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ur(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ur(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zf();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=t.has(s.key)?null:c;const l=Xf(a,c);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument($.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Q())}isEqual(e){return this.batchId===e.batchId&&Xn(this.mutations,e.mutations,((t,r)=>jl(t,r)))&&Xn(this.baseMutations,e.baseMutations,((t,r)=>jl(t,r)))}}class Qa{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Z(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return Rv})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Qa(e,t,r,s)}}class Fv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Bv{constructor(e,t){this.count=e,this.unchangedNames=t}}var de,X;function qv(n){switch(n){case O.OK:return q(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return q(15467,{code:n})}}function Zf(n){if(n===void 0)return Rt("GRPC error has no .code"),O.UNKNOWN;switch(n){case de.OK:return O.OK;case de.CANCELLED:return O.CANCELLED;case de.UNKNOWN:return O.UNKNOWN;case de.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case de.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case de.INTERNAL:return O.INTERNAL;case de.UNAVAILABLE:return O.UNAVAILABLE;case de.UNAUTHENTICATED:return O.UNAUTHENTICATED;case de.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case de.NOT_FOUND:return O.NOT_FOUND;case de.ALREADY_EXISTS:return O.ALREADY_EXISTS;case de.PERMISSION_DENIED:return O.PERMISSION_DENIED;case de.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case de.ABORTED:return O.ABORTED;case de.OUT_OF_RANGE:return O.OUT_OF_RANGE;case de.UNIMPLEMENTED:return O.UNIMPLEMENTED;case de.DATA_LOSS:return O.DATA_LOSS;default:return q(39323,{code:n})}}(X=de||(de={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";function jv(){return new TextEncoder}const $v=new qt([4294967295,4294967295],0);function Hl(n){const e=jv().encode(n),t=new ff;return t.update(e),new Uint8Array(t.digest())}function Wl(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qt([t,r],0),new qt([s,i],0)]}class Xa{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Or(`Invalid padding: ${t}`);if(r<0)throw new Or(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Or(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Or(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qt.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(qt.fromNumber(r)));return s.compare($v)===1&&(s=new qt([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Hl(e),[r,s]=Wl(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Xa(i,s,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const t=Hl(e),[r,s]=Wl(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Or extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bi{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,os.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Bi($.min(),s,new oe(K),bt(),Q())}}class os{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new os(r,t,Q(),Q(),Q())}}class Gs{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class ep{constructor(e,t){this.targetId=e,this.Ce=t}}class tp{constructor(e,t,r=Ie.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Gl{constructor(){this.ve=0,this.Fe=Kl(),this.Me=Ie.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Q(),t=Q(),r=Q();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:q(38017,{changeType:i})}})),new os(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Kl()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Z(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zv{constructor(e){this.Ge=e,this.ze=new Map,this.je=bt(),this.Je=Cs(),this.He=Cs(),this.Ye=new oe(K)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:q(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(ia(i))if(r===0){const a=new F(i.path);this.et(t,a,be.newNoDocument(a,$.min()))}else Z(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const c=this.ut(e),l=c?this.ct(c,e,a):1;if(l!==0){this.it(t);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let a,c;try{a=Gt(r).toUint8Array()}catch(l){if(l instanceof Rf)return Qn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Xa(a,s,i)}catch(l){return Qn(l instanceof Or?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,a)=>{const c=this.ot(a);if(c){if(i.current&&ia(c.target)){const l=new F(c.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,be.newNoDocument(l,e))}i.Be&&(t.set(a,i.ke()),i.qe())}}));let r=Q();this.He.forEach(((i,a)=>{let c=!0;a.forEachWhile((l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const s=new Bi(e,t,this.Ye,this.je,r);return this.je=bt(),this.Je=Cs(),this.He=Cs(),this.Ye=new oe(K),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Gl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ge(K),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ge(K),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gl),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Cs(){return new oe(F.comparator)}function Kl(){return new oe(F.comparator)}const Hv={asc:"ASCENDING",desc:"DESCENDING"},Wv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gv={and:"AND",or:"OR"};class Kv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function aa(n,e){return n.useProto3Json||Di(e)?e:{value:e}}function fi(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function np(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Qv(n,e){return fi(n,e.toTimestamp())}function ut(n){return Z(!!n,49232),$.fromTimestamp((function(t){const r=Wt(t);return new re(r.seconds,r.nanos)})(n))}function Ja(n,e){return ca(n,e).canonicalString()}function ca(n,e){const t=(function(s){return new ne(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function rp(n){const e=ne.fromString(n);return Z(cp(e),10190,{key:e.toString()}),e}function ua(n,e){return Ja(n.databaseId,e.path)}function Do(n,e){const t=rp(e);if(t.get(1)!==n.databaseId.projectId)throw new x(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new F(ip(t))}function sp(n,e){return Ja(n.databaseId,e)}function Xv(n){const e=rp(n);return e.length===4?ne.emptyPath():ip(e)}function la(n){return new ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ip(n){return Z(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ql(n,e,t){return{name:ua(n,e),fields:t.value.mapValue.fields}}function Jv(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:q(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(Z(f===void 0||typeof f=="string",58123),Ie.fromBase64String(f||"")):(Z(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ie.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const f=h.code===void 0?O.UNKNOWN:Zf(h.code);return new x(f,h.message||"")})(a);t=new tp(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Do(n,r.document.name),i=ut(r.document.updateTime),a=r.document.createTime?ut(r.document.createTime):$.min(),c=new ze({mapValue:{fields:r.document.fields}}),l=be.newFoundDocument(s,i,a,c),h=r.targetIds||[],f=r.removedTargetIds||[];t=new Gs(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Do(n,r.document),i=r.readTime?ut(r.readTime):$.min(),a=be.newNoDocument(s,i),c=r.removedTargetIds||[];t=new Gs([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Do(n,r.document),i=r.removedTargetIds||[];t=new Gs([],i,s,null)}else{if(!("filter"in e))return q(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new Bv(s,i),c=r.targetId;t=new ep(c,a)}}return t}function Yv(n,e){let t;if(e instanceof is)t={update:Ql(n,e.key,e.value)};else if(e instanceof Yf)t={delete:ua(n,e.key)};else if(e instanceof Pn)t={update:Ql(n,e.key,e.data),updateMask:aA(e.fieldMask)};else{if(!(e instanceof xv))return q(16599,{Vt:e.type});t={verify:ua(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const c=a.transform;if(c instanceof Wr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Kr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof di)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw q(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:Qv(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:q(27497)})(n,e.precondition)),t}function Zv(n,e){return n&&n.length>0?(Z(e!==void 0,14353),n.map((t=>(function(s,i){let a=s.updateTime?ut(s.updateTime):ut(i);return a.isEqual($.min())&&(a=ut(i)),new Vv(a,s.transformResults||[])})(t,e)))):[]}function eA(n,e){return{documents:[sp(n,e.path)]}}function tA(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sp(n,s);const i=(function(h){if(h.length!==0)return ap(ft.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((f=>(function(E){return{field:Un(E.field),direction:sA(E.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=aa(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function nA(n){let e=Xv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Z(r===1,65062);const f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(m){const E=op(m);return E instanceof ft&&Lf(E)?E.getFilters():[E]})(t.where));let a=[];t.orderBy&&(a=(function(m){return m.map((E=>(function(v){return new hi(Fn(v.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(E)))})(t.orderBy));let c=null;t.limit&&(c=(function(m){let E;return E=typeof m=="object"?m.value:m,Di(E)?null:E})(t.limit));let l=null;t.startAt&&(l=(function(m){const E=!!m.before,C=m.values||[];return new li(C,E)})(t.startAt));let h=null;return t.endAt&&(h=(function(m){const E=!m.before,C=m.values||[];return new li(C,E)})(t.endAt)),Ev(e,s,a,i,c,"F",l,h)}function rA(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function op(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fn(t.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fn(t.unaryFilter.field);return me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fn(t.unaryFilter.field);return me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Fn(t.unaryFilter.field);return me.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(n):n.fieldFilter!==void 0?(function(t){return me.create(Fn(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ft.create(t.compositeFilter.filters.map((r=>op(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(t.compositeFilter.op))})(n):q(30097,{filter:n})}function sA(n){return Hv[n]}function iA(n){return Wv[n]}function oA(n){return Gv[n]}function Un(n){return{fieldPath:n.canonicalString()}}function Fn(n){return Te.fromServerFormat(n.fieldPath)}function ap(n){return n instanceof me?(function(t){if(t.op==="=="){if(Ml(t.value))return{unaryFilter:{field:Un(t.field),op:"IS_NAN"}};if(Ll(t.value))return{unaryFilter:{field:Un(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ml(t.value))return{unaryFilter:{field:Un(t.field),op:"IS_NOT_NAN"}};if(Ll(t.value))return{unaryFilter:{field:Un(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Un(t.field),op:iA(t.op),value:t.value}}})(n):n instanceof ft?(function(t){const r=t.getFilters().map((s=>ap(s)));return r.length===1?r[0]:{compositeFilter:{op:oA(t.op),filters:r}}})(n):q(54877,{filter:n})}function aA(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cp(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ut{constructor(e,t,r,s,i=$.min(),a=$.min(),c=Ie.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new Ut(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ut(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ut(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ut(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class cA{constructor(e){this.yt=e}}function uA(n){const e=nA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?oa(e,e.limit,"L"):e}class lA{constructor(){this.Cn=new hA}addToCollectionParentIndex(e,t){return this.Cn.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(Ht.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(Ht.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}}class hA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new ge(ne.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ge(ne.comparator)).toArray()}}const Xl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},up=41943040;class De{static withCacheSize(e){return new De(e,De.DEFAULT_COLLECTION_PERCENTILE,De.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}De.DEFAULT_COLLECTION_PERCENTILE=10,De.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,De.DEFAULT=new De(up,De.DEFAULT_COLLECTION_PERCENTILE,De.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),De.DISABLED=new De(-1,0,0);class Zn{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zn(0)}static cr(){return new Zn(-1)}}const Jl="LruGarbageCollector",dA=1048576;function Yl([n,e],[t,r]){const s=K(n,t);return s===0?K(e,r):s}class fA{constructor(e){this.Ir=e,this.buffer=new ge(Yl),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Yl(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){V(Jl,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){or(t)?V(Jl,"Ignoring IndexedDB error during garbage collection: ",t):await ir(t)}await this.Vr(3e5)}))}}class mA{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return N.resolve(Oi.ce);const r=new fA(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(Xl)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xl):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,a,c,l,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s)))).next((m=>(r=m,c=Date.now(),this.removeTargets(e,r,t)))).next((m=>(i=m,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(h=Date.now(),Mn()<=G.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${m} documents in `+(h-l)+`ms
Total Duration: ${h-f}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function gA(n,e){return new mA(n,e)}class _A{constructor(){this.changes=new Sn((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,be.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class EA{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ur(r.mutation,s,Je.empty(),re.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Q()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Q()){const s=fn();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let a=Nr();return i.forEach(((c,l)=>{a=a.insert(c,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=fn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Q())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,s){let i=bt();const a=xr(),c=(function(){return xr()})();return t.forEach(((l,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Pn)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Ur(f.mutation,h,f.mutation.getFieldMask(),re.now())):a.set(h.key,Je.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((h,f)=>a.set(h,f))),t.forEach(((h,f)=>c.set(h,new yA(f,a.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=xr();let s=new oe(((a,c)=>a-c)),i=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((l=>{const h=t.get(l);if(h===null)return;let f=r.get(l)||Je.empty();f=c.applyToLocalView(h,f),r.set(l,f);const m=(s.get(c.batchId)||Q()).add(l);s=s.insert(c.batchId,m)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,f=l.value,m=zf();f.forEach((E=>{if(!i.has(E)){const C=Xf(t.get(E),r.get(E));C!==null&&m.set(E,C),i=i.add(E)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return N.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):N.resolve(fn());let c=jr,l=i;return a.next((h=>N.forEach(h,((f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?N.resolve():this.remoteDocumentCache.getEntry(e,f).next((E=>{l=l.insert(f,E)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,l,h,Q()))).next((f=>({batchId:c,changes:$f(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new F(t)).next((r=>{let s=Nr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let a=Nr();return this.indexManager.getCollectionParents(e,i).next((c=>N.forEach(c,(l=>{const h=(function(m,E){return new Li(E,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((f=>{f.forEach(((m,E)=>{a=a.insert(m,E)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((a=>{i.forEach(((l,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,be.newInvalidDocument(f)))}));let c=Nr();return a.forEach(((l,h)=>{const f=i.get(l);f!==void 0&&Ur(f.mutation,h,Je.empty(),re.now()),xi(t,h)&&(c=c.insert(l,h))})),c}))}}class TA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return N.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ut(s.createTime)}})(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:uA(s.bundledQuery),readTime:ut(s.readTime)}})(t)),N.resolve()}}class wA{constructor(){this.overlays=new oe(F.comparator),this.qr=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fn();return N.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.St(e,t,i)})),N.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){const s=fn(),i=t.length+1,a=new F(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return N.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new oe(((h,f)=>h-f));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=fn(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=fn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((h,f)=>c.set(h,f))),!(c.size()>=s)););return N.resolve(c)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Fv(t,r));let i=this.qr.get(t);i===void 0&&(i=Q(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}class IA{constructor(){this.sessionToken=Ie.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}}class Ya{constructor(){this.Qr=new ge(ye.$r),this.Ur=new ge(ye.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ye(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ye(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new F(new ne([])),r=new ye(t,e),s=new ye(t,e+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new F(new ne([])),r=new ye(t,e),s=new ye(t,e+1);let i=Q();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const t=new ye(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ye{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return F.comparator(e.key,t.key)||K(e.Yr,t.Yr)}static Kr(e,t){return K(e.Yr,t.Yr)||F.comparator(e.key,t.key)}}class vA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ge(ye.$r)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Uv(i,t,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new ye(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return N.resolve(a)}lookupMutationBatch(e,t){return N.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return N.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?$a:this.tr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ye(t,0),s=new ye(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const c=this.Xr(a.Yr);i.push(c)})),N.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ge(K);return t.forEach((s=>{const i=new ye(s,0),a=new ye(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(c=>{r=r.add(c.Yr)}))})),N.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;F.isDocumentKey(i)||(i=i.child(""));const a=new ye(new F(i),0);let c=new ge(K);return this.Zr.forEachWhile((l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(l.Yr)),!0)}),a),N.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Z(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return N.forEach(t.mutations,(s=>{const i=new ye(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new ye(t,0),s=this.Zr.firstAfterOrEqual(r);return N.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AA{constructor(e){this.ri=e,this.docs=(function(){return new oe(F.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():be.newInvalidDocument(t))}getEntries(e,t){let r=bt();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():be.newInvalidDocument(s))})),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=bt();const a=t.path,c=new F(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:f}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||JI(XI(f),r)<=0||(s.has(f.key)||xi(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return N.resolve(i)}getAllFromCollectionGroup(e,t,r,s){q(9500)}ii(e,t){return N.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new RA(this)}getSize(e){return N.resolve(this.size)}}class RA extends _A{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),N.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class bA{constructor(e){this.persistence=e,this.si=new Sn((t=>Wa(t)),Ga),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new Ya,this.targetCount=0,this.ai=Zn.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),N.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zn(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Pr(t),N.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),N.waitFor(i).next((()=>s))}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),N.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),N.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this._i.containsKey(t))}}class lp{constructor(e,t){this.ui={},this.overlays={},this.ci=new Oi(0),this.li=!1,this.li=!0,this.hi=new IA,this.referenceDelegate=e(this),this.Pi=new bA(this),this.indexManager=new lA,this.remoteDocumentCache=(function(s){return new AA(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new cA(t),this.Ii=new TA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new vA(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);const s=new SA(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,t){return N.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class SA extends ZI{constructor(e){super(),this.currentSequenceNumber=e}}class Za{constructor(e){this.persistence=e,this.Ri=new Ya,this.Vi=null}static mi(e){return new Za(e)}get fi(){if(this.Vi)return this.Vi;throw q(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),N.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.fi,(r=>{const s=F.fromPath(r);return this.gi(e,s).next((i=>{i||t.removeEntry(s,$.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return N.or([()=>N.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pi{constructor(e,t){this.persistence=e,this.pi=new Sn((r=>nv(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=gA(this,t)}static mi(e,t){return new pi(e,t)}Ei(){}di(e){return N.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return N.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?N.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,t).next((c=>{c||(r++,i.removeEntry(a,$.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),N.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),N.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zs(e.data.value)),t}br(e,t,r){return N.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return N.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ec{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Q(),s=Q();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ec(e,t.fromCache,r,s)}}class PA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class CA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return N_()?8:ev(Pe())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(e,t,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new PA;return this.Ss(e,t,a).next((c=>{if(i.result=c,this.Vs)return this.bs(e,t,a,c.size)}))})).next((()=>i.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(Mn()<=G.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",xn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),N.resolve()):(Mn()<=G.DEBUG&&V("QueryEngine","Query:",xn(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Mn()<=G.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",xn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ct(t))):N.resolve())}ys(e,t){if(Bl(t))return N.resolve(null);let r=ct(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=oa(t,null,"F"),r=ct(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=Q(...i);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const h=this.Ds(t,c);return this.Cs(t,h,a,l.readTime)?this.ys(e,oa(t,null,"F")):this.vs(e,h,t,l)}))))})))))}ws(e,t,r,s){return Bl(t)||s.isEqual($.min())?N.resolve(null):this.ps.getDocuments(e,r).next((i=>{const a=this.Ds(t,i);return this.Cs(t,a,r,s)?N.resolve(null):(Mn()<=G.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xn(t)),this.vs(e,a,t,QI(s,jr)).next((c=>c)))}))}Ds(e,t){let r=new ge(qf(e));return t.forEach(((s,i)=>{xi(e,i)&&(r=r.add(i))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return Mn()<=G.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",xn(t)),this.ps.getDocumentsMatchingQuery(e,t,Ht.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((a=>{i=i.insert(a.key,a)})),i)))}}const tc="LocalStore",kA=3e8;class NA{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new oe(K),this.xs=new Sn((i=>Wa(i)),Ga),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function OA(n,e,t,r){return new NA(n,e,t,r)}async function hp(n,e){const t=z(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],c=[];let l=Q();for(const h of s){a.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}for(const h of i){c.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:c})))}))}))}function DA(n,e){const t=z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,h,f){const m=h.batch,E=m.keys();let C=N.resolve();return E.forEach((v=>{C=C.next((()=>f.getEntry(l,v))).next((k=>{const b=h.docVersions.get(v);Z(b!==null,48541),k.version.compareTo(b)<0&&(m.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),f.addEntry(k)))}))})),C.next((()=>c.mutationQueue.removeMutationBatch(l,m)))})(t,r,e,i).next((()=>i.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Q();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function dp(n){const e=z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function VA(n,e){const t=z(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach(((f,m)=>{const E=s.get(m);if(!E)return;c.push(t.Pi.removeMatchingKeys(i,f.removedDocuments,m).next((()=>t.Pi.addMatchingKeys(i,f.addedDocuments,m))));let C=E.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(Ie.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):f.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(f.resumeToken,r)),s=s.insert(m,C),(function(k,b,M){return k.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=kA?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(E,C,f)&&c.push(t.Pi.updateTargetData(i,C))}));let l=bt(),h=Q();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(LA(i,a,e.documentUpdates).next((f=>{l=f.ks,h=f.qs}))),!r.isEqual($.min())){const f=t.Pi.getLastRemoteSnapshotVersion(i).next((m=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return N.waitFor(c).next((()=>a.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,h))).next((()=>l))})).then((i=>(t.Ms=s,i)))}function LA(n,e,t){let r=Q(),s=Q();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let a=bt();return t.forEach(((c,l)=>{const h=i.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual($.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):V(tc,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)})),{ks:a,qs:s}}))}function MA(n,e){const t=z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=$a),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function xA(n,e){const t=z(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((i=>i?(s=i,N.resolve(s)):t.Pi.allocateTargetId(r).next((a=>(s=new Ut(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function ha(n,e,t){const r=z(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!or(a))throw a;V(tc,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Zl(n,e,t){const r=z(n);let s=$.min(),i=Q();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,h,f){const m=z(l),E=m.xs.get(f);return E!==void 0?N.resolve(m.Ms.get(E)):m.Pi.getTargetData(h,f)})(r,a,ct(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?s:$.min(),t?i:Q()))).next((c=>(UA(r,Iv(e),c),{documents:c,Qs:i})))))}function UA(n,e,t){let r=n.Os.get(e)||$.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Os.set(e,r)}class eh{constructor(){this.activeTargetIds=Pv()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FA{constructor(){this.Mo=new eh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new eh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BA{Oo(e){}shutdown(){}}const th="ConnectivityMonitor";class nh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){V(th,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){V(th,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ks=null;function da(){return ks===null?ks=(function(){return 268435456+Math.round(2147483648*Math.random())})():ks++,"0x"+ks.toString(16)}const Vo="RestConnection",qA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ci?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const a=da(),c=this.zo(e,t.toUriEncodedString());V(Vo,`Sending RPC '${e}' ${a}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:h}=new URL(c),f=Jt(h);return this.Jo(e,c,l,r,f).then((m=>(V(Vo,`Received RPC '${e}' ${a}: `,m),m)),(m=>{throw Qn(Vo,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m}))}Ho(e,t,r,s,i,a){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,t){const r=qA[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class $A{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ae="WebChannelConnection";class zA extends jA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const a=da();return new Promise(((c,l)=>{const h=new pf;h.setWithCredentials(!0),h.listenOnce(mf.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case $s.NO_ERROR:const m=h.getResponseJson();V(Ae,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case $s.TIMEOUT:V(Ae,`RPC '${e}' ${a} timed out`),l(new x(O.DEADLINE_EXCEEDED,"Request time out"));break;case $s.HTTP_ERROR:const E=h.getStatus();if(V(Ae,`RPC '${e}' ${a} failed with status:`,E,"response text:",h.getResponseText()),E>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const v=C?.error;if(v&&v.status&&v.message){const k=(function(M){const U=M.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(U)>=0?U:O.UNKNOWN})(v.status);l(new x(k,v.message))}else l(new x(O.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new x(O.UNAVAILABLE,"Connection failed."));break;default:q(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{V(Ae,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(s);V(Ae,`RPC '${e}' ${a} sending request:`,s),h.send(t,"POST",f,r,15)}))}T_(e,t,r){const s=da(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=yf(),c=_f(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const f=i.join("");V(Ae,`Creating RPC '${e}' stream ${s}: ${f}`,l);const m=a.createWebChannel(f,l);this.I_(m);let E=!1,C=!1;const v=new $A({Yo:b=>{C?V(Ae,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(E||(V(Ae,`Opening RPC '${e}' stream ${s} transport.`),m.open(),E=!0),V(Ae,`RPC '${e}' stream ${s} sending:`,b),m.send(b))},Zo:()=>m.close()}),k=(b,M,U)=>{b.listen(M,(L=>{try{U(L)}catch(j){setTimeout((()=>{throw j}),0)}}))};return k(m,kr.EventType.OPEN,(()=>{C||(V(Ae,`RPC '${e}' stream ${s} transport opened.`),v.o_())})),k(m,kr.EventType.CLOSE,(()=>{C||(C=!0,V(Ae,`RPC '${e}' stream ${s} transport closed`),v.a_(),this.E_(m))})),k(m,kr.EventType.ERROR,(b=>{C||(C=!0,Qn(Ae,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),v.a_(new x(O.UNAVAILABLE,"The operation could not be completed")))})),k(m,kr.EventType.MESSAGE,(b=>{if(!C){const M=b.data[0];Z(!!M,16349);const U=M,L=U?.error||U[0]?.error;if(L){V(Ae,`RPC '${e}' stream ${s} received error:`,L);const j=L.status;let J=(function(g){const y=de[g];if(y!==void 0)return Zf(y)})(j),Y=L.message;J===void 0&&(J=O.INTERNAL,Y="Unknown error status: "+j+" with message "+L.message),C=!0,v.a_(new x(J,Y)),m.close()}else V(Ae,`RPC '${e}' stream ${s} received:`,M),v.u_(M)}})),k(c,gf.STAT_EVENT,(b=>{b.stat===ea.PROXY?V(Ae,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===ea.NOPROXY&&V(Ae,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Lo(){return typeof document<"u"?document:null}function qi(n){return new Kv(n,!0)}class fp{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&V("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const rh="PersistentStream";class pp{constructor(e,t,r,s,i,a,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(Rt(t.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new x(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return V(rh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(V(rh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HA extends pp{constructor(e,t,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Jv(this.serializer,e),r=(function(i){if(!("targetChange"in i))return $.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?$.min():a.readTime?ut(a.readTime):$.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=la(this.serializer),t.addTarget=(function(i,a){let c;const l=a.target;if(c=ia(l)?{documents:eA(i,l)}:{query:tA(i,l).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=np(i,a.resumeToken);const h=aa(i,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo($.min())>0){c.readTime=fi(i,a.snapshotVersion.toTimestamp());const h=aa(i,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=rA(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=la(this.serializer),t.removeTarget=e,this.q_(t)}}class WA extends pp{constructor(e,t,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Z(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Z(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Zv(e.writeResults,e.commitTime),r=ut(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=la(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Yv(this.serializer,r)))};this.q_(t)}}class GA{}class KA extends GA{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new x(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,ca(t,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new x(O.UNKNOWN,i.toString())}))}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,ca(t,r),s,a,c,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new x(O.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rt(t),this.aa=!1):V("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const In="RemoteStore";class XA{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Cn(this)&&(V(In,"Restarting streams for network reachability change."),await(async function(l){const h=z(l);h.Ea.add(4),await as(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ji(h)})(this))}))})),this.Ra=new QA(r,s)}}async function ji(n){if(Cn(n))for(const e of n.da)await e(!0)}async function as(n){for(const e of n.da)await e(!1)}function mp(n,e){const t=z(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ic(t)?sc(t):ar(t).O_()&&rc(t,e))}function nc(n,e){const t=z(n),r=ar(t);t.Ia.delete(e),r.O_()&&gp(t,e),t.Ia.size===0&&(r.O_()?r.L_():Cn(t)&&t.Ra.set("Unknown"))}function rc(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ar(n).Y_(e)}function gp(n,e){n.Va.Ue(e),ar(n).Z_(e)}function sc(n){n.Va=new zv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ar(n).start(),n.Ra.ua()}function ic(n){return Cn(n)&&!ar(n).x_()&&n.Ia.size>0}function Cn(n){return z(n).Ea.size===0}function _p(n){n.Va=void 0}async function JA(n){n.Ra.set("Online")}async function YA(n){n.Ia.forEach(((e,t)=>{rc(n,e)}))}async function ZA(n,e){_p(n),ic(n)?(n.Ra.ha(e),sc(n)):n.Ra.set("Unknown")}async function eR(n,e,t){if(n.Ra.set("Online"),e instanceof tp&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(r){V(In,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mi(n,r)}else if(e instanceof Gs?n.Va.Ze(e):e instanceof ep?n.Va.st(e):n.Va.tt(e),!t.isEqual($.min()))try{const r=await dp(n.localStore);t.compareTo(r)>=0&&await(function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach(((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(l.resumeToken,a))}})),c.targetMismatches.forEach(((l,h)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(Ie.EMPTY_BYTE_STRING,f.snapshotVersion)),gp(i,l);const m=new Ut(f.target,l,h,f.sequenceNumber);rc(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){V(In,"Failed to raise snapshot:",r),await mi(n,r)}}async function mi(n,e,t){if(!or(e))throw e;n.Ea.add(1),await as(n),n.Ra.set("Offline"),t||(t=()=>dp(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{V(In,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ji(n)}))}function yp(n,e){return e().catch((t=>mi(n,t,e)))}async function $i(n){const e=z(n),t=Qt(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$a;for(;tR(e);)try{const s=await MA(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,nR(e,s)}catch(s){await mi(e,s)}Ep(e)&&Tp(e)}function tR(n){return Cn(n)&&n.Ta.length<10}function nR(n,e){n.Ta.push(e);const t=Qt(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ep(n){return Cn(n)&&!Qt(n).x_()&&n.Ta.length>0}function Tp(n){Qt(n).start()}async function rR(n){Qt(n).ra()}async function sR(n){const e=Qt(n);for(const t of n.Ta)e.ea(t.mutations)}async function iR(n,e,t){const r=n.Ta.shift(),s=Qa.from(r,e,t);await yp(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await $i(n)}async function oR(n,e){e&&Qt(n).X_&&await(async function(r,s){if((function(a){return qv(a)&&a!==O.ABORTED})(s.code)){const i=r.Ta.shift();Qt(r).B_(),await yp(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await $i(r)}})(n,e),Ep(n)&&Tp(n)}async function sh(n,e){const t=z(n);t.asyncQueue.verifyOperationInProgress(),V(In,"RemoteStore received new credentials");const r=Cn(t);t.Ea.add(3),await as(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ji(t)}async function aR(n,e){const t=z(n);e?(t.Ea.delete(2),await ji(t)):e||(t.Ea.add(2),await as(t),t.Ra.set("Unknown"))}function ar(n){return n.ma||(n.ma=(function(t,r,s){const i=z(t);return i.sa(),new HA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:JA.bind(null,n),t_:YA.bind(null,n),r_:ZA.bind(null,n),H_:eR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ic(n)?sc(n):n.Ra.set("Unknown")):(await n.ma.stop(),_p(n))}))),n.ma}function Qt(n){return n.fa||(n.fa=(function(t,r,s){const i=z(t);return i.sa(),new WA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:rR.bind(null,n),r_:oR.bind(null,n),ta:sR.bind(null,n),na:iR.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await $i(n)):(await n.fa.stop(),n.Ta.length>0&&(V(In,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class oc{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const a=Date.now()+r,c=new oc(e,t,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ac(n,e){if(Rt("AsyncQueue",`${e}: ${n}`),or(n))return new x(O.UNAVAILABLE,`${e}: ${n}`);throw n}class zn{static emptySet(e){return new zn(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||F.comparator(t.key,r.key):(t,r)=>F.comparator(t.key,r.key),this.keyedMap=Nr(),this.sortedSet=new oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new zn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ih{constructor(){this.ga=new oe(F.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class er{constructor(e,t,r,s,i,a,c,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,s,i){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new er(e,t,zn.emptySet(t),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class cR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class uR{constructor(){this.queries=oh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=z(t),i=s.queries;s.queries=oh(),i.forEach(((a,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new x(O.ABORTED,"Firestore shutting down"))}}function oh(){return new Sn((n=>Bf(n)),Mi)}async function lR(n,e){const t=z(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new cR,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const c=ac(a,`Initialization of query '${xn(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&cc(t)}async function hR(n,e){const t=z(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dR(n,e){const t=z(n);let r=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&cc(t)}function fR(n,e,t){const r=z(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function cc(n){n.Ca.forEach((e=>{e.next()}))}var fa,ah;(ah=fa||(fa={})).Ma="default",ah.Cache="cache";class pR{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new er(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=er.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fa.Cache}}class wp{constructor(e){this.key=e}}class Ip{constructor(e){this.key=e}}class mR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Q(),this.mutatedKeys=Q(),this.eu=qf(e),this.tu=new zn(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new ih,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,m)=>{const E=s.get(f),C=xi(this.query,m)?m:null,v=!!E&&this.mutatedKeys.has(E.key),k=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let b=!1;E&&C?E.data.isEqual(C.data)?v!==k&&(r.track({type:3,doc:C}),b=!0):this.su(E,C)||(r.track({type:2,doc:C}),b=!0,(l&&this.eu(C,l)>0||h&&this.eu(C,h)<0)&&(c=!0)):!E&&C?(r.track({type:0,doc:C}),b=!0):E&&!C&&(r.track({type:1,doc:E}),b=!0,(l||h)&&(c=!0)),b&&(C?(a=a.add(C),i=k?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:c,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,m)=>(function(C,v){const k=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Rt:b})}};return k(C)-k(v)})(f.type,m.type)||this.eu(f.doc,m.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,h=l!==this.Za;return this.Za=l,a.length!==0||h?{snapshot:new er(this.query,e.tu,i,a,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ih,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Q(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Ip(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new wp(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Q();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return er.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const uc="SyncEngine";class gR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _R{constructor(e){this.key=e,this.hu=!1}}class yR{constructor(e,t,r,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Sn((c=>Bf(c)),Mi),this.Iu=new Map,this.Eu=new Set,this.du=new oe(F.comparator),this.Au=new Map,this.Ru=new Ya,this.Vu={},this.mu=new Map,this.fu=Zn.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ER(n,e,t=!0){const r=Pp(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await vp(r,e,t,!0),s}async function TR(n,e){const t=Pp(n);await vp(t,e,!0,!1)}async function vp(n,e,t,r){const s=await xA(n.localStore,ct(e)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,t);let c;return r&&(c=await wR(n,e,i,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&mp(n.remoteStore,s),c}async function wR(n,e,t,r,s){n.pu=(m,E,C)=>(async function(k,b,M,U){let L=b.view.ru(M);L.Cs&&(L=await Zl(k.localStore,b.query,!1).then((({documents:T})=>b.view.ru(T,L))));const j=U&&U.targetChanges.get(b.targetId),J=U&&U.targetMismatches.get(b.targetId)!=null,Y=b.view.applyChanges(L,k.isPrimaryClient,j,J);return uh(k,b.targetId,Y.au),Y.snapshot})(n,m,E,C);const i=await Zl(n.localStore,e,!0),a=new mR(e,i.Qs),c=a.ru(i.documents),l=os.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),h=a.applyChanges(c,n.isPrimaryClient,l);uh(n,t,h.au);const f=new gR(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function IR(n,e,t){const r=z(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!Mi(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ha(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&nc(r.remoteStore,s.targetId),pa(r,s.targetId)})).catch(ir)):(pa(r,s.targetId),await ha(r.localStore,s.targetId,!0))}async function vR(n,e){const t=z(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nc(t.remoteStore,r.targetId))}async function AR(n,e,t){const r=NR(n);try{const s=await(function(a,c){const l=z(a),h=re.now(),f=c.reduce(((C,v)=>C.add(v.key)),Q());let m,E;return l.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let v=bt(),k=Q();return l.Ns.getEntries(C,f).next((b=>{v=b,v.forEach(((M,U)=>{U.isValidDocument()||(k=k.add(M))}))})).next((()=>l.localDocuments.getOverlayedDocuments(C,v))).next((b=>{m=b;const M=[];for(const U of c){const L=Mv(U,m.get(U.key).overlayedDocument);L!=null&&M.push(new Pn(U.key,L,Of(L.value.mapValue),wt.exists(!0)))}return l.mutationQueue.addMutationBatch(C,h,M,c)})).next((b=>{E=b;const M=b.applyToLocalDocumentSet(m,k);return l.documentOverlayCache.saveOverlays(C,b.batchId,M)}))})).then((()=>({batchId:E.batchId,changes:$f(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,c,l){let h=a.Vu[a.currentUser.toKey()];h||(h=new oe(K)),h=h.insert(c,l),a.Vu[a.currentUser.toKey()]=h})(r,s.batchId,t),await cs(r,s.changes),await $i(r.remoteStore)}catch(s){const i=ac(s,"Failed to persist write");t.reject(i)}}async function Ap(n,e){const t=z(n);try{const r=await VA(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=t.Au.get(i);a&&(Z(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Z(a.hu,14607):s.removedDocuments.size>0&&(Z(a.hu,42227),a.hu=!1))})),await cs(t,r,e)}catch(r){await ir(r)}}function ch(n,e,t){const r=z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const l=z(a);l.onlineState=c;let h=!1;l.queries.forEach(((f,m)=>{for(const E of m.Sa)E.va(c)&&(h=!0)})),h&&cc(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RR(n,e,t){const r=z(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new oe(F.comparator);a=a.insert(i,be.newNoDocument(i,$.min()));const c=Q().add(i),l=new Bi($.min(),new Map,new oe(K),a,c);await Ap(r,l),r.du=r.du.remove(i),r.Au.delete(e),lc(r)}else await ha(r.localStore,e,!1).then((()=>pa(r,e,t))).catch(ir)}async function bR(n,e){const t=z(n),r=e.batch.batchId;try{const s=await DA(t.localStore,e);bp(t,r,null),Rp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await cs(t,s)}catch(s){await ir(s)}}async function SR(n,e,t){const r=z(n);try{const s=await(function(a,c){const l=z(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return l.mutationQueue.lookupMutationBatch(h,c).next((m=>(Z(m!==null,37113),f=m.keys(),l.mutationQueue.removeMutationBatch(h,m)))).next((()=>l.mutationQueue.performConsistencyCheck(h))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>l.localDocuments.getDocuments(h,f)))}))})(r.localStore,e);bp(r,e,t),Rp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await cs(r,s)}catch(s){await ir(s)}}function Rp(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function bp(n,e,t){const r=z(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function pa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Sp(n,r)}))}function Sp(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(nc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),lc(n))}function uh(n,e,t){for(const r of t)r instanceof wp?(n.Ru.addReference(r.key,e),PR(n,r)):r instanceof Ip?(V(uc,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Sp(n,r.key)):q(19791,{wu:r})}function PR(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(V(uc,"New document in limbo: "+t),n.Eu.add(r),lc(n))}function lc(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new F(ne.fromString(e)),r=n.fu.next();n.Au.set(r,new _R(t)),n.du=n.du.insert(t,r),mp(n.remoteStore,new Ut(ct(Ff(t.path)),r,"TargetPurposeLimboResolution",Oi.ce))}}async function cs(n,e,t){const r=z(n),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{a.push(r.pu(l,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const f=h?!h.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(h){s.push(h);const f=ec.As(l.targetId,h);i.push(f)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(l,h){const f=z(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>N.forEach(h,(E=>N.forEach(E.Es,(C=>f.persistence.referenceDelegate.addReference(m,E.targetId,C))).next((()=>N.forEach(E.ds,(C=>f.persistence.referenceDelegate.removeReference(m,E.targetId,C)))))))))}catch(m){if(!or(m))throw m;V(tc,"Failed to update sequence numbers: "+m)}for(const m of h){const E=m.targetId;if(!m.fromCache){const C=f.Ms.get(E),v=C.snapshotVersion,k=C.withLastLimboFreeSnapshotVersion(v);f.Ms=f.Ms.insert(E,k)}}})(r.localStore,i))}async function CR(n,e){const t=z(n);if(!t.currentUser.isEqual(e)){V(uc,"User change. New user:",e.toKey());const r=await hp(t.localStore,e);t.currentUser=e,(function(i,a){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new x(O.CANCELLED,a))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cs(t,r.Ls)}}function kR(n,e){const t=z(n),r=t.Au.get(e);if(r&&r.hu)return Q().add(r.key);{let s=Q();const i=t.Iu.get(e);if(!i)return s;for(const a of i){const c=t.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function Pp(n){const e=z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ap.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RR.bind(null,e),e.Pu.H_=dR.bind(null,e.eventManager),e.Pu.yu=fR.bind(null,e.eventManager),e}function NR(n){const e=z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SR.bind(null,e),e}class gi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qi(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OA(this.persistence,new CA,e.initialUser,this.serializer)}Cu(e){return new lp(Za.mi,this.serializer)}Du(e){return new FA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gi.provider={build:()=>new gi};class OR extends gi{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Z(this.persistence.referenceDelegate instanceof pi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?De.withCacheSize(this.cacheSizeBytes):De.DEFAULT;return new lp((r=>pi.mi(r,t)),this.serializer)}}class ma{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ch(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CR.bind(null,this.syncEngine),await aR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uR})()}createDatastore(e){const t=qi(e.databaseInfo.databaseId),r=(function(i){return new zA(i)})(e.databaseInfo);return(function(i,a,c,l){return new KA(i,a,c,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,a,c){return new XA(r,s,i,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>ch(this.syncEngine,t,0)),(function(){return nh.v()?new nh:new BA})())}createSyncEngine(e,t){return(function(s,i,a,c,l,h,f){const m=new yR(s,i,a,c,l,h);return f&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=z(t);V(In,"RemoteStore shutting down."),r.Ea.add(5),await as(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ma.provider={build:()=>new ma};class DR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Xt="FirestoreClient";class VR{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Re.UNAUTHENTICATED,this.clientId=qa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{V(Xt,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(V(Xt,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ac(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Mo(n,e){n.asyncQueue.verifyOperationInProgress(),V(Xt,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await hp(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function lh(n,e){n.asyncQueue.verifyOperationInProgress();const t=await LR(n);V(Xt,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>sh(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>sh(e.remoteStore,s))),n._onlineComponents=e}async function LR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(Xt,"Using user provided OfflineComponentProvider");try{await Mo(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Qn("Error using user provided cache. Falling back to memory cache: "+t),await Mo(n,new gi)}}else V(Xt,"Using default OfflineComponentProvider"),await Mo(n,new OR(void 0));return n._offlineComponents}async function Cp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(Xt,"Using user provided OnlineComponentProvider"),await lh(n,n._uninitializedComponentsProvider._online)):(V(Xt,"Using default OnlineComponentProvider"),await lh(n,new ma))),n._onlineComponents}function MR(n){return Cp(n).then((e=>e.syncEngine))}async function xR(n){const e=await Cp(n),t=e.eventManager;return t.onListen=ER.bind(null,e.syncEngine),t.onUnlisten=IR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vR.bind(null,e.syncEngine),t}function UR(n,e,t={}){const r=new jt;return n.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,l,h){const f=new DR({next:E=>{f.Nu(),a.enqueueAndForget((()=>hR(i,m))),E.fromCache&&l.source==="server"?h.reject(new x(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(E)},error:E=>h.reject(E)}),m=new pR(c,f,{includeMetadataChanges:!0,qa:!0});return lR(i,m)})(await xR(n),n.asyncQueue,e,t,r))),r.promise}function kp(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const hh=new Map;const Np="firestore.googleapis.com",dh=!0;class fh{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new x(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Np,this.ssl=dh}else this.host=e.host,this.ssl=e.ssl??dh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=up;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dA)throw new x(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kp(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new x(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new x(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new x(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zi{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new UI;switch(r.type){case"firstParty":return new jI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=hh.get(t);r&&(V("ComponentProvider","Removing Datastore"),hh.delete(t),r.terminate())})(this),Promise.resolve()}}function FR(n,e,t,r={}){n=oi(n,zi);const s=Jt(e),i=n._getSettings(),a={...i,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(wa(`https://${c}`),Ia("Firestore",!0)),i.host!==Np&&i.host!==c&&Qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!zt(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Re.MOCK_USER;else{h=nd(r.mockUserToken,n._app?.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new x(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Re(m)}n._authCredentials=new FI(new Tf(h,f))}}class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class we{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $t(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new we(this.firestore,e,this._key)}toJSON(){return{type:we._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ss(t,we._jsonSchema))return new we(e,r||null,new F(ne.fromString(t.referencePath)))}}we._jsonSchemaVersion="firestore/documentReference/1.0",we._jsonSchema={type:fe("string",we._jsonSchemaVersion),referencePath:fe("string")};class $t extends Hi{constructor(e,t,r){super(e,t,Ff(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new we(this.firestore,null,new F(e))}withConverter(e){return new $t(this.firestore,e,this._path)}}function Op(n,e,...t){if(n=ie(n),wf("collection","path",e),n instanceof zi){const r=ne.fromString(e,...t);return Sl(r),new $t(n,null,r)}{if(!(n instanceof we||n instanceof $t))throw new x(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ne.fromString(e,...t));return Sl(r),new $t(n.firestore,null,r)}}function BR(n,e,...t){if(n=ie(n),arguments.length===1&&(e=qa.newId()),wf("doc","path",e),n instanceof zi){const r=ne.fromString(e,...t);return bl(r),new we(n,null,new F(r))}{if(!(n instanceof we||n instanceof $t))throw new x(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ne.fromString(e,...t));return bl(r),new we(n.firestore,n instanceof $t?n.converter:null,new F(r))}}const ph="AsyncQueue";class mh{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fp(this,"async_queue_retry"),this._c=()=>{const r=Lo();r&&V(ph,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Lo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lo();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new jt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!or(e))throw e;V(ph,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Rt("INTERNAL UNHANDLED ERROR: ",gh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=oc.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&q(47125,{Pc:gh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function gh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class hc extends zi{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new mh,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mh(e),this._firestoreClient=void 0,await e}}}function qR(n,e){const t=typeof n=="object"?n:bi(),r=typeof n=="string"?n:ci,s=Yt(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Zh("firestore");i&&FR(s,...i)}return s}function Dp(n){if(n._terminated)throw new x(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jR(n),n._firestoreClient}function jR(n){const e=n._freezeSettings(),t=(function(s,i,a,c){return new iv(s,i,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,kp(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new VR(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}class He{constructor(e){this._byteString=e}static fromBase64String(e){try{return new He(Ie.fromBase64String(e))}catch(t){throw new x(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new He(Ie.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:He._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ss(e,He._jsonSchema))return He.fromBase64String(e.bytes)}}He._jsonSchemaVersion="firestore/bytes/1.0",He._jsonSchema={type:fe("string",He._jsonSchemaVersion),bytes:fe("string")};class dc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Te(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fc{constructor(e){this._methodName=e}}class lt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lt._jsonSchemaVersion}}static fromJSON(e){if(ss(e,lt._jsonSchema))return new lt(e.latitude,e.longitude)}}lt._jsonSchemaVersion="firestore/geoPoint/1.0",lt._jsonSchema={type:fe("string",lt._jsonSchemaVersion),latitude:fe("number"),longitude:fe("number")};class ht{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ht._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ss(e,ht._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ht(e.vectorValues);throw new x(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ht._jsonSchemaVersion="firestore/vectorValue/1.0",ht._jsonSchema={type:fe("string",ht._jsonSchemaVersion),vectorValues:fe("object")};const $R=/^__.*__$/;class zR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Pn(e,this.data,this.fieldMask,t,this.fieldTransforms):new is(e,this.data,t,this.fieldTransforms)}}function Vp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ac:n})}}class pc{constructor(e,t,r,s,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _i(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Vp(this.Ac)&&$R.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qi(e)}Cc(e,t,r,s=!1){return new pc({Ac:e,methodName:t,Dc:r,path:Te.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function WR(n){const e=n._freezeSettings(),t=qi(n._databaseId);return new HR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GR(n,e,t,r,s,i={}){const a=n.Cc(i.merge||i.mergeFields?2:0,e,t,s);Up("Data must be an object, but it was:",a,r);const c=Mp(r,a);let l,h;if(i.merge)l=new Je(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const E=KR(e,m,t);if(!a.contains(E))throw new x(O.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);XR(f,E)||f.push(E)}l=new Je(f),h=a.fieldTransforms.filter((m=>l.covers(m.field)))}else l=null,h=a.fieldTransforms;return new zR(new ze(c),l,h)}class mc extends fc{_toFieldTransform(e){return new Ov(e.path,new Wr)}isEqual(e){return e instanceof mc}}function Lp(n,e){if(xp(n=ie(n)))return Up("Unsupported field value:",e,n),Mp(n,e);if(n instanceof fc)return(function(r,s){if(!Vp(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const c of r){let l=Lp(c,s.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}})(n,e)}return(function(r,s){if((r=ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Cv(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=re.fromDate(r);return{timestampValue:fi(s.serializer,i)}}if(r instanceof re){const i=new re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fi(s.serializer,i)}}if(r instanceof lt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof He)return{bytesValue:np(s.serializer,r._byteString)};if(r instanceof we){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ja(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ht)return(function(a,c){return{mapValue:{fields:{[kf]:{stringValue:Nf},[ui]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return Ka(c.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${ja(r)}`)})(n,e)}function Mp(n,e){const t={};return Af(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bn(n,((r,s)=>{const i=Lp(s,e.mc(r));i!=null&&(t[r]=i)})),{mapValue:{fields:t}}}function xp(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof re||n instanceof lt||n instanceof He||n instanceof we||n instanceof fc||n instanceof ht)}function Up(n,e,t){if(!xp(t)||!If(t)){const r=ja(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function KR(n,e,t){if((e=ie(e))instanceof dc)return e._internalPath;if(typeof e=="string")return Fp(n,e);throw _i("Field path arguments must be of type string or ",n,!1,void 0,t)}const QR=new RegExp("[~\\*/\\[\\]]");function Fp(n,e,t){if(e.search(QR)>=0)throw _i(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dc(...e.split("."))._internalPath}catch{throw _i(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _i(n,e,t,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new x(O.INVALID_ARGUMENT,c+n+l)}function XR(n,e){return n.some((t=>t.isEqual(e)))}class Bp{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new we(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class JR extends Bp{data(){return super.data()}}function qp(n,e){return typeof e=="string"?Fp(n,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function YR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZR{convertValue(e,t="none"){switch(Kt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bn(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[ui].arrayValue?.values?.map((r=>le(r.doubleValue)));return new ht(t)}convertGeoPoint(e){return new lt(le(e.latitude),le(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vi(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($r(e));default:return null}}convertTimestamp(e){const t=Wt(e);return new re(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ne.fromString(e);Z(cp(r),9688,{name:e});const s=new zr(r.get(1),r.get(3)),i=new F(r.popFirst(5));return s.isEqual(t)||Rt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function eb(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Ns{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hn extends Bp{constructor(e,t,r,s,i,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ks(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hn._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hn._jsonSchema={type:fe("string",Hn._jsonSchemaVersion),bundleSource:fe("string","DocumentSnapshot"),bundleName:fe("string"),bundle:fe("string")};class Ks extends Hn{data(e={}){return super.data(e)}}class Wn{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ns(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Ks(this._firestore,this._userDataWriter,r.key,r,new Ns(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const l=new Ks(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ns(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new Ks(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ns(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:tb(c.type),doc:l,oldIndex:h,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:n})}}Wn._jsonSchemaVersion="firestore/querySnapshot/1.0",Wn._jsonSchema={type:fe("string",Wn._jsonSchemaVersion),bundleSource:fe("string","QuerySnapshot"),bundleName:fe("string"),bundle:fe("string")};class nb extends ZR{constructor(e){super(),this.firestore=e}convertBytes(e){return new He(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new we(this.firestore,null,t)}}function rb(n){n=oi(n,Hi);const e=oi(n.firestore,hc),t=Dp(e),r=new nb(e);return YR(n._query),UR(t,n._query).then((s=>new Wn(e,r,n,s)))}function sb(n,e){const t=oi(n.firestore,hc),r=BR(n),s=eb(n.converter,e);return ib(t,[GR(WR(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,wt.exists(!1))]).then((()=>r))}function ib(n,e){return(function(r,s){const i=new jt;return r.asyncQueue.enqueueAndForget((async()=>AR(await MR(r),s,i))),i.promise})(Dp(n),e)}function ob(){return new mc("serverTimestamp")}(function(e,t=!0){(function(s){sr=s})(Rn),Ze(new We("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new hc(new BI(r.getProvider("auth-internal")),new $I(a,r.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new x(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(h.options.projectId,f)})(a,s),a);return i={useFetchStreams:t,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Ue(Il,vl,e),Ue(Il,vl,"esm2020")})();const jp="firebasestorage.googleapis.com",$p="storageBucket",ab=120*1e3,cb=600*1e3,ub=1e3;class ae extends Ke{constructor(e,t,r=0){super(xo(e),`Firebase Storage: ${t} (${xo(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ae.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xo(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var se;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(se||(se={}));function xo(n){return"storage/"+n}function gc(){const n="An unknown error occurred, please check the error payload for server response.";return new ae(se.UNKNOWN,n)}function lb(n){return new ae(se.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function hb(n){return new ae(se.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function db(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ae(se.UNAUTHENTICATED,n)}function fb(){return new ae(se.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pb(n){return new ae(se.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function zp(){return new ae(se.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hp(){return new ae(se.CANCELED,"User canceled the upload/download.")}function mb(n){return new ae(se.INVALID_URL,"Invalid URL '"+n+"'.")}function gb(n){return new ae(se.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _b(){return new ae(se.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$p+"' property when initializing the app?")}function Wp(){return new ae(se.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yb(){return new ae(se.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Eb(){return new ae(se.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Tb(n){return new ae(se.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ga(n){return new ae(se.INVALID_ARGUMENT,n)}function Gp(){return new ae(se.APP_DELETED,"The Firebase app was deleted.")}function wb(n){return new ae(se.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fr(n,e){return new ae(se.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Sr(n){throw new ae(se.INTERNAL_ERROR,"Internal error: "+n)}class qe{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=qe.makeFromUrl(e,t)}catch{return new qe(e,"")}if(r.path==="")return r;throw gb(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function h(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",C=new RegExp(`^https?://${m}/${f}/b/${s}/o${E}`,"i"),v={bucket:1,path:3},k=t===jp?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",M=new RegExp(`^https?://${k}/${s}/${b}`,"i"),L=[{regex:c,indices:l,postModify:i},{regex:C,indices:v,postModify:h},{regex:M,indices:{bucket:1,path:2},postModify:h}];for(let j=0;j<L.length;j++){const J=L[j],Y=J.regex.exec(e);if(Y){const T=Y[J.indices.bucket];let g=Y[J.indices.path];g||(g=""),r=new qe(T,g),J.postModify(r);break}}if(r==null)throw mb(e);return r}}class Ib{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function vb(n,e,t){let r=1,s=null,i=null,a=!1,c=0;function l(){return c===2}let h=!1;function f(...b){h||(h=!0,e.apply(null,b))}function m(b){s=setTimeout(()=>{s=null,n(C,l())},b)}function E(){i&&clearTimeout(i)}function C(b,...M){if(h){E();return}if(b){E(),f.call(null,b,...M);return}if(l()||a){E(),f.call(null,b,...M);return}r<64&&(r*=2);let L;c===1?(c=2,L=0):L=(r+Math.random())*1e3,m(L)}let v=!1;function k(b){v||(v=!0,E(),!h&&(s!==null?(b||(c=2),clearTimeout(s),m(0)):b||(c=1)))}return m(0),i=setTimeout(()=>{a=!0,k(!0)},t),k}function Ab(n){n(!1)}function Rb(n){return n!==void 0}function bb(n){return typeof n=="function"}function Sb(n){return typeof n=="object"&&!Array.isArray(n)}function Wi(n){return typeof n=="string"||n instanceof String}function _h(n){return _c()&&n instanceof Blob}function _c(){return typeof Blob<"u"}function yh(n,e,t,r){if(r<e)throw ga(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ga(`Invalid value for '${n}'. Expected ${t} or less.`)}function us(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Kp(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var mn;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(mn||(mn={}));function Qp(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}class Pb{constructor(e,t,r,s,i,a,c,l,h,f,m,E=!0,C=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=m,this.retry=E,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,k)=>{this.resolve_=v,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Os(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const l=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===mn.NO_ERROR,l=i.getStatus();if(!c||Qp(l,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===mn.ABORT;r(!1,new Os(!1,null,f));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new Os(h,i))})},t=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(c,c.getResponse());Rb(l)?i(l):i()}catch(l){a(l)}else if(c!==null){const l=gc();l.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,l)):a(l)}else if(s.canceled){const l=this.appDelete_?Gp():Hp();a(l)}else{const l=zp();a(l)}};this.canceled_?t(!1,new Os(!1,null,!0)):this.backoffId_=vb(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ab(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Os{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Cb(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function kb(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Nb(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Ob(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Db(n,e,t,r,s,i,a=!0,c=!1){const l=Kp(n.urlParams),h=n.url+l,f=Object.assign({},n.headers);return Nb(f,e),Cb(f,t),kb(f,i),Ob(f,r),new Pb(h,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a,c)}function Vb(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Lb(...n){const e=Vb();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(_c())return new Blob(n);throw new ae(se.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Mb(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function xb(n){if(typeof atob>"u")throw Tb("base-64");return atob(n)}const ot={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Uo{constructor(e,t){this.data=e,this.contentType=t||null}}function Ub(n,e){switch(n){case ot.RAW:return new Uo(Xp(e));case ot.BASE64:case ot.BASE64URL:return new Uo(Jp(n,e));case ot.DATA_URL:return new Uo(Bb(e),qb(e))}throw gc()}function Xp(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=n.charCodeAt(++t);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Fb(n){let e;try{e=decodeURIComponent(n)}catch{throw Fr(ot.DATA_URL,"Malformed data URL.")}return Xp(e)}function Jp(n,e){switch(n){case ot.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Fr(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ot.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Fr(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=xb(e)}catch(s){throw s.message.includes("polyfill")?s:Fr(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class Yp{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Fr(ot.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=jb(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Bb(n){const e=new Yp(n);return e.base64?Jp(ot.BASE64,e.rest):Fb(e.rest)}function qb(n){return new Yp(n).contentType}function jb(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class _t{constructor(e,t){let r=0,s="";_h(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(_h(this.data_)){const r=this.data_,s=Mb(r,e,t);return s===null?null:new _t(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new _t(r,!0)}}static getBlob(...e){if(_c()){const t=e.map(r=>r instanceof _t?r.data_:r);return new _t(Lb.apply(null,t))}else{const t=e.map(a=>Wi(a)?Ub(ot.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new _t(s,!0)}}uploadData(){return this.data_}}function Zp(n){let e;try{e=JSON.parse(n)}catch{return null}return Sb(e)?e:null}function $b(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function zb(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function em(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Hb(n,e){return e}class Ne{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||Hb}}let Ds=null;function Wb(n){return!Wi(n)||n.length<2?n:em(n)}function yc(){if(Ds)return Ds;const n=[];n.push(new Ne("bucket")),n.push(new Ne("generation")),n.push(new Ne("metageneration")),n.push(new Ne("name","fullPath",!0));function e(i,a){return Wb(a)}const t=new Ne("name");t.xform=e,n.push(t);function r(i,a){return a!==void 0?Number(a):a}const s=new Ne("size");return s.xform=r,n.push(s),n.push(new Ne("timeCreated")),n.push(new Ne("updated")),n.push(new Ne("md5Hash",null,!0)),n.push(new Ne("cacheControl",null,!0)),n.push(new Ne("contentDisposition",null,!0)),n.push(new Ne("contentEncoding",null,!0)),n.push(new Ne("contentLanguage",null,!0)),n.push(new Ne("contentType",null,!0)),n.push(new Ne("metadata","customMetadata",!0)),Ds=n,Ds}function Gb(n,e){function t(){const r=n.bucket,s=n.fullPath,i=new qe(r,s);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function Kb(n,e,t){const r={};r.type="file";const s=t.length;for(let i=0;i<s;i++){const a=t[i];r[a.local]=a.xform(r,e[a.server])}return Gb(r,n),r}function tm(n,e,t){const r=Zp(e);return r===null?null:Kb(n,r,t)}function Qb(n,e,t,r){const s=Zp(e);if(s===null||!Wi(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(h=>{const f=n.bucket,m=n.fullPath,E="/b/"+a(f)+"/o/"+a(m),C=us(E,t,r),v=Kp({alt:"media",token:h});return C+v})[0]}function nm(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}class cr{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function It(n){if(!n)throw gc()}function Ec(n,e){function t(r,s){const i=tm(n,s,e);return It(i!==null),i}return t}function Xb(n,e){function t(r,s){const i=tm(n,s,e);return It(i!==null),Qb(i,s,n.host,n._protocol)}return t}function ls(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=fb():s=db():t.getStatus()===402?s=hb(n.bucket):t.getStatus()===403?s=pb(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function rm(n){const e=ls(n);function t(r,s){let i=e(r,s);return r.getStatus()===404&&(i=lb(n.path)),i.serverResponse=s.serverResponse,i}return t}function Jb(n,e,t){const r=e.fullServerUrl(),s=us(r,n.host,n._protocol),i="GET",a=n.maxOperationRetryTime,c=new cr(s,i,Ec(n,t),a);return c.errorHandler=rm(e),c}function Yb(n,e,t){const r=e.fullServerUrl(),s=us(r,n.host,n._protocol),i="GET",a=n.maxOperationRetryTime,c=new cr(s,i,Xb(n,t),a);return c.errorHandler=rm(e),c}function Zb(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function sm(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=Zb(null,e)),r}function im(n,e,t,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let L="";for(let j=0;j<2;j++)L=L+Math.random().toString().slice(2);return L}const l=c();a["Content-Type"]="multipart/related; boundary="+l;const h=sm(e,r,s),f=nm(h,t),m="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,E=`\r
--`+l+"--",C=_t.getBlob(m,r,E);if(C===null)throw Wp();const v={name:h.fullPath},k=us(i,n.host,n._protocol),b="POST",M=n.maxUploadRetryTime,U=new cr(k,b,Ec(n,t),M);return U.urlParams=v,U.headers=a,U.body=C.uploadData(),U.errorHandler=ls(e),U}class yi{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function Tc(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{It(!1)}return It(!!t&&(e||["active"]).indexOf(t)!==-1),t}function eS(n,e,t,r,s){const i=e.bucketOnlyServerUrl(),a=sm(e,r,s),c={name:a.fullPath},l=us(i,n.host,n._protocol),h="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},m=nm(a,t),E=n.maxUploadRetryTime;function C(k){Tc(k);let b;try{b=k.getResponseHeader("X-Goog-Upload-URL")}catch{It(!1)}return It(Wi(b)),b}const v=new cr(l,h,C,E);return v.urlParams=c,v.headers=f,v.body=m,v.errorHandler=ls(e),v}function tS(n,e,t,r){const s={"X-Goog-Upload-Command":"query"};function i(h){const f=Tc(h,["active","final"]);let m=null;try{m=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{It(!1)}m||It(!1);const E=Number(m);return It(!isNaN(E)),new yi(E,r.size(),f==="final")}const a="POST",c=n.maxUploadRetryTime,l=new cr(t,a,i,c);return l.headers=s,l.errorHandler=ls(e),l}const Eh=256*1024;function nS(n,e,t,r,s,i,a,c){const l=new yi(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw yb();const h=l.total-l.current;let f=h;s>0&&(f=Math.min(f,s));const m=l.current,E=m+f;let C="";f===0?C="finalize":h===f?C="upload, finalize":C="upload";const v={"X-Goog-Upload-Command":C,"X-Goog-Upload-Offset":`${l.current}`},k=r.slice(m,E);if(k===null)throw Wp();function b(j,J){const Y=Tc(j,["active","final"]),T=l.current+f,g=r.size();let y;return Y==="final"?y=Ec(e,i)(j,J):y=null,new yi(T,g,Y==="final",y)}const M="POST",U=e.maxUploadRetryTime,L=new cr(t,M,b,U);return L.headers=v,L.body=k.uploadData(),L.progressCallback=c||null,L.errorHandler=ls(n),L}const Ve={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fo(n){switch(n){case"running":case"pausing":case"canceling":return Ve.RUNNING;case"paused":return Ve.PAUSED;case"success":return Ve.SUCCESS;case"canceled":return Ve.CANCELED;case"error":return Ve.ERROR;default:return Ve.ERROR}}class rS{constructor(e,t,r){if(bb(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}function Ln(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class sS{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mn.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mn.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mn.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,i){if(this.sent_)throw Sr("cannot .send() more than once");if(Jt(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iS extends sS{initXhr(){this.xhr_.responseType="text"}}function un(){return new iS}class oS{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=yc(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(se.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(Qp(s.status,[]))if(i)s=zp();else{this.sleepTime=Math.max(this.sleepTime*2,ub),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(se.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=eS(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,un,e,t);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=tS(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,un,t,r);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Eh*this._chunkMultiplier,t=new yi(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let a;try{a=nS(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const c=this._ref.storage._makeRequest(a,un,s,i,!1);this._request=c,c.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Eh*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Jb(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,un,e,t);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=im(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,un,e,t);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Hp(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Fo(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const i=new rS(t||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Fo(this._state)){case Ve.SUCCESS:Ln(this._resolve.bind(null,this.snapshot))();break;case Ve.CANCELED:case Ve.ERROR:const t=this._reject;Ln(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Fo(this._state)){case Ve.RUNNING:case Ve.PAUSED:e.next&&Ln(e.next.bind(e,this.snapshot))();break;case Ve.SUCCESS:e.complete&&Ln(e.complete.bind(e))();break;case Ve.CANCELED:case Ve.ERROR:e.error&&Ln(e.error.bind(e,this._error))();break;default:e.error&&Ln(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class vn{constructor(e,t){this._service=e,t instanceof qe?this._location=t:this._location=qe.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vn(e,t)}get root(){const e=new qe(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return em(this._location.path)}get storage(){return this._service}get parent(){const e=$b(this._location.path);if(e===null)return null;const t=new qe(this._location.bucket,e);return new vn(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw wb(e)}}function aS(n,e,t){n._throwIfRoot("uploadBytes");const r=im(n.storage,n._location,yc(),new _t(e,!0),t);return n.storage.makeRequestWithTokens(r,un).then(s=>({metadata:s,ref:n}))}function cS(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new oS(n,new _t(e),t)}function uS(n){n._throwIfRoot("getDownloadURL");const e=Yb(n.storage,n._location,yc());return n.storage.makeRequestWithTokens(e,un).then(t=>{if(t===null)throw Eb();return t})}function lS(n,e){const t=zb(n._location.path,e),r=new qe(n._location.bucket,t);return new vn(n.storage,r)}function hS(n){return/^[A-Za-z]+:\/\//.test(n)}function dS(n,e){return new vn(n,e)}function om(n,e){if(n instanceof wc){const t=n;if(t._bucket==null)throw _b();const r=new vn(t,t._bucket);return e!=null?om(r,e):r}else return e!==void 0?lS(n,e):n}function fS(n,e){if(e&&hS(e)){if(n instanceof wc)return dS(n,e);throw ga("To use ref(service, url), the first argument must be a Storage instance.")}else return om(n,e)}function Th(n,e){const t=e?.[$p];return t==null?null:qe.makeFromBucketSpec(t,n)}function pS(n,e,t,r={}){n.host=`${e}:${t}`;const s=Jt(e);s&&(wa(`https://${n.host}/b`),Ia("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:nd(i,n.app.options.projectId))}class wc{constructor(e,t,r,s,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=jp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ab,this._maxUploadRetryTime=cb,this._requests=new Set,s!=null?this._bucket=qe.makeFromBucketSpec(s,this._host):this._bucket=Th(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qe.makeFromBucketSpec(this._url,e):this._bucket=Th(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Le(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vn(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new Ib(Gp());{const a=Db(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const wh="@firebase/storage",Ih="0.14.0";const am="storage";function mS(n,e,t){return n=ie(n),aS(n,e,t)}function gS(n,e,t){return n=ie(n),cS(n,e,t)}function vh(n){return n=ie(n),uS(n)}function _S(n,e){return n=ie(n),fS(n,e)}function yS(n=bi(),e){n=ie(n);const r=Yt(n,am).getImmediate({identifier:e}),s=Zh("storage");return s&&ES(r,...s),r}function ES(n,e,t,r={}){pS(n,e,t,r)}function TS(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new wc(t,r,s,e,Rn)}function wS(){Ze(new We(am,TS,"PUBLIC").setMultipleInstances(!0)),Ue(wh,Ih,""),Ue(wh,Ih,"esm2020")}wS();const IS={apiKey:"AIzaSyArg9iQEsm0BNHf5jn8ujbNsvVfqit2nN8",authDomain:"vanygroup.firebaseapp.com",projectId:"vanygroup",storageBucket:"vanygroup.firebasestorage.app",messagingSenderId:"355023468464",appId:"1:355023468464:web:99d10040c7b2c98f810875",measurementId:"G-GT22MNMCPP"},Gi=ud(IS),ur=MI(Gi),cm=qR(Gi),vS=yS(Gi);typeof window<"u"&&mT(Gi);const AS="modulepreload",RS=function(n){return"/build/"+n},Ah={},Vs=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};var a=h;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");s=h(t.map(f=>{if(f=RS(f),f in Ah)return;Ah[f]=!0;const m=f.endsWith(".css"),E=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${E}`))return;const C=document.createElement("link");if(C.rel=m?"stylesheet":AS,m||(C.as="script"),C.crossOrigin="",C.href=f,l&&C.setAttribute("nonce",l),document.head.appendChild(C),m)return new Promise((v,k)=>{C.addEventListener("load",v),C.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return s.then(c=>{for(const l of c||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};class bS{constructor(){this.currentUser=null,this.authModal=null,this.init()}init(){window.Firebase&&window.Firebase.auth&&window.Firebase.auth.onAuthStateChange(e=>{this.currentUser=e,this.updateUI()}),this.initAuthModal(),this.bindAuthButtons()}initAuthModal(){document.getElementById("authModal")||this.createAuthModal(),this.authModal=document.getElementById("authModal")}createAuthModal(){document.body.insertAdjacentHTML("beforeend",`
            <div id="authModal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-lg max-w-md w-full p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold" id="authModalTitle">Masuk ke VNY Store</h3>
                        <button onclick="VNYAuth.closeModal()" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <div id="authForm">
                        <!-- Login Form -->
                        <div id="loginForm">
                            <form id="loginFormElement">
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                    <input type="email" id="loginEmail" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                    <input type="password" id="loginPassword" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required>
                                </div>
                                <button type="submit" class="w-full bg-red-600 text-white py-2 rounded-md hover:bg-red-700 transition-colors mb-3">
                                    Masuk
                                </button>
                            </form>

                            <div class="text-center mb-3">
                                <span class="text-sm text-gray-500">atau</span>
                            </div>

                            <button onclick="VNYAuth.signInWithGoogle()" class="w-full border border-gray-300 text-gray-700 py-2 rounded-md hover:bg-gray-50 transition-colors mb-4 flex items-center justify-center">
                                <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24">
                                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                                </svg>
                                Masuk dengan Google
                            </button>

                            <div class="text-center">
                                <span class="text-sm text-gray-600">Belum punya akun? </span>
                                <button onclick="VNYAuth.switchToRegister()" class="text-red-600 hover:text-red-700 text-sm font-medium">Daftar</button>
                            </div>
                        </div>

                        <!-- Register Form -->
                        <div id="registerForm" class="hidden">
                            <form id="registerFormElement">
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap</label>
                                    <input type="text" id="registerName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                    <input type="email" id="registerEmail" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                    <input type="password" id="registerPassword" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Konfirmasi Password</label>
                                    <input type="password" id="registerConfirmPassword" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required>
                                </div>
                                <button type="submit" class="w-full bg-red-600 text-white py-2 rounded-md hover:bg-red-700 transition-colors mb-4">
                                    Daftar
                                </button>
                            </form>

                            <div class="text-center">
                                <span class="text-sm text-gray-600">Sudah punya akun? </span>
                                <button onclick="VNYAuth.switchToLogin()" class="text-red-600 hover:text-red-700 text-sm font-medium">Masuk</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `)}bindAuthButtons(){const e=document.getElementById("loginFormElement");e&&e.addEventListener("submit",r=>{r.preventDefault(),this.handleLogin()});const t=document.getElementById("registerFormElement");t&&t.addEventListener("submit",r=>{r.preventDefault(),this.handleRegister()})}async handleLogin(){const e=document.getElementById("loginEmail").value,t=document.getElementById("loginPassword").value;try{const{signInUser:r}=await Vs(async()=>{const{signInUser:i}=await Promise.resolve().then(()=>Ls);return{signInUser:i}},void 0),s=await r(e,t);s.success?(this.showMessage("Berhasil masuk!","success"),this.closeModal()):this.showMessage(s.error,"error")}catch{this.showMessage("Terjadi kesalahan. Silakan coba lagi.","error")}}async handleRegister(){const e=document.getElementById("registerName").value,t=document.getElementById("registerEmail").value,r=document.getElementById("registerPassword").value,s=document.getElementById("registerConfirmPassword").value;if(r!==s){this.showMessage("Password tidak cocok","error");return}try{const{createUser:i}=await Vs(async()=>{const{createUser:c}=await Promise.resolve().then(()=>Ls);return{createUser:c}},void 0),a=await i(t,r,e);a.success?(this.showMessage("Akun berhasil dibuat!","success"),this.closeModal()):this.showMessage(a.error,"error")}catch{this.showMessage("Terjadi kesalahan. Silakan coba lagi.","error")}}async signInWithGoogle(){try{const{signInWithGoogle:e}=await Vs(async()=>{const{signInWithGoogle:r}=await Promise.resolve().then(()=>Ls);return{signInWithGoogle:r}},void 0),t=await e();t.success?(this.showMessage("Berhasil masuk dengan Google!","success"),this.closeModal()):this.showMessage(t.error,"error")}catch{this.showMessage("Terjadi kesalahan. Silakan coba lagi.","error")}}async signOut(){try{const{signOutUser:e}=await Vs(async()=>{const{signOutUser:r}=await Promise.resolve().then(()=>Ls);return{signOutUser:r}},void 0);(await e()).success&&this.showMessage("Berhasil keluar","success")}catch{this.showMessage("Terjadi kesalahan saat keluar","error")}}updateUI(){const e=document.querySelector('[data-auth="login"]'),t=document.querySelector('[data-auth="user-menu"]'),r=document.querySelector('[data-auth="user-avatar"]'),s=document.querySelector('[data-auth="user-name"]');this.currentUser?(e&&(e.style.display="none"),t&&(t.style.display="block"),r&&(r.src=this.currentUser.photoURL||"/images/default-avatar.png"),s&&(s.textContent=this.currentUser.displayName||this.currentUser.email)):(e&&(e.style.display="block"),t&&(t.style.display="none"))}showModal(){this.authModal&&this.authModal.classList.remove("hidden")}closeModal(){this.authModal&&this.authModal.classList.add("hidden")}switchToLogin(){document.getElementById("loginForm").classList.remove("hidden"),document.getElementById("registerForm").classList.add("hidden"),document.getElementById("authModalTitle").textContent="Masuk ke VNY Store"}switchToRegister(){document.getElementById("loginForm").classList.add("hidden"),document.getElementById("registerForm").classList.remove("hidden"),document.getElementById("authModalTitle").textContent="Daftar VNY Store"}showMessage(e,t="info"){const r=document.createElement("div");r.className=`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 ${t==="success"?"bg-green-500 text-white":t==="error"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,r.textContent=e,document.body.appendChild(r),setTimeout(()=>{r.remove()},3e3)}}const SS=new bS;window.VNYAuth=SS;const PS=new gt,CS=async(n,e)=>{try{return{success:!0,user:(await Ew(ur,n,e)).user}}catch(t){return{success:!1,error:t.message}}},kS=async(n,e,t=null)=>{try{const r=await yw(ur,n,e);return t&&await ww(r.user,{displayName:t}),{success:!0,user:r.user}}catch(r){return{success:!1,error:r.message}}},NS=async()=>{try{return{success:!0,user:(await Hw(ur,PS)).user}}catch(n){return{success:!1,error:n.message}}},OS=async()=>{try{return await Rw(ur),{success:!0}}catch(n){return{success:!1,error:n.message}}},um=n=>Aw(ur,n),lm=()=>ur.currentUser,Ls=Object.freeze(Object.defineProperty({__proto__:null,createUser:kS,getCurrentUser:lm,onAuthStateChange:um,signInUser:CS,signInWithGoogle:NS,signOutUser:OS},Symbol.toStringTag,{value:"Module"})),DS=async n=>{try{const e=await rb(Op(cm,n)),t=[];return e.forEach(r=>{t.push({id:r.id,...r.data()})}),{success:!0,data:t}}catch(e){return{success:!1,error:e.message}}},VS=async(n,e)=>{try{return{success:!0,id:(await sb(Op(cm,n),{...e,createdAt:ob()})).id}}catch(t){return{success:!1,error:t.message}}},LS=async(n,e,t=null)=>{try{const r=_S(vS,e);if(t){const s=gS(r,n);return new Promise((i,a)=>{s.on("state_changed",c=>{const l=c.bytesTransferred/c.totalBytes*100;t(l)},c=>{a({success:!1,error:c.message})},async()=>{try{const c=await vh(s.snapshot.ref);i({success:!0,url:c,path:e})}catch(c){a({success:!1,error:c.message})}})})}else{const s=await mS(r,n);return{success:!0,url:await vh(s.ref),path:e}}}catch(r){return{success:!1,error:r.message}}},MS=n=>["image/jpeg","image/jpg","image/png","image/webp"].includes(n.type)?n.size>5242880?{valid:!1,error:"File size too large. Maximum size is 5MB."}:{valid:!0}:{valid:!1,error:"File type not supported. Please use JPG, PNG, or WebP."};window.Firebase={auth:{onAuthStateChange:um,getCurrentUser:lm},firestore:{getCollection:DS,addDocument:VS},storage:{uploadFile:LS,validateImageFile:MS}};window.VNY={scrollTo:function(n){typeof n=="string"&&(n=document.querySelector(n)),n&&n.scrollIntoView({behavior:"smooth"})},showLoading:function(n){typeof n=="string"&&(n=document.querySelector(n)),n&&n.classList.add("opacity-50","pointer-events-none")},hideLoading:function(n){typeof n=="string"&&(n=document.querySelector(n)),n&&n.classList.remove("opacity-50","pointer-events-none")},notify:function(n,e="success"){const t=document.createElement("div");t.className=`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 ${e==="success"?"bg-green-500 text-white":e==="error"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,t.textContent=n,document.body.appendChild(t),setTimeout(()=>{t.style.transform="translateX(0)"},10),setTimeout(()=>{t.style.transform="translateX(100%)",setTimeout(()=>{document.body.removeChild(t)},300)},3e3)}};document.addEventListener("DOMContentLoaded",function(){typeof AOS<"u"&&AOS.init({duration:800,easing:"ease-in-out",once:!0})});
